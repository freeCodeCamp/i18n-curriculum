---
id: 673362cbb475e21eab726506
title: 什麼是方法串鏈，以及它如何運作？
challengeType: 19
dashedName: what-is-method-chaining-and-how-does-it-work
---

# --interactive--

方法串鏈是一種技術，你可以連續呼叫多個方法。你可以在 JavaScript 中的多種型別值上使用方法串鏈，包括字串、陣列和物件。即使字串是原始值，當你使用字串方法時，JavaScript 會暫時將它們包裝在 `String` 物件中。

讓我們來看一個使用不同字串方法的範例：

:::interactive_editor

```js
const result = "  Hello, World!  "
  .trim()
  .toLowerCase()
  .replace("world", "JavaScript");

console.log(result); // "hello, JavaScript!"
```

:::

在這個範例中，我們從一個字串開始，並依序執行三個操作行為：修剪空白、轉換為小寫，以及將字串 `world` 替換為 `JavaScript`。每個方法都會傳回一個新的字串，該字串成為下一個方法呼叫的標的。

當處理複雜操作時，串鏈方法可以顯著提升程式碼的可讀性。

例如，考慮這個使用 `filter`、`map` 和 `reduce` 方法的範例：

:::interactive_editor

```js
const transactions = [
  { amount: 100, type: "credit" },
  { amount: 20, type: "cash" },
  { amount: 150, type: "credit" },
  { amount: 50, type: "cash" },
  { amount: 75, type: "credit" }
];

const totalCreditWithBonus = transactions
  .filter((transaction) => transaction.type === "credit")
  .map((transaction) => transaction.amount * 1.1)
  .reduce((sum, amount) => sum + amount, 0);

console.log(totalCreditWithBonus); // 357.5
```

:::

在此範例中，我們有一個交易陣列，其中每個物件都有一個金額和一個信用卡或現金型別。

我們首先篩選交易並創建一個只包含信用卡交易的新陣列。然後，我們將 `map` 方法串鏈到篩選結果，並對每筆交易金額乘以 `1.1`，這表現了 `10%` 的獎勵。

然後，我們取得該結果並串鏈 `reduce` 方法以加總每個金額，結果為 `357.5`。

雖然串鏈方法可以讓程式碼更簡潔且易讀，但重要的是要謹慎使用。

非常長的串鏈可能會變得難以偵錯，因為無法立即清楚知道串鏈中的哪個步驟可能導致問題。通常將非常長的串鏈拆分成多個步驟是個良好做法，以提升清晰度並更容易進行偵錯。

# --questions--

## --text--

以下 `code` 的輸出結果會是什麼？

```js
let str = "  HELLO world  ";
let result = str.trim().toLowerCase().split(' ');
console.log(result);
```

## --answers--

`["HELLO", "world"]`

### --feedback--

考慮串鏈中每個方法的效果：`trim()`、`toLowerCase()` 和 `split()`。

---

`["hello", "world"]`

---

`"hello world"`

### --feedback--

考慮串鏈中每個方法的效果：`trim()`、`toLowerCase()` 和 `split()`。

---

`[" HELLO", "world "]`

### --feedback--

考慮串鏈中每個方法的效果：`trim()`、`toLowerCase()` 和 `split()`。

## --video-solution--

2

## --text--

在串鏈的背景關係中，方法通常應該傳回什麼以允許進一步的串鏈？

## --answers--

`undefined`

### --feedback--

思考什麼讓下一個串鏈中的方法能夠緊接著目前的方法被呼叫。

---

`null`

### --feedback--

思考什麼讓下一個串鏈中的方法能夠緊接著目前的方法被呼叫。

---

物件本身（`this`）。

---

一個新的物件。

### --feedback--

思考什麼讓下一個串鏈中的方法能夠緊接著目前的方法被呼叫。

## --video-solution--

3

## --text--

以下 `code` 的結果會是什麼？

```js
let obj = {
    value: 1,
    increment: function() {
        this.value++;
        return this;
    },
    double: function() {
        this.value *= 2;
        return this;
    },
    getValue: function() {
        return this.value;
    }
};

let result = obj.increment().double().increment().getValue();
console.log(result);
```

## --answers--

`2`

### --feedback--

追蹤方法呼叫串鏈及其對 `value` 屬性的影響。

---

`3`

### --feedback--

追蹤方法呼叫串鏈及其對 `value` 屬性的影響。

---

`4`

### --feedback--

追蹤方法呼叫串鏈及其對 `value` 屬性的影響。

---

`5`

## --video-solution--

4
