---
id: 673407ca21117a67cf9521ca
title: 什麼是 Promise，Promise 串鏈如何運作？
challengeType: 19
dashedName: what-are-promises-and-how-does-promise-chaining-work
---

# --description--

`Promise` 是一個物件，用來表述非同步操作的最終完成或失敗。它最初處於等待中狀態。當操作成功時，它可以轉換為已完成狀態；當操作失敗時，則轉換為已拒絕狀態。以下是建立 `Promise` 的範例：

```js
const aPromise = new Promise((resolve, reject) => {
  setTimeout(() => {
    resolve("Operation successful!");
  }, 1000);
});
```

在此範例中，我們創建一個使用 `setTimeout` 模擬非同步操作的 promise。在 1 秒後，該 promise 會以訊息 `Operation successful!` 被決議。

另一種處理 promises 的方式是使用 `.then` 和 `.catch` 方法。

`.then()` 方法用於 promise 中指定當 promise 完成時應該發生的事情，而 `.catch()` 用於處理發生的任何錯誤。讓我們看看如何將 `.then` 和 `.catch` 用於我們的 promise：

```js
aPromise.then((result) => {
  console.log(result);  // Outputs: "Operation successful!"
}).catch((error) => {
  console.error(error);
});
```

在這段程式碼中，或當 promise 被完成時要執行的指令，傳遞給 `.then()` 的函式將會以 promise 的決議值被呼叫。如果發生錯誤，則會改為呼叫傳遞給 `.catch()` 的函式。

現在，讓我們來談談 promise 串鏈。promise 的強大特性之一是我們可以將多個非同步操作串接在一起。每個 `.then()` 都可以傳回一個新的 promise，讓你能夠依序執行一連串的非同步操作。以下是一個範例： 

```js
fetch('https://api.example.com/data')
  .then(response => response.json())
  .then(data => {
    console.log(data);
    return fetch('https://api.example.com/data2');
  })
  .then(response => response.json())
  .then(data2 => console.log(data2))
  .catch(error => console.error('Error:', error));
```

在這個範例中，我們依序進行兩次 API 呼叫。第一個 `.then()` 將回應解析為 JSON。第二個 `.then()` 記錄資料並進行另一個 API 呼叫。第三個 `.then()` 解析第二次 API 呼叫的回應，第四個 `.then()` 記錄該資料。如果這個串鏈中的任何一點發生錯誤，將會被最後的 `.catch()` 捕捉。

重要的是要注意 `.catch()` 會捕捉串鏈中任何先前步驟的錯誤。這表示你不需要為每個單獨步驟添加錯誤處理，這可以大幅簡化你的程式碼。

# --questions--

## --text--

Promise 可能的狀態有哪些？

## --answers--

作用中、非作用中或已終止。

### --feedback--

思考一個 Promise 從產生到完成所經歷的階段。

---

執行中、暫停中或已停止。

### --feedback--

思考一個 Promise 從產生到完成所經歷的階段。

---

待處理、已完成或已拒絕。

---

已啟動、處理中或已結束。

### --feedback--

思考一個 Promise 從產生到完成所經歷的階段。

## --video-solution--

3

## --text--

`.then()` 方法在 Promise 串鏈中的目的為何？

## --answers--

要創建一個新的 Promise。

### --feedback--

考慮 `.then()` 允許你對 Promise 的結果執行的操作。

---

指定 Promise 成功時發生的事情。

---

在 Promise 串鏈中處理錯誤。

### --feedback--

考慮 `.then()` 允許你對 Promise 的結果執行的操作。

---

取消一個 Promise。

### --feedback--

考慮 `.then()` 允許你對 Promise 的結果執行的操作。

## --video-solution--

2

## --text--

在 Promise 串鏈中，你通常應該將 `.catch()` 方法放在哪裡？

## --answers--

在每個 `.then()` 之後。

### --feedback--

思考 `.catch()` 如何處理來自串鏈中多個步驟的錯誤。

---

在第一個 `.then()` 之前。

### --feedback--

思考 `.catch()` 如何處理來自串鏈中多個步驟的錯誤。

---

在串鏈中間。

### --feedback--

思考 `.catch()` 如何處理來自串鏈中多個步驟的錯誤。

---

在串鏈的末端。

## --video-solution--

4
