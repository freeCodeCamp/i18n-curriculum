---
id: 673407d56c3dce67fa97969b
title: 什么是 Async/Await，它是如何工作的？
challengeType: 19
dashedName: what-is-async-await-and-how-does-it-work
---

# --interactive--

在之前的课程中，你学习了异步的编程，它允许其他代码在我们等待一些耗时任务完成时运行，比如从服务器获取数据、从文件读取数据等等。

`async`/`await`，基于 promises，使编写和读取异步的代码更容易。当你在函数前加上 `async` 关键字时，表示该函数总是返回一个 `Promise`。只有在 `async` 函数内部，你才能使用 `await` 关键字，它允许你等待一个 `Promise` 解析后再执行下一行代码。下面是一个示例来说明 `async`/`await` 的工作原理：

:::interactive_editor

```js
async function delayedGreeting(name) {
  console.log("A Messenger entered the chat...");
  await new Promise(resolve => setTimeout(resolve, 2000));
  console.log(`Hello, ${name}!`);
}

delayedGreeting("Alice");
console.log("First Printed Message!");
```

:::

在这段代码中，我们定义了一个名为 `delayedGreeting` 的 `async` 函数。在该函数内部，我们使用 `await` 暂停执行 2 秒。延迟结束后，它打印一条问候。 

当我们调用这个函数时，你会看到 `First Printed Message!` 在问候语之前出现。这是因为该函数是异步的——它不会阻塞其余代码的运行。

`async`/`await` 最大的优势之一是误差处理。使用 promises 时，我们经常需要使用 `.catch()` 方法来处理误差。使用 `async`/`await`，我们可以使用 `try`/`catch` 块。下面是一个示例：

```js
async function fetchUserData() {
  try {
    let response = await fetch(`https://api.example.com/users`);
    let userData = await response.json();
    console.log(userData);
  } catch (error) {
    console.log("Error fetching user data:", error);
  }
}

fetchUserData();
```

在此示例中，我们使用 `async`/`await` 从 API 获取用户数据。`await` 关键字使用了两次：一次等待 fetch 操作完成，另一次等待 JSON 解析完成。如果在此过程中发生任何误差，它将被 `catch` 块捕获。

# --questions--

## --text--

`async` 关键字在 JavaScript 中的主要用途是什么？

## --answers--

使函数运行更快。

### --feedback--

考虑 `async` 对函数返回值的影响。

---

表示一个函数将始终返回一个 Promise。

---

为函数创建一个新建线程以运行。

### --feedback--

考虑 `async` 对函数返回值的影响。

---

防止函数被异步调用。

### --feedback--

考虑 `async` 对函数返回值的影响。

## --video-solution--

2

## --text--

`await` 关键字可以在 JavaScript 的哪里使用？

## --answers--

代码中的任何地方。

### --feedback--

考虑 `await` 可以放置的位置限制。

---

在你的代码的最开始。

### --feedback--

考虑 `await` 可以放置的位置限制。

---

在 `async` 函数内部。

---

仅在 `try...catch` 块中。

### --feedback--

考虑 `await` 可以放置的位置限制。

## --video-solution--

3

## --text--

当在等待的 `Promise` 中发生误差时会发生什么？

## --answers--

程序崩溃。

### --feedback--

考虑 `async`/`await` 的误差处理方式。

---

该误差会自动记录到控制台日志。

### --feedback--

考虑 `async`/`await` 的误差处理方式。

---

没有，Promise 中的误差会被忽略。

### --feedback--

考虑 `async`/`await` 的误差处理方式。

---

可以使用 `try...catch` 块捕获该误差。

## --video-solution--

4
