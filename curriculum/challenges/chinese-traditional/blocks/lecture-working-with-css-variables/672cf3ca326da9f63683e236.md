---
id: 672cf3ca326da9f63683e236
title: 什麼是 @property 規則，以及它如何與備援一起運作？
challengeType: 19
dashedName: what-is-the-at-property-rule
---

# --interactive--

`@property` 規則是一個強大的 CSS 功能，允許開發者定義訂製屬性，並對其行為擁有更高的控制元件，包括它們如何動畫化及其初始值。 

此規則提供一種增強 CSS 訂製屬性功能的方法，並在其應用中提供更多彈性。

`@property` 規則的基本語法如下：

```css
@property --property-name {
  syntax: '<type>';
  inherits: true | false;
  initial-value: <value>;
}
```

`--property-name` 是你正在定義的訂製屬性名稱。像所有訂製屬性一樣，它必須以兩個破折號開頭。 

`syntax` 定義屬性的型別，可以是像 `<color>`、`<length>`、`<number>`、`<percentage>` 或更複雜的型別。

`inherits` 指定該屬性是否應該從其父元素繼承值。 

`initial-value` 設定該屬性的預設值。

以下是使用 `@property` 規則的實際範例：

:::interactive_editor

```html
<link rel="stylesheet" href="styles.css">
<button class="button">Click Me</button>
```

```css
@property --main-color {
  syntax: '<color>';
  inherits: false;
  initial-value: #3498db;
}

.button {
  background-color: var(--main-color);
}
```

:::

在此範例中，我們定義了一個訂製屬性 `--main-color` 為 `color` 值，設定為不繼承，並給予它初始值 `#3498db`。

`@property` 規則的主要利益之一是它允許訂製屬性的動畫，這在以前是不可能的：

:::interactive_editor

```html
<link rel="stylesheet" href="styles.css">
<div class="gradient-box"></div>
```

```css
@property --gradient-angle {
  syntax: '<angle>';
  inherits: false;
  initial-value: 0deg;
}

.gradient-box {
  width: 100px;
  height: 100px;
  background: linear-gradient(var(--gradient-angle), red, blue);
  transition: --gradient-angle 0.5s;
}

.gradient-box:hover {
  --gradient-angle: 90deg;
}
```

:::

上述程式碼創建了一個在元素被暫留時平滑動畫的漸層，這是標準訂製屬性無法達成的效果。

現在，讓我們討論 `@property` 規則如何與備援一起運作。 

備援在 CSS 中非常重要，以確保在不支援某些特性的瀏覽器中樣式能夠優雅地退化。使用 `@property` 時，備援在兩個層級上運作：針對規則本身以及自定屬性的使用。

對於不支援 `@property` 規則的瀏覽器，你可以透過以傳統方式宣告訂製屬性來提供備援方案：

:::interactive_editor

```html
<link rel="stylesheet" href="styles.css">
```

```css
:root {
  --main-color: #3498db;
}

@property --main-color {
  syntax: '<color>';
  inherits: false;
  initial-value: #3498db;
}

body {
  background-color: var(--main-color);
}
```

:::

在這種情況下，支援 `@property` 的瀏覽器將使用較嚴格定義的版本，而其他瀏覽器則會回退到標準的訂製屬性宣告。

當使用訂製屬性時，你可以像使用標準訂製屬性一樣，使用 `var()` 函式（程式）提供備用值：

:::interactive_editor

```html
<link rel="stylesheet" href="styles.css">
<button class="button">Click Me</button>
```

```css
.button {
  background-color: var(--main-color, #3498db);
}
```

:::

這確保即使沒有定義或 `--main-color` 屬性無效，按鈕仍會有背景色。

`@property` 規則也允許更複雜的備援情境。例如，你可以使用它來提供型別安全的備援：

:::interactive_editor

```html
<link rel="stylesheet" href="styles.css">
<div class="box">Colored box</div>
```

```css
@property --padding {
  syntax: '<length>';
  inherits: false;
  initial-value: 10px;
}

.box {
  width: 100px;
  height: 100px;
  background-color: darkred;
  color: white;
  padding: var(--padding);
}
```

:::

在這種情況下，如果有人嘗試將 `--padding` 設定為無效值，例如顏色，瀏覽器將回退到 `10px` 的初始值，維護型別安全。

自 2024 年初起，CSS 的 `@property` 規則被認為在所有主要現代瀏覽器引擎（如 Chrome、Edge、Opera、Firefox 和 Safari）中廣泛可用。如果你想支援較早的瀏覽器，則需要如上所述提供備用 CSS。

總結來說，`@property` 規則表述了我們在 CSS 中使用訂製屬性的重大進展。它提供更多控制元件並啟用像是訂製屬性動畫等新可能性。然而，重要的是要謹慎使用並且始終提供適當的備援，以確保所有瀏覽器都有良好的體驗。與任何尖端的網頁技術一樣，關鍵在於提升支援該技術瀏覽器的體驗，同時確保不支援者的基本功能。

# --questions--

## --text--

`@property` 規則在 CSS 中的主要目的是什麼？

## --answers--

要創建新的 CSS 屬性。

### --feedback--

思考 `@property` 如何與訂製 CSS 屬性相關。

---

定義並控制訂製屬性的行為。

---

取代標準 CSS 屬性。

### --feedback--

思考 `@property` 如何與訂製 CSS 屬性相關。

---

創建動畫。

### --feedback--

思考 `@property` 如何與訂製 CSS 屬性相關。

## --video-solution--

2

## --text--

以下哪一項不是 `@property` 規則中有效的描述符？

## --answers--

`syntax`

### --feedback--

考慮 `@property` 規則宣告的基本結構。

---

`inherits`

### --feedback--

考慮 `@property` 規則宣告的基本結構。

---

`initial-value`

### --feedback--

考慮 `@property` 規則宣告的基本結構。

---

`animation`

## --video-solution--

4

## --text--

你如何為不支援 `@property` 規則的瀏覽器提供備援方案？

## --answers--

使用 polyfill。

### --feedback--

想想你通常如何在沒有使用 `@property` 的情況下宣告訂製屬性。

---

使用標準方法宣告訂製屬性。

---

使用 `@supports` 規則。

### --feedback--

想想你通常如何在沒有使用 `@property` 的情況下宣告訂製屬性。

---

無法提供備援方案。

### --feedback--

想想你通常如何在沒有使用 `@property` 的情況下宣告訂製屬性。

## --video-solution--

2
