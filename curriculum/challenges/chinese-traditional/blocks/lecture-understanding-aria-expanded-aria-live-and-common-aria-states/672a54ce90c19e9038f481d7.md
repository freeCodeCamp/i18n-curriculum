---
id: 672a54ce90c19e9038f481d7
title: 什麼是 aria-expanded 屬性，以及它如何運作？
challengeType: 19
dashedName: what-is-the-aria-expanded-attribute
---

# --interactive--

`aria-expanded` 屬性用於無障礙目的，以顯示控制元件是否已展開或摺疊。它與可摺疊的控制元件一起使用，例如選單、手風琴和其他控制內容可見性的揭露控制元件。若控制元件已展開，`aria-expanded` 屬性設為 `true`，若已摺疊，則設為 `false`。

`aria-expanded` 提供的資訊讓使用螢幕閱讀器的人能夠了解控制元件的當前狀態（是展開還是收合）。

`aria-expanded` 屬性套用於切換可摺疊元件可見性的互動元素。例如，如果按鈕切換可展開的選單，則 `aria-expanded` 屬性會放在該按鈕上。

當選單展開時，`aria-expanded` 屬性應該設為 `true`，如以下範例所示：

```html
<button aria-expanded="true">Menu</button>
```

當選單收合時，應該設定為 `false`。

```html
<button aria-expanded="false">Menu</button>
```

你必須在控制元件上將 `aria-expanded` 屬性設定為 `true` 或 `false`。例如，如果按鈕切換選單的可見性，則 `aria-expanded` 的預設值應該根據選單的預設可見性來設定。

如果選單預設展開，`aria-expanded` 應該最初設定為 `true`。如果選單預設收合，`aria-expanded` 應該最初設定為 `false`。

`aria-expanded` 的值應該在使用者與該元素交談時，使用 JavaScript 動態更新。

此外，屬性 `aria-controls` 和 `aria-owns` 可以與 `aria-expanded` 結合使用，以建立控制元件與其所控制元素之間的程式連接。

讓我們從 `aria-controls` 開始。當與 `aria-expanded` 一起使用時，`aria-controls` 屬性用來指定被控制的元素。<dfn>例如</dfn>，按鈕可能會展開或摺疊作為選單的列表。`aria-controls` 的值將會是被控制元素的 `id`（在此例中為選單列表）。

:::interactive_editor

```html
<link rel="stylesheet" href="styles.css">

<button aria-expanded="false" aria-controls="menu1">Menu</button>
<ul id="menu1">
  <li>...</li>
  <li>...</li>
</ul>

<script src="index.js"></script>
```

```css
button {
  background-color: #0078d4;
  color: white;
  padding: 8px 12px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

button:hover {
  background-color: #005ea2;
}

ul {
  list-style: none;
  padding: 0;
  margin: 8px 0 0;
  border: 1px solid #ccc;
  border-radius: 4px;
  width: 150px;
  background: #fff;
}

li {
  padding: 8px;
  cursor: pointer;
}

li:hover {
  background-color: #f2f2f2;
}

```

```js
const button = document.querySelector('button');
const menu = document.getElementById(button.getAttribute('aria-controls'));

button.addEventListener('click', () => {
  const expanded = button.getAttribute('aria-expanded') === 'true';
  button.setAttribute('aria-expanded', String(!expanded));
  menu.hidden = expanded;
});

```

:::

請注意，列表緊接在控制按鈕之後。對於像這樣可展開的控制元件，最好讓展開的內容緊接在 DOM 中控制它的元素之後。這樣可以避免螢幕閱讀器使用者必須搜尋展開的內容，並且讓鍵盤使用者更容易瀏覽展開內容中的任何互動控制元件。

如果無法將展開的內容立即放置在控制元件之後，`aria-owns` 屬性允許你在無障礙樹中虛擬地將其移動到控制元件之後。這讓像螢幕閱讀器這樣的輔助技術能夠假裝展開的內容直接放置在 DOM 中控制元件之後。  

:::interactive_editor

```html
<link rel="stylesheet" href="styles.css">

<button aria-owns="menu1" aria-expanded="true">Menu</button>
<main>
  <!-- an entire page worth of content --->
</main>
<ul id="menu1">
  <li>...</li>
  <li>...</li>
</ul>

<script src="index.js"></script>
```

```css
button {
  background-color: #0078d4;
  color: white;
  padding: 8px 12px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  margin-bottom: 10px;
}

button:hover {
  background-color: #005ea2;
}

ul {
  list-style: none;
  padding: 0;
  margin: 8px 0;
  border: 1px solid #ccc;
  border-radius: 4px;
  width: 150px;
  background: #fff;
  position: absolute;
  z-index: 10;
}

li {
  padding: 8px;
  cursor: pointer;
}

li:hover {
  background-color: #f2f2f2;
}

```

```js
const button = document.querySelector('button');
const menu = document.getElementById(button.getAttribute('aria-owns'));

button.addEventListener('click', () => {
  const expanded = button.getAttribute('aria-expanded') === 'true';
  button.setAttribute('aria-expanded', String(!expanded));
  menu.hidden = expanded;
});

// Close the menu if user clicks outside
document.addEventListener('click', (e) => {
  if (!button.contains(e.target) && !menu.contains(e.target)) {
    button.setAttribute('aria-expanded', 'false');
    menu.hidden = true;
  }
});

```

:::

使用 `aria-owns` 屬性有其缺點。它會為螢幕閱讀器使用者產生不必要的冗長，因為大多數螢幕閱讀器在第一次展開時會自動朗讀展開元素的全部內容。它也不會改變標籤鍵順序，除非你使用 JavaScript 管理標籤鍵順序，否則可能會迫使鍵盤使用者在到達展開內容之前，必須依序標籤頁面上所有其他互動控制元件。

理想情況下，可展開的內容應該放在控制元件之後，且只有在無法這麼做的最壞情況下才應使用 `aria-owns` 屬性。如果必須使用，你需要使用各種螢幕閱讀器和瀏覽器進行徹底測試，以確保你的實作對所有人皆可存取。

提醒你，當你使用 `aria-controls` 或 `aria-owns` 時，`aria-expanded` 的值必須隨著控制元件的展開和收合持續更新。

`aria-expanded` 屬性顯示控制元件是展開還是收合。這些資訊對螢幕閱讀器使用者來說非常重要，有助於他們了解可收合元素（如選單、手風琴以及其他類似的揭露控制元件）的當前狀態。

透過正確使用 `aria-expanded`，你可以為所有人創建直覺的使用者體驗。

# --questions--

## --text--

`aria-expanded` 屬性的主要用途是什麼？

## --answers--

定義元素的視覺外觀。

### --feedback--

思考 `aria-expanded` 如何向輔助技術提供資訊。

---

為了提升網站效率。

### --feedback--

思考 `aria-expanded` 如何向輔助技術提供資訊。

---

用以顯示元素是展開還是摺疊。

---

為了增強瀏覽器相容性。

### --feedback--

思考 `aria-expanded` 如何向輔助技術提供資訊。

## --video-solution--

3

## --text--

何時應該使用 `aria-expanded` 屬性？

## --answers--

針對網頁上的所有元素。

### --feedback--

考慮 `aria-expanded` 最有用的背景關係。

---

針對視覺上隱藏的元素。

### --feedback--

考慮 `aria-expanded` 最有用的背景關係。

---

對於可摺疊元素，例如選單和手風琴。

---

對於具有動態內容的元素。

### --feedback--

考慮 `aria-expanded` 最有用的背景關係。

## --video-solution--

3

## --text--

`aria-expanded` 屬性可能的值有哪些？

## --answers--

`true`、`false`、`yes`、`no`。

### --feedback--

思考一個元素在展開或摺疊時可能處於的狀態。

---

`open`、`closed`、`expanded`、`collapsed`。

### --feedback--

思考一個元素在展開或摺疊時可能處於的狀態。

---

`show`、`hide`、`visible`、`invisible`。

### --feedback--

思考一個元素在展開或摺疊時可能處於的狀態。

---

`true`、`false`。

## --video-solution--

4
