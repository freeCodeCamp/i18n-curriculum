---
id: 673500b41af8500191febedc
title: 如何在 React 中呈現列表？
challengeType: 19
dashedName: how-do-you-render-lists-in-react
---

# --description--

在 React 網頁應用程式中，呈現列表是一項基本任務，用於向使用者顯示資料。在 React 中，`map` 方法用於將資料陣列轉換為可以在使用者介面中呈現的 JSX 元素陣列。

這是一個名為 `FruitList` 的組件範例，用來顯示水果列表：

```jsx
function FruitList() {
  const fruits = ['Apple', 'Banana', 'Cherry', 'Date'];
  return (
    <ul>
      {fruits.map(fruit => <li>{fruit}</li>)}
    </ul>
  );
}
```

在這個範例中，`map` 函式（程式）會迭代 `fruits` 陣列中的每個項目。對於每個水果，它會創建一個包含該水果名稱的新 `li` 元素。新創建的 `li` 元素陣列隨後會顯示在 `ul` 父標記內。

然而，在 React 中呈現列表時，切勿忘記為列表中的每個元素添加 `key` 屬性。`key` 必須始終是唯一的，它有助於 React 識別哪些項目已更改、被添加或被移除，這對於高效地呈現和更新列表至關重要。

如果你忘記了 key，React 會在主控台顯示警告，但不會丟出重大錯誤、致命錯誤。應用程式仍可能呈現並運作，但你可能會遇到細微的錯誤，特別是在列表變更時。這些錯誤可能很難偵錯，因為 UI 一開始看起來可能是正確的。

一個常見的錯誤是使用陣列索引作為鍵，像這樣：

```jsx
{fruits.map((fruit, index) => <li key={index}>{fruit}</li>)}
```

雖然這樣可以消除警告，但通常被視為反樣式。使用索引作為鍵可能會在列表重新排序、排序或篩選時引發問題。React 使用鍵來追蹤元素。如果列表順序改變，React 可能會錯誤地重複使用組件狀態，或因為鍵（索引）保持不變，即使該索引的內容已更改，也無法高效地更新 DOM。

最佳做法是為每個項目使用穩定且唯一的識別符。這通常是來自你的資料庫的 ID，例如 UUID 或資料庫 ID。

如果你的資料沒有唯一的 ID，你可以在資料被創建時產生一個（例如，使用 `crypto.randomUUID()` 或像 `uuid` 這樣的程式庫），或者使用保證唯一的欄位組合。然而，你應該避免在呈現時即時產生鍵（例如，`key={Math.random()}`），因為這會導致 React 在每次呈現時重新建立 DOM 元素並重置它們的狀態。

讓我們修改範例以包含鍵：

```jsx
function FruitList() {
  const fruits = ["Apple", "Banana", "Cherry", "Date"];
  return (
    <ul>
      {fruits.map((fruit, index) => (
        <li key={`${fruit}-${index}`}>{fruit}</li>
      ))}
    </ul>
  );
}
```

在這個重構的範例中，我們透過將水果名稱與其索引串接，為每個列表項目建立唯一的鍵。這確保每個列表項目都有獨特的鍵，有助於 React 高效地管理和更新列表，當項目被新增、移除或重新排序時。

React 也允許你呈現更複雜的結構。例如，你可能有一個表述使用者的物件陣列，每個物件都有多個你想要顯示的屬性：

```jsx
function UserList() {
  const users = [
    { id: "user-001-employee", name: "Alice", email: "alice@example.com" },
    { id: "user-002-employee", name: "Bob", email: "bob@example.com" },
    { id: "user-003-employee", name: "John", email: "john@example.com" },
  ];
  return (
    <div>
      {users.map((user) => (
        <div key={user.id}>
          <h3>{user.name}</h3>
          <p>{user.email}</p>
        </div>
      ))}
    </div>
  );
}
```

在這個範例中，我們為每個使用者建立更複雜的 JSX 結構，顯示他們的名稱和電子郵件位址。我們使用使用者的 `id` 作為 `key`，這是個良好的做法。

總結來說，在 React 中呈現列表涉及將資料陣列轉換成 JSX 元素，通常使用 `map` 函式（程式）。

# --questions--

## --text--

在 React 中呈現列表時，使用 `key` 屬性的主要目的是什麼？

## --answers--

為列表項目設計樣式。

### --feedback--

想想我們之前提到關於 React 的呈現優化。

---

為了幫助 React 高效識別列表中的變更。

---

對列表項目進行排序。

### --feedback--

想想我們之前提到關於 React 的呈現優化。

---

篩選列表項目。

### --feedback--

想想我們之前提到關於 React 的呈現優化。

## --video-solution--

2

## --text--

在 React 中，通常使用哪個 JavaScript 方法將資料陣列轉換成 JSX 元素陣列？

## --answers--

`forEach()`

### --feedback--

回想我們在範例中持續使用的從陣列項目建立 JSX 元素的方法。

---

`reduce()`

### --feedback--

回想我們在範例中持續使用的從陣列項目建立 JSX 元素的方法。

---

`map()`

---

`filter()`

### --feedback--

回想我們在範例中持續使用的從陣列項目建立 JSX 元素的方法。

## --video-solution--

3

## --text--

在呈現具有唯一 ID 的項目列表時，`key` 屬性被認為的最佳實踐是什麼？

## --answers--

使用該項目在陣列中的索引。

### --feedback--

記得我們之前說過要為鍵使用穩定且唯一的識別符號。

---

使用隨機數。

### --feedback--

記得我們之前說過要為鍵使用穩定且唯一的識別符號。

---

使用該項目的唯一 ID。

---

使用該項目的名稱或標題。

### --feedback--

記得我們之前說過要為鍵使用穩定且唯一的識別符號。

## --video-solution--

3
