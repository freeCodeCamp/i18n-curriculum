---
id: 6733d852175df50937f06061
title: 你如何使用媒體資料流從區域的裝置擷取影片和音訊？
challengeType: 19
dashedName: how-can-you-work-with-the-media-streams-getusermedia-to-capture-video-and-audio-from-a-local-device
---

# --description--

有時你可能想要擷取音訊或影片，而不是播放音訊和影片。Media Capture and Streams API，或稱 MediaStream API，允許你這麼做。

然而，為了使用 API，你需要創建 `MediaStream` 物件。你可以使用建構式來做到這一點，但它不會與使用者的硬體綁定。相反地，全域的 `navigator` 物件的 `mediaDevices` 屬性有一個 `getUserMedia()` 方法供你使用。

此方法接受一個單一的 `constraints` 物件，用以定義你想接收的媒體類型。此物件具有 `audio` 和 `video` 屬性，分別對應音訊和視訊資料流。若你不想接收該類型的資料流，這些屬性可以是 `false`，若想接收則為 `true`，或是定義額外條件的物件。

例如，你可以要求特定的 `resolution` 的 `video` 輸出：

```js
window.navigator.mediaDevices.getUserMedia({
  audio: true,
  video: {
    width: {
      min: 1280,
      ideal: 1920,
      max: 3840
    },
    height: {
      min: 720,
      ideal: 1080,
      max: 2160
    }
  }
});
```

此條件物件指定影片串流的最小和最大決議過程。`ideal` 屬性指定你最希望擁有的決議過程－而資料流將提供最接近你理想的決議過程。

一旦你創建了你的 `MediaStream`（假設使用者同意自動請求存取他們的硬體），你就可以依照需要使用該資料流資料。

請注意，`getUserMedia()` 傳回一個 Promise，這表示你將需要一個回呼函式來使用資料流，或是使用 async/await 語法。你將在未來的課程中學習更多關於 Promise 和非同步程式設計的內容。 

這是一個基本範例，將使用者的網路攝影機影像呈現到頁面上。

```js
const video = document.querySelector("video");
const stream =
  await window.navigator.mediaDevices.getUserMedia({ video: true });
video.srcObject = stream;
await video.play();
```

值得注意的是，這個 API 不提供對螢幕擷取的存取。你將在下一課中學習那個 API。

# --questions--

## --text--

哪一種方法用於存取使用者的媒體裝置？

## --answers--

`createMediaStream()`

### --feedback--

此方法存取使用者的媒體裝置。

---

`getMediaDevices()`

### --feedback--

此方法存取使用者的媒體裝置。

---

`getUserMedia()`

---

`captureStream()`

### --feedback--

此方法存取使用者的媒體裝置。

## --video-solution--

3

## --text--

在 `video` 的 `constraints` 物件中，`ideal` 屬性表述什麼？

## --answers--

最低可接受的決議程序。

### --feedback--

思考字 ideal 的意義。

---

最大可能的決議程序。

### --feedback--

思考字 ideal 的意義。

---

首選決議過程。

---

如果沒有符合其他條件，則使用預設決議程序。

### --feedback--

思考字 ideal 的意義。

## --video-solution--

3

## --text--

`getUserMedia()` 方法傳回什麼？

## --answers--

一個 `MediaStream` 物件。

### --feedback--

`getUserMedia()` 方法是非同步的。

---

一個 `constraints` 物件。

### --feedback--

`getUserMedia()` 方法是非同步的。

---

一個 Promise。

---

一個 `video` 元素。

### --feedback--

`getUserMedia()` 方法是非同步的。

## --video-solution--

3
