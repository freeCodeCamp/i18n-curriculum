---
id: 67db31c7ed46f430ce6c2da6
title: 模擬（Mocking）、偽造（Faking）和存根（Stubbing）之間有什麼差異？
challengeType: 19
dashedName: what-are-the-differences-between-mocking-faking-and-stubbing
---

# --description--

模擬是將真實資料替換為模擬真實組件行為的假資料的處理程序。這讓測試人員和開發人員能夠在不依賴外部相依性的情況下，測試應用程式中的特定組件。

模擬資料的一個常見使用情境是在處理 API 呼叫時。想像你在你的應用程式中有這樣一個 fetch 呼叫：

```js
export const postService = {
  async getPosts() {
    const response = await fetch("https://api.example.com/posts");
    return response.json();
  },
};
```

如果你需要測試 `postService` 函式（程式），你可以模擬 API 回應，而不是持續呼叫 API 來取得資料。從 API 取得資料需要時間，且依賴像是網路可用性和伺服端回應等外部因素。模擬 API 回應可以消除這些外部因素，並讓測試者使用可預測且受控制的資料集。

這是一個範例模擬 API 回應：

```json
[
  {
    "id": 1,
    "title": "Understanding Async/Await in JavaScript",
    "content": "Async/Await makes asynchronous code look and behave like synchronous code...",
    "author": "Jane Doe",
    "created_at": "2025-04-10T14:32:00Z"
  },
  {
    "id": 2,
    "title": "10 Tips for Writing Clean Code",
    "content": "Clean code is not just about code formatting. It involves naming, architecture...",
    "author": "John Smith",
    "created_at": "2025-04-08T09:21:00Z"
  },
  {
    "id": 3,
    "title": "Exploring React 19 Features",
    "content": "React 19 comes with exciting features like new hooks and better performance...",
    "author": "Alex Lee",
    "created_at": "2025-04-07T18:47:00Z"
  }
]
```

現在我們了解什麼是 mocking，讓我們將它與 stubbing 做比較。Stub 是會為應用程式中預期的行為傳回預先定義的回應或虛擬資料的物件。<dfn>例如</dfn>，你可以在測試中為資料庫連接的行為建立 stub，而不必依賴實際的資料庫連接。

這裡是一個在 Jest 中的 stub 範例：

```js
import { postService } from "./postService";
import { db } from "./db";

jest.mock("./db", () => ({
  db: {
    fetchPosts: jest.fn(),
  },
}));

test("should return stubbed posts", async () => {
  const fakePosts = [
    { id: 1, title: "Stubbed Post", content: "This is a stubbed post." },
  ];

  db.fetchPosts.mockResolvedValue(fakePosts);

  const posts = await postService.getPosts();

  expect(posts).toEqual(fakePosts);
});
```

`db.fetchPosts.mockResolvedValue(fakePosts);` 是此範例中的存根。

最後要討論的組件是 fakes。fakes 是真實組件的簡化版本，沒有真實組件的複雜性或副作用。為你的資料庫添加 fakes 時，可以將資料儲存在記憶體中，而不是與真實資料庫互動。這將允許你在記憶體中模擬資料庫操作，速度會比處理真實資料庫快得多。另一個常見的例子是在操作檔案系統時使用 fakes。當進行測試時，你可以創建一個假的檔案系統來取代真實的檔案系統。

當你繼續建置更複雜的軟體應用程式時，請考慮在測試中適當使用 mocks、stubs 或 fakes。

# --questions--

## --text--

以下哪一項是使用 mock 進行測試的常見用例？

## --answers--

模擬 HTML 變更。

### --feedback--

請參考課程開始時討論的內容。

---

模擬 CSS 變更。

### --feedback--

請參考課程開始時討論的內容。

---

模擬 API 呼叫。

---

模擬 JavaScript 字串方法。

### --feedback--

請參考課程開始時討論的內容。

## --video-solution--

3

## --text--

測試中的 stub 是什麼？

## --answers--

在測試環境中傳回 null 的物件。

### --feedback--

思考你想在測試情境中使用哪些受控回應。

---

傳回預先定義回應的物件。

---

會進行多次 API 呼叫的物件。

### --feedback--

思考你想在測試情境中使用哪些受控回應。

---

在 React 應用程式中對 UI 進行多次更新的物件。

### --feedback--

思考你想在測試情境中使用哪些受控回應。

## --video-solution--

2

## --text--

以下哪一項是假物件的常見使用情境？

## --answers--

為 POST 請求偽造 API 呼叫。

### --feedback--

請參考本課程結尾處討論的內容。

---

為應用程式偽造樣式。

### --feedback--

請參考本課程結尾處討論的內容。

---

偽造一個 HTML 檔案。

### --feedback--

請參考本課程結尾處討論的內容。

---

偽造資料庫。

## --video-solution--

4
