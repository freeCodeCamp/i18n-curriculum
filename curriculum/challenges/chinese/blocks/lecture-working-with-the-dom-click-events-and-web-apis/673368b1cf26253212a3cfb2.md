---
id: 673368b1cf26253212a3cfb2
title: 什么是 `querySelectorAll()` 方法，什么时候应该使用它？
challengeType: 19
dashedName: what-is-the-queryselectorall-method-and-when-should-you-use-it
---

# --description--

让我们了解 `querySelectorAll()` 方法。你可以使用此方法获取匹配特定 CSS 选择器的所有 DOM 元素的列表。

这就是你如何调用 `querySelectorAll()` 方法：

```js
document.querySelectorAll(selectors);
```

在 `document` 对象上调用它，并传入包含 CSS 选择器的字串作为参数。该参数必须是有效的 CSS 选择器字串。否则，将抛出 `SyntaxError` 异常。

`querySelectorAll()` 返回一个 `NodeList` 对象，该对象是匹配指定 CSS 选择器的节点集合。

该列表将包含每个匹配 CSS 选择器的 `Element` 对象。如果未找到匹配项，列表将为空。

这些元素将按照它们在 HTML 文档 中出现的顺序排列。例如，你可以匹配特定类型的所有元素：

```js
document.querySelectorAll("div");
```

所有具有特定类的元素：

```js
document.querySelectorAll(".rounded");
```

所有具有特定 ID 的元素：

```js
document.querySelectorAll("#logo");
```

或者所有具有特定属性的元素，例如所有将用户带到特定 URL 的链接：

```js
document.querySelectorAll("a[href='https://www.freecodecamp.org/']");
```

你也可以使用更复杂的 CSS 选择器，比如这个，它匹配具有类 `ingredients` 的无序列表元素中的所有列表项：

```js
document.querySelectorAll("ul.ingredients li");
```

由于该方法将返回一个节点集合，你可以将此集合赋值给一个变量，并在你的程序中使用它来操作各个元素，就像你在这个带有通用语法的示例中看到的那样：

```js
const matches = document.querySelectorAll(selectors); 
```

例如，如果你有这个包含三个列表项的无序列表：

```html
<ul class="ingredients">
  <li>Flour</li>
  <li>Cheese</li>
  <li>Water</li>
</ul>
```

你可以调用 `querySelectorAll()` 方法来匹配带有类 `ingredients` 的无序列表中的所有列表项，并将返回值赋值给常量 `matches`：

```js
const matches = document.querySelectorAll("ul.ingredients li");
```

这将返回一个包含三个节点的集合。每个节点表现为一个列表项元素：

```js
// NodeList(3)
{
  0: `<li>Flour</li>`,
  1: `<li>Cheese</li>`,
  2: `<li>Water</li>`,
  length: 3,
}
```

你可以像操作任何其他 JavaScript 数组一样操作这个集合。

例如，你可以用 `console.log()` 在控制台显示它：

```js
console.log(matches);
```

你也可以使用 `length` 属性查看集合的长度：

```js
console.log(matches.length);
```

输出将是一个表现集合中节点数量的整数：

```md
3
```

你也可以通过对应的索引访问集合的各个元素。第一个元素的索引是 `0`：

```js
console.log(matches[0]);
console.log(matches[1]);
console.log(matches[2]);
```

这是输出： 

```html
<li>Flour</li>
<li>Cheese</li>
<li>Water</li>
```

这些元素会在控制台上逐个打印。

你也可以使用 `for` 循环迭代元素：

```js
for (let i = 0; i < matches.length; i++) {
  console.log(matches[i]);    
}
```

在这种分支中，输出将完全相同。但这对于处理集合中的所有元素非常强大。

JavaScript 中的 `querySelectorAll()` 方法是一个强大的工具，用于根据 CSS 选择器选择多个元素。通过此方法，你可以选择网页中的特定元素并根据需要操作它们。

# --questions--

## --text--

JavaScript 中 `querySelectorAll()` 方法的主要用途是什么？

## --answers--

在 DOM 中创建新建元素。

### --feedback--

考虑如何使用 `querySelectorAll()` 来定位元素。

---

修改现有元素的内容。

### --feedback--

考虑如何使用 `querySelectorAll()` 来定位元素。

---

根据 CSS 选择器选择多个元素。

---

从 DOM 中移除元素。

### --feedback--

考虑如何使用 `querySelectorAll()` 来定位元素。

## --video-solution--

3

## --text--

`querySelectorAll()` 方法返回的对象是什么类型？

## --answers--

`String`

### --feedback--

考虑用于表现一组元素的数据结构。

---

`Number`

### --feedback--

考虑用于表现一组元素的数据结构。

---

`NodeList`

---

`Array`

### --feedback--

考虑用于表现一组元素的数据结构。

## --video-solution--

3

## --text--

当使用带有字串选择器的 `querySelectorAll()` 时，如果选择器没有匹配任何元素，会发生什么？

## --answers--

抛出一个误差。

### --feedback--

考虑 `querySelectorAll()` 查询的可能结果。

---

返回一个 `null` 值。

### --feedback--

考虑 `querySelectorAll()` 查询的可能结果。

---

返回一个空的 `NodeList`。

---

返回第一个匹配的元素。

### --feedback--

考虑 `querySelectorAll()` 查询的可能结果。

## --video-solution--

3
