---
id: 683766860f71d4a96e429f3a
title: JavaScript 與無障礙性審查
challengeType: 31
dashedName: review-js-a11y
---

# --interactive--

## 常見的 ARIA 無障礙屬性

- **`aria-expanded` 屬性**：用於向螢幕閱讀器使用者傳達切換（或揭露）特性的狀態。

:::interactive_editor

```html
<button id="menuBtn" aria-expanded="false">Menu</button>

<script>
  const btn = document.getElementById("menuBtn");

  btn.addEventListener("click", () => {
    const expanded = btn.getAttribute("aria-expanded") === "true";
    btn.setAttribute("aria-expanded", String(!expanded));
  });
</script>

:::

- **`aria-haspopup` attribute**: This state is used to indicate that an interactive element will trigger a pop-up element when activated. You can only use the `aria-haspopup` attribute when the pop-up has one of the following roles: `menu`, `listbox`, `tree`, `grid`, or `dialog`. The value of `aria-haspopup` must be either one of these roles or `true`, which is the same as `menu`.

:::interactive_editor
```html
<button
  id="menubutton"
  aria-haspopup="menu"
  aria-controls="filemenu"
  aria-expanded="false"
>
  File
</button>

<ul
  id="filemenu"
  role="menu"
  aria-labelledby="menubutton"
  hidden
>
  <li role="menuitem" tabindex="-1">Open</li>
  <li role="menuitem" tabindex="-1">New</li>
  <li role="menuitem" tabindex="-1">Save</li>
  <li role="menuitem" tabindex="-1">Delete</li>
</ul>

<script>
  const button = document.getElementById("menubutton");
  const menu = document.getElementById("filemenu");

  button.addEventListener("click", () => {
    const expanded = button.getAttribute("aria-expanded") === "true";

    button.setAttribute("aria-expanded", String(!expanded));
    menu.hidden = expanded;
  });
</script>
```

:::

- **`aria-checked` 屬性**：此屬性用於顯示元素是否處於已勾選狀態。它最常用於建立訂製的核取方塊、圓鈕、切換開關和列表框時。

:::interactive_editor

```html
<div
  id="checkbox"
  role="checkbox"
  aria-checked="true"
  tabindex="0"
  style="
    display: inline-flex;
    align-items: center;
    gap: 6px;
    cursor: pointer;
  "
>
  <span
    id="box"
    aria-hidden="true"
    style="
      width: 16px;
      height: 16px;
      border: 2px solid blue;
      background: blue;
      display: inline-block;
    "
  ></span>
  Checkbox
</div>

<script>
  const checkbox = document.getElementById("checkbox");
  const box = document.getElementById("box");

  const toggle = () => {
    const checked = checkbox.getAttribute("aria-checked") === "true";
    checkbox.setAttribute("aria-checked", String(!checked));
    box.style.background = checked ? "white" : "black";
  };

  checkbox.addEventListener("click", toggle);

  checkbox.addEventListener("keydown", (e) => {
    if (e.key === " " || e.key === "Enter") {
      e.preventDefault();
      toggle();
    }
  });
</script>
```

:::

- **`aria-disabled` 屬性**：此狀態用於僅向使用輔助技術（例如螢幕閱讀器）的人員顯示該元素已被停用。

:::interactive_editor

```html
<div
  id="editBtn"
  role="button"
  tabindex="-1"
  aria-disabled="true"
  style="opacity: 0.5; cursor: not-allowed;"
>
  Edit
</div>

<button id="toggle">Toggle Disabled</button>

<script>
  const editBtn = document.getElementById("editBtn");
  const toggleBtn = document.getElementById("toggle");

  toggleBtn.addEventListener("click", () => {
    const disabled = editBtn.getAttribute("aria-disabled") === "true";

    editBtn.setAttribute("aria-disabled", String(!disabled));
    editBtn.tabIndex = disabled ? 0 : -1;
    editBtn.style.opacity = disabled ? "1" : "0.5";
    editBtn.style.cursor = disabled ? "pointer" : "not-allowed";
  });
</script>
```

:::

- **`aria-selected` 屬性**：此狀態用於顯示元素已被選取。你可以在訂製控制元件，如分頁介面、列表框或格線中使用此狀態。

:::interactive_editor

```html
<div role="tablist">
  <button role="tab" aria-selected="true">Tab 1</button>
  <button role="tab" aria-selected="false">Tab 2</button>
  <button role="tab" aria-selected="false">Tab 3</button>
</div>

<script>
  const tabs = document.querySelectorAll('[role="tab"]');

  tabs.forEach((tab) => {
    tab.addEventListener("click", () => {
      tabs.forEach(t => t.setAttribute("aria-selected", "false"));
      tab.setAttribute("aria-selected", "true");
    });
  });
</script>
```

:::

- **`aria-controls` 屬性**：用來將一個元素與它所控制的另一個元素關聯起來。這有助於使用輔助技術的人理解這些元素之間的關係。

:::interactive_editor

```html
<div role="tablist">
  <button 
    role="tab"
    id="tab1"
    aria-controls="section1"
    aria-selected="true"
  >
    Tab 1
  </button>
  <button
    role="tab"
    id="tab2"
    aria-controls="section2"
    aria-selected="false"
  >
    Tab 2
  </button>
  <button
    role="tab"
    id="tab3"
    aria-controls="section3"
    aria-selected="false"
  >
    Tab 3
  </button>
</div>
```

:::

- **`hidden` 屬性**：將非作用中的面板隱藏，對視覺及輔助技術使用者皆然。

## 使用 Live Regions 和動態內容

- **`aria-live` 屬性**：使網頁的一部分成為即時區域，表示該區域內的任何更新都會由螢幕閱讀器宣告，讓使用者不會錯過重要變更。
- **`polite` 值**：大多數即時區域使用此值。此值表示更新並非緊急，因此螢幕閱讀器可以等到完成任何當前的公告或使用者完成當前操作後，再宣布該更新。

這是一個由 JavaScript 動態更新的即時區域範例：

:::interactive_editor

```html
<div aria-live="polite" id="status"></div>

<button id="updateStatus">Update Status</button>

<script>
  const statusEl = document.getElementById("status");
  const btn = document.getElementById("updateStatus");

  btn.addEventListener("click", () => {
    statusEl.textContent = "Your file has been successfully uploaded.";
  });
</script>
```

:::

- **`contenteditable` 屬性**：將元素變成即時編輯器，允許使用者像編輯文字欄位一樣更新其內容。當 contenteditable 區域沒有可見的標籤或標題時，請使用 `aria-label` 屬性為其添加可存取名稱，以協助螢幕閱讀器使用者了解可編輯區域的用途。

:::interactive_editor

```html
<div
  contenteditable="true"
  aria-label="Note editor"
  id="editor"
  style="border: 1px solid #ccc; padding: 8px;"
>
  Editable content goes here
</div>

<p id="status" aria-live="polite"></p>

<script>
  const editor = document.getElementById("editor");
  const status = document.getElementById("status");

  editor.addEventListener("input", () => {
    status.textContent = "Content updated";
  });
</script>
```

:::

## `focus` 和 `blur` 事件

- **`blur` 事件**：當元素失去焦點時觸發。

:::interactive_editor

```html
<input
  id="nameInput"
  type="text"
  placeholder="Type here and click outside"
  aria-label="Name input"
/>

<p id="status" aria-live="polite"></p>

<script>
  const input = document.getElementById("nameInput");
  const status = document.getElementById("status");

  input.addEventListener("blur", () => {
    status.textContent = "Input lost focus";
  });
</script>
```

:::

- **`focus` 事件**：當元素獲得焦點時觸發。

:::interactive_editor

```html
<input
  id="emailInput"
  type="email"
  placeholder="Click or tab into this field"
  aria-label="Email input"
/>

<p id="status" aria-live="polite"></p>

<script>
  const input = document.getElementById("emailInput");
  const status = document.getElementById("status");

  input.addEventListener("focus", () => {
    status.textContent = "Input received focus";
  });
</script>
```

:::

# --assignment--

檢視 JavaScript 和 Accessibility 主題與概念。

