---
id: 6839e4d62ae09d1661e4cf9b
title: 什麼是列表推導式以及有哪些有用的函式可以用來操作列表？
challengeType: 19
dashedName: what-are-list-comprehensions-and-what-are-some-useful-functions-to-work-with-lists
---

# --description--

在過去的幾堂課中，你已經開始習慣這樣使用迴圈：

```py
even_numbers = []

for num in range(21):
    if num % 2 == 0:
        even_numbers.append(num)

print(even_numbers)
```

此範例創建一個名為 `even_numbers` 的新空列表，並對介於 `0` 和 `20` 之間的數字序列進行迴圈。在迴圈內，有一個條件判斷目前的數字除以 `2` 後是否餘數為 `0`。這用來判斷該數字是否為偶數。如果條件為 `True`，則將目前的 `num` 附加到 `even_numbers` 列表的末尾。最後，我們將 `even_numbers` 列表列印到主控台。

雖然這段程式碼可行，但有一種更簡潔的寫法是使用列表推導式。列表推導式允許你在一行中直接在方括號內結合迴圈和條件來創建新的列表。這使程式碼更短且通常更易讀。

這是先前使用方括號重構的範例：

```py
even_numbers = [num for num in range(21) if num % 2 == 0]
print(even_numbers)
```

在這個重構的範例中，`even_numbers` 列表是使用一行程式碼創建的。列表推導式迴圈遍歷從 `0` 到 `20` 的數字，並且只包含能被 `2` 整除的數字。這種方法更為簡潔，並且省略了額外的迴圈和條件區塊。

讓我們來看另一個範例，以便你能更好地理解 `list` 推導式的運作方式：

```py
numbers = [1, 2, 3, 4, 5]
result = [(num, 'Even') if num % 2 == 0 else (num, 'Odd') for num in numbers]
print(result)
```

在這個範例中，我們有一個數字列表，並且想要創建一個新的元組列表，表示哪些數字是偶數或奇數。在列表推導式的第一部分，我們使用 `if` 述語來檢查該數字是否能被 `2` 整除。如果是，結果就是該數字後面接著字 `Even` 的元組。否則，結果就是該數字後面接著字 `Odd` 的元組。

以下是在主控台中列印結果的樣子：

```py
[(1, 'Odd'), (2, 'Even'), (3, 'Odd'), (4, 'Even'), (5, 'Odd')]
```

另一種從現有可迭代物件創建列表的方法是使用 `filter()` 函式。以下是一個只創建長度超過四個字元的字的新列表的範例：

```py
words = ['tree', 'sky', 'mountain', 'river', 'cloud', 'sun']

def is_long_word(word):
    return len(word) > 4

long_words = list(filter(is_long_word, words))
print(long_words) # ['mountain', 'river', 'cloud']
```

`filter()` 函式用於從可迭代物件中選取符合特定條件的元素。`filter()` 函式接受一個函式和一個可迭代物件作為其引數。在此範例中，我們將 `is_long_word` 函式傳入 `filter()` 函式，以檢查目前的字數是否大於 `4`。所有字元數大於 `4` 的字都會被加入新的列表，並指定給 `long_words` 變數。

除了 `filter()` 函式之外，還有一些在處理列表時很有用的函式。另一個需要注意的函式是 `map()`，它會接受一個可迭代物件並對其每個元素套用一個函式。以下是使用 `map()` 函式將攝氏溫度列表轉換為華氏溫度的範例：

```py
celsius = [0, 10, 20, 30, 40]

def to_fahrenheit(temp):
    return (temp * 9/5) + 32

fahrenheit = list(map(to_fahrenheit, celsius))
print(fahrenheit) # [32.0, 50.0, 68.0, 86.0, 104.0]
```

就像 `filter()` 函式一樣，`map()` 接受一個函式和一個可迭代物件作為它的引數。`to_fahrenheit` 函式接收一個溫度並將其從攝氏轉換為華氏。

我們將要看的最後一個函式是 `sum()` 函式。這個函式用來從可迭代物件（例如列表或元組）取得總和。以下是使用 `sum()` 函式的範例：

```py
numbers = [5, 10, 15, 20]
total = sum(numbers)
print(total) # Result: 50
```

你也可以傳入選用的 `start` 引數，該引數設定加總的初始值。以下是使用 `start` 引數作為位置引數的更新範例：

```py
numbers = [5, 10, 15, 20]
total = sum(numbers, 10) # positional argument
print(total) # 60
```

你也可以選擇將 `start` 引數作為關鍵字引數這樣使用：

```py
numbers = [5, 10, 15, 20]
total = sum(numbers, start=10) # keyword argument
print(total) # 60
```

兩個版本都會產生相同的結果，但關鍵字引數會比較明確。

列表推導式以及其他函式（程式）像是 `map()`、`filter()` 和 `sum()` 一開始可能會讓人感到有點困惑。但只要有足夠的練習和時間，你會開始感覺在你的 Python 程式中使用它們更加得心應手。

# --questions--

## --text--

以下哪一項是使用列表推導式的正確方式？

## --answers--

```py
[while for loop num in range(21)]
```

### --feedback--

檢查課程開始部分以取得答案。

---

```py
[num for num in range(21) if num % 2 == 0]
```

---

```py
[num for num]
```

### --feedback--

檢查課程開始部分以取得答案。

---

```py
[for num in range(21) if num % 2 == 0]
```

### --feedback--

檢查課程開始部分以取得答案。

## --video-solution--

2

## --text--

以下哪一個函式（程式）接受一個可迭代物件並將一個函式（程式）應用到其每個元素？

## --answers--

`memoryview`

### --feedback--

想像一個「將」轉換逐一映射到列表中每個項目的函式（程式）。

---

`map`

---

`max`

### --feedback--

想像一個「將」轉換逐一映射到列表中每個項目的函式（程式）。

---

`min`

### --feedback--

想像一個「將」轉換逐一映射到列表中每個項目的函式（程式）。

## --video-solution--

2

## --text--

會列印到主控台的是什麼？

```py
numbers = [5, 10, 15, 20]
total = sum(numbers, start=10)
print(total) # ?
```

## --answers--

`60`

---

`50`

### --feedback--

請查看課程結尾的答案。

---

`40`

### --feedback--

請查看課程結尾的答案。

---

`70`

### --feedback--

請查看課程結尾的答案。

## --video-solution--

1
