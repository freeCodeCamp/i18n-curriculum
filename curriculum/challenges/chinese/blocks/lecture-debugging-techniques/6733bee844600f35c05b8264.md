---
id: 6733bee844600f35c05b8264
title: try...catch...finally 是如何工作的？
challengeType: 19
dashedName: how-does-try-catch-finally-work
---

# --interactive--

在上一课中，你学习了如何在你的程序中抛出异常。在本课中，我们将了解如何在 `try…catch…finally` 块中优雅地处理这些误差。

`try` 块用于包裹可能抛出误差的代码。它作为一个安全空间来尝试可能失败的操作。

`catch` 块捕捉并处理在 `try` 块中发生的误差。你可以在 `catch` 内使用 `Error` 对象来检查出了什么问题。

`finally` 块在 `try` 和 `catch` 块之后运行，无论是否发生了误差。它通常用于清理任务，例如关闭文件或释放资源。

下面是使用 `try…catch` 块的示例：

:::interactive_editor

```js
function processInput(input) {
  if (typeof input !== "string") {
    throw new TypeError("Input must be a string.");
  }

  return input.toUpperCase();
}

try {
  console.log("Starting to process input...");
  const result = processInput(9);
  console.log("Processed result:", result);
} catch (error) {
  console.error("Error occurred:", error.message);
} 
```

:::

在此示例中，我们有一个名为 `processInput` 的函数，它首先查看 `input` 是否不是 `string` 类型。如果是这种情况，则抛出一个误差。否则，我们返回对 `input` 使用 `toUpperCase` 方法的结果。

我们在一个 `try` 块内调用函数。由于函数调用抛出误差，它将被 `catch` 块捕获，并且错误信息会显示在控制台中。 

传递到 `catch` 块中的误差是一个 `Error` 对象，包含有关该误差的信息。在此情况下，我们使用 `message` 属性，它向用户显示可读的简介信息。 

我们使用 `console.error` 是因为它专门设计用于记录误差。在许多现代浏览器中，`console.error()` 的输出会以红色显示在控制台中。

无论是否抛出异常，都会执行 `finally` 语句。

```js
try {
  // Code that might throw an error
} catch (error) {
  // Code to handle the error
} finally {
  // Code that runs regardless of whether an error occurred or not
}
```

`finally` 语句的一个良好使用场景是当你处理文件时。在 JavaScript 中，你可以打开一个文件，使用 `try` 块向文件写入数据。如果有任何误差，你可以使用 `catch` 来捕获这些误差。然后使用 `finally` 语句来关闭文件。

# --questions--

## --text--

`try` 块最准确的描述是什么？

## --answers--

它用于在发生误差后自动再次运行代码。

### --feedback--

考虑 `try…catch…finally` 语句中块的顺序，以及每个块处理的任务类型。

---

它用于处理误差。

### --feedback--

考虑 `try…catch…finally` 语句中块的顺序，以及每个块处理的任务类型。

---

这是在抛出误差之前的设置。

### --feedback--

考虑 `try…catch…finally` 语句中块的顺序，以及每个块处理的任务类型。

---

这是一个用于可能抛出误差的代码的安全包装器。

## --video-solution--

4

## --text--

哪个块即使发生误差也总是执行？

## --answers--

`try`

### --feedback--

此块通常用于清理任务。

---

`catch`

### --feedback--

此块通常用于清理任务。

---

`finally`

---

`throw`

### --feedback--

此块通常用于清理任务。

## --video-solution--

3

## --text--

`catch` 块的目的是什么？

## --answers--

执行可能会抛出误差的代码。

### --feedback--

当 `try` 块中出现错误时，此块会激活。

---

为代码执行定义一个安全空间。

### --feedback--

当 `try` 块中出现错误时，此块会激活。

---

优雅地处理误差而不使程序崩溃。

---

无论是否有误差，都始终执行。

### --feedback--

当 `try` 块中出现错误时，此块会激活。

## --video-solution--

3
