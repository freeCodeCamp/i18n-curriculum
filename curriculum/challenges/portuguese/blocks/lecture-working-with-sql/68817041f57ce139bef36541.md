---
id: 68817041f57ce139bef36541
title: O que é SQL Injection e quais são algumas formas de preveni-lo?
challengeType: 19
dashedName: what-is-sql-injection-and-what-are-some-ways-to-prevent-it
---

# --description--

SQL injection é uma vulnerabilidade de segurança web na qual atacantes alteram ou aproveitam as consultas que a aplicação web faz ao banco de dados. Por exemplo, atacantes podem inserir código SQL malicioso na query para executar o código malicioso no backend.

Isso pode acontecer quando você dá aos usuários a opção de inserir dados por meio de formulários de login, barras de pesquisa ou parâmetros de URL e então usa essa entrada do usuário em interpolação ou concatenação de strings para gerar o comando SQL final.

Dependendo do objetivo do atacante, o código SQL malicioso pode causar interrupções significativas no seu banco de dados e aplicação web, como burlar a autenticação, roubar dados do banco de dados ou modificar e remover registros do banco de dados. Portanto, você deve levar essa ameaça muito a sério.

Por exemplo, digamos que sua aplicação web use uma consulta SQL como esta para autenticar usuários, incorporando diretamente o nome de usuário e a senha inseridos pelo usuário:

```sql
'SELECT * FROM users WHERE username = ' + username_input + ' AND password = ' + password_input + ';'
```

Se um atacante inserir algo assim no campo `username`:

```sql
'" " OR "1"="1" --'
```

E qualquer outra coisa no campo `password`, já que `"1"="1"` é sempre `true` e `--` comenta o restante da consulta, a cláusula `WHERE` se torna:

```sql
WHERE username = " " OR TRUE
```

Que é sempre `true`.

Dependendo da implementação do banco de dados, isso pode retornar os dados do primeiro usuário ou de qualquer usuário no banco de dados e permitir que o invasor faça login sem credenciais válidas.

Então, como você pode evitar isso? Existem duas maneiras principais de prevenir a injeção de SQL:

- Não escreva consultas dinâmicas com concatenação de strings.
- E evite que entradas SQL maliciosas sejam incluídas em consultas que serão executadas no backend.

Na prática, você pode usar declarações parametrizadas, também conhecidas como consultas parametrizadas. Eles separam a estrutura SQL dos dados inseridos pelo usuário, o que impede que o banco de dados interprete os dados de entrada como código executável.

Outra técnica importante é a validação de entrada. Isto é recomendado como uma medida de segurança secundária em todos os casos, mas é especialmente importante para partes de consultas SQL relacionadas a nomes de tabelas, nomes de colunas e ordem de classificação. Se possível, é recomendado atribuir nomes de tabelas e nomes de colunas diretamente dentro do seu código, não a partir da entrada do usuário.

Se, apesar de todas as medidas preventivas, você sofrer um ataque de SQL injection, pode minimizar seu impacto no banco de dados limitando as permissões de cada conta do banco de dados. Conceda a cada usuário do banco de dados apenas as permissões necessárias para suas tarefas, mas nada mais. Se uma conta precisa apenas ler dados do banco de dados, conceda a ela acesso somente de leitura. E como medida preventiva, nunca atribua permissões de administrador às suas contas de aplicação. É muito perigoso fazer isso porque um atacante poderia obter acesso completo e controle total sobre o banco de dados.

SQL injection é um ataque muito comum que você, como desenvolvedor, deve estar ciente e prevenir na implementação da sua aplicação web. Com essas técnicas, você pode proteger seu banco de dados e manter os dados do seu usuário seguros.

# --questions--

## --text--

Qual é o objetivo principal de um ataque de injeção SQL?

## --answers--

Para melhorar o desempenho do banco de dados.

### --feedback--

Pense no que uma "injeção" pode implicar em um contexto técnico e a que parte do sistema o nome "SQL injection" se refere.

---

Para interferir nas consultas ao banco de dados executadas por uma aplicação.

---

Para criptografar dados sensíveis do usuário.

### --feedback--

Pense no que uma "injeção" pode implicar em um contexto técnico e a que parte do sistema o nome "SQL injection" se refere.

---

Para melhorar a aparência visual de um site.

### --feedback--

Pense no que uma "injeção" pode implicar em um contexto técnico e a que parte do sistema o nome "SQL injection" se refere.

## --video-solution--

2

## --text--

Qual dos seguintes é um dos métodos mais eficazes para prevenir vulnerabilidades de SQL injection?

## --answers--

Alterar regularmente as senhas do banco de dados.

### --feedback--

Pense em como você pode separar a estrutura das suas consultas SQL da entrada fornecida pelos usuários.

---

Limitando o tamanho dos campos de entrada do usuário.

### --feedback--

Pense em como você pode separar a estrutura das suas consultas SQL da entrada fornecida pelos usuários.

---

Usando declarações ou consultas parametrizadas.

---

Exibindo mensagens detalhadas de erro de banco de dados para desenvolvedores.

### --feedback--

Pense em como você pode separar a estrutura das suas consultas SQL da entrada fornecida pelos usuários.

## --video-solution--

3

## --text--

Se o formulário de login de um site for vulnerável a SQL injection, o que um atacante poderia potencialmente conseguir?

## --answers--

Faça backup automático de todo o banco de dados.

### --feedback--

Pense no propósito de um formulário de login e como manipular a consulta do banco de dados pode afetar sua função pretendida.

---

Ignorar o processo de login sem credenciais válidas.

---

Melhore o ranking do mecanismo de busca do site.

### --feedback--

Pense no propósito de um formulário de login e como manipular a consulta do banco de dados pode afetar sua função pretendida.

---

Altere o design e o layout do website.

### --feedback--

Pense no propósito de um formulário de login e como manipular a consulta do banco de dados pode afetar sua função pretendida.

## --video-solution--

2
