---
id: 67d2f5f19a0f0b75343f1905
title: ¿Qué son los componentes de servidor de React y cómo funcionan?
challengeType: 19
dashedName: what-are-react-server-components-and-how-do-they-work
---

# --description--

Los Componentes de Servidor de React (RSCs) son una nueva tendencia que ha cambiado la forma en que los desarrolladores de React abordan las cosas. Con los RSC, más trabajo se desplaza al servidor, lo cual tiene muchos beneficios.

Echemos un vistazo a qué son los componentes de servidor, cómo funcionan y qué condujo a la introducción de componentes de servidor.

Los Componentes de Servidor de React son componentes de React que se renderizan exclusivamente en el servidor, el cual solo envía el HTML final al cliente. Esto significa que esos componentes pueden acceder directamente a los recursos del lado del servidor y reducir drásticamente la cantidad de JavaScript enviado al navegador.

Las aplicaciones de React han utilizado tradicionalmente un sistema de "componente cliente" que maneja todo en una aplicación típica de React, como el renderizado, la interactividad y los efectos secundarios. Pero el sistema de componentes cliente viene con algunas desventajas, como grandes paquetes de JavaScript y tiempos de carga inicial más lentos.

Los marcos de trabajo de React como Next.js y Gatsby encontraron soluciones para descargar algunos procesos al servidor para solucionar esos problemas, pero ninguno fue estandarizado.

Si has usado cualquiera de los dos marcos, probablemente has escuchado sobre `getServerSideProps` y `getServerData`. Luego llegaron los Componentes de Servidor de React, que te permiten ejecutar algunos componentes enteramente en el servidor para poder realizar acciones como la obtención de datos y cálculos antes de que cualquier código se ejecute en el navegador del usuario.

Los componentes de servidor fueron popularizados por primera vez y están fácilmente disponibles en Next.js.

Otros marcos como Remix y Gatsby se están poniendo al día, y hay un complemento experimental para Vite llamado `vite-plugin-react-server` que te permite construir componentes de servidor. Entonces, ¿cómo funcionan los componentes de servidor?

Una de las mejores maneras de demostrar los Componentes de Servidor de React es con la obtención de datos.

En los componentes cliente tradicionales de React, dejas que el navegador maneje las solicitudes de API.

Dado que la obtención de datos es un efecto secundario, haces esa llamada a la API en un hook `useEffect`. También es una buena práctica establecer variables de estado como loading, data y error para poder indicar que los datos se están cargando, mostrar los datos cuando estén listos o mostrar un error en tu aplicación.

Con los Componentes de Servidor de React, puedes mover todo el componente al servidor y obtener datos allí sin tener que usar `useState` o `useEffect`:

Como los Componentes de Servidor de React solo se ejecutan en el servidor, puedes simplemente obtener datos de una API y renderizar solo una vez.

```jsx
const Users = async () => {
  const res = await fetch("https://jsonplaceholder.typicode.com/users");
  const users = await res.json();

  return (
    <>
      <h1 className="text-4xl text-center mt-6">Users</h1>
      <ul className="text-center mt-3">
        {users.map((user) => (
          <li key={user.id}>{user.name}</li>
        ))}
      </ul>
    </>
  );
};

export default Users;
```

Además, como la obtención de datos ocurre en el servidor, más cerca de la fuente, tu aplicación puede funcionar mejor, especialmente para personas con conexiones de red lentas. Una advertencia importante es que todo el código de los componentes de servidor permanece en el servidor y no se envía al navegador.

One major gotcha is that all the code for server components remains on the server, and doesn't get shipped to the browser. Entonces, ¿cómo puedes añadir interactividad? En el enrutador de aplicación Next.js, todos los componentes son componentes de servidor por defecto.

Si quieres agregar interactividad, necesitas marcar el componente como un componente cliente con la directiva `"use client"`. Digamos que quieres convertir el ejemplo anterior en un componente cliente.

Aquí tienes cómo puedes hacerlo: Si deseas añadir interactividad como eventos de clic, también se debe marcar el componente como un componente cliente:

```jsx
"use client";

import { useState, useEffect } from "react";

const Users2 = () => {
  const [status, setStatus] = useState({
    users: [],
    loading: true,
    error: null,
  });

  async function fetchUsers() {
    try {
      const res = await fetch("https://jsonplaceholder.typicode.com/users");
      const data = await res.json();
      setStatus((prevStatus) => ({
        ...prevStatus,
        users: data,
        loading: false,
      }));
    } catch (err) {
      setStatus((prevStatus) => ({
        ...prevStatus,
        error: err.message,
        loading: false,
      }));
    }
  }

  useEffect(() => {
    fetchUsers();
  }, []);

  if (status.loading) {
    return <p>Loading Users...</p>;
  }
  if (status.error) {
    return <p>Error getting users: {status.error}</p>;
  }

  return (
    <>
      <h1 className="text-4xl text-center mt-6">Users</h1>
      <ul className="text-center mt-3">
        {status.users.map((user) => (
          <li key={user.id}>{user.name}</li>
        ))}
      </ul>
    </>
  );
};

export default Users2;
```

Si no agregas la directiva de uso de cliente al componente, obtienes un error con un mensaje que indica: "Estás importando un componente de servidor que necesita `useState`.

```jsx
"use client";

import { useState } from "react";

const Counter = () => {
  const [count, setCount] = useState(0);

  return (
    <>
      <h1>Counter</h1>
      <button onClick={() => setCount(count + 1)}>Increment</button>
      <h2>{count}</h2>
      <button onClick={() => setCount(count - 1)}>Decrement</button>
    </>
  );
};

export default Counter;
```

Este hook de React solo funciona en un componente cliente. Para solucionarlo, marca el archivo (o su padre) con la directiva `"use client"`. Los principales beneficios que vienen con los Componentes de Servidor de React son que la obtención de datos se vuelve más sencilla, el código es más fácil de leer y se reduce la complejidad del cliente.

Las principales ventajas que vienen con los Componentes de Servidor de React son que la obtención de datos se vuelve más sencilla, el código es más fácil de leer y la complejidad del cliente se reduce.

# --questions--

## --text--

¿Dónde se ejecutan los Componentes de Servidor de React?

## --answers--

Únicamente en el navegador.

### --feedback--

Piensa en cómo los RSC no se ejecutan en el navegador y se utilizan para pre-renderizar datos.

---

En ambos, el cliente y el servidor.

### --feedback--

Piensa en cómo los RSC no se ejecutan en el navegador y se utilizan para pre-renderizar datos.

---

Completamente en el servidor.

---

En un Trabajador Web.

### --feedback--

Piensa en cómo los RSC no se ejecutan en el navegador y se utilizan para pre-renderizar datos.

## --video-solution--

3

## --text--

¿Por qué los Componentes de Servidor de React no tienen acceso a hooks de React y a APIs de la Web?

## --answers--

Se renderizan antes de que el navegador se cargue.

### --feedback--

Estos componentes nunca se ejecutan en el navegador, así que no pueden usar características del lado del cliente.

---

Se ejecutan solo en el servidor y no se envían al navegador.

---

Están restringidos por el ciclo de renderizado de React.

### --feedback--

Estos componentes nunca se ejecutan en el navegador, así que no pueden usar características del lado del cliente.

---

Se utilizan solo con fines de estilo.

### --feedback--

Estos componentes nunca se ejecutan en el navegador, así que no pueden usar características del lado del cliente.

## --video-solution--

2

## --text--

¿Cómo añadirías interactividad a un componente en Next.js cuando estás usando el enrutador de aplicación?

## --answers--

Envuelve el componente en una etiqueta `<ClientProvider>`.

### --feedback--

Next.js asume que todos los componentes son componentes de servidor a menos que se indique explícitamente lo contrario.

---

Usa la función `withClient()` de Next.js.

### --feedback--

Next.js asume que todos los componentes son componentes de servidor a menos que se indique explícitamente lo contrario.

---

Habilita el renderizado del lado del cliente en `next.config.js`.

### --feedback--

Next.js asume que todos los componentes son componentes de servidor a menos que se indique explícitamente lo contrario.

---

Marca el componente como un componente cliente con la directiva "use client".

## --video-solution--

4
