---
id: 673407ca21117a67cf9521ca
title: 什么是 Promise，Promise 链是如何工作的？
challengeType: 19
dashedName: what-are-promises-and-how-does-promise-chaining-work
---

# --description--

`Promise` 是一个对象，表现异步操作的最终完成或失败。它最初处于等待状态。然后，当操作成功时，它可以转变为已完成状态；当操作失败时，它可以转变为已拒绝状态。以下是创建 `Promise` 的示例：

```js
const aPromise = new Promise((resolve, reject) => {
  setTimeout(() => {
    resolve("Operation successful!");
  }, 1000);
});
```

在此示例中，我们创建一个使用 `setTimeout` 模拟异步的操作的 promise。经过 1 秒后，promise 会以消息 `Operation successful!` 解析。

另一种处理 promises 的方法是使用 `.then` 和 `.catch` 方法。

`.then()` 方法用于 promise 中指定当 promise 完成时应发生的操作，而 `.catch()` 用于处理任何发生的误差。让我们看看如何将 `.then` 和 `.catch` 与我们的 promise 一起使用：

```js
aPromise.then((result) => {
  console.log(result);  // Outputs: "Operation successful!"
}).catch((error) => {
  console.error(error);
});
```

在这段代码中，或者在承诺完成时要执行的指令中，传递给 `.then()` 的函数将使用承诺解析后的值被调用。如果发生误差，则会调用传递给 `.catch()` 的函数。

现在，让我们来谈谈 promise 链。promise 的一个强大特色是我们可以将多个异步的操作串联在一起。每个 `.then()` 都可以返回一个新的 promise，使你能够依次执行一系列异步的操作。下面是一个示例： 

```js
fetch('https://api.example.com/data')
  .then(response => response.json())
  .then(data => {
    console.log(data);
    return fetch('https://api.example.com/data2');
  })
  .then(response => response.json())
  .then(data2 => console.log(data2))
  .catch(error => console.error('Error:', error));
```

在这个示例中，我们按序列进行两个 API 调用。第一个 `.then()` 将响应解析为 JSON。第二个 `.then()` 记录数据并进行另一个 API 调用。第三个 `.then()` 解析第二个 API 调用的响应，第四个 `.then()` 记录该数据。如果在此链中的任何点发生误差，它将被最后的 `.catch()` 捕获。

重要的是要注意 `.catch()` 会捕获链中任何前面步骤的误差。这意味着你不需要为每个单独的步骤添加误差处理，这可以大大简化你的代码。

# --questions--

## --text--

Promise 有哪些可能的状态？

## --answers--

激活、未激活或已终止。

### --feedback--

考虑一个 Promise 从创建到完成所经历的阶段。

---

运行、暂停或停止。

### --feedback--

考虑一个 Promise 从创建到完成所经历的阶段。

---

待定、已完成或已拒绝。

---

已开始、处理中或已结束。

### --feedback--

考虑一个 Promise 从创建到完成所经历的阶段。

## --video-solution--

3

## --text--

`.then()` 方法在 Promise 链中的作用是什么？

## --answers--

创建一个新的 Promise。

### --feedback--

考虑 `.then()` 允许你对 Promise 的结果执行的操作。

---

指定当 Promise 被兑现时发生的情况。

---

在 Promise 链中处理误差。

### --feedback--

考虑 `.then()` 允许你对 Promise 的结果执行的操作。

---

取消一个 Promise。

### --feedback--

考虑 `.then()` 允许你对 Promise 的结果执行的操作。

## --video-solution--

2

## --text--

在 Promise 链中，你通常应该将 `.catch()` 方法放在哪里？

## --answers--

在每个 `.then()` 之后。

### --feedback--

考虑 `.catch()` 如何处理链中多个步骤的误差。

---

在第一个 `.then()` 之前。

### --feedback--

考虑 `.catch()` 如何处理链中多个步骤的误差。

---

在链条中间。

### --feedback--

考虑 `.catch()` 如何处理链中多个步骤的误差。

---

在链的末端。

## --video-solution--

4
