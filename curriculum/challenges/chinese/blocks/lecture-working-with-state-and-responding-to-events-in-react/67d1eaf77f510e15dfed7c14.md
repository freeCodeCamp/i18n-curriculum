---
id: 67d1eaf77f510e15dfed7c14
title: 什么是 State，`useState` Hook 是如何工作的？
challengeType: 19
dashedName: what-is-state-and-how-does-the-usestate-hook-work
---

# --description--

状态是 React 和其他前端框架中最重要的基础之一。它就像组件的大脑，意味着它保存随时间变化的信息，并控制组件的行为和外观。

让我们来看看状态是什么，以及 `useState` 钩子如何让你操作状态。

State 表现你 React 组件中的动态数据，比如来自用户输入的值、从 API 获取的数据，或待办列表中的一项。

每当状态改变时，React 会重新渲染组件而不重新装载页面，以反映用户界面中的这些变化。这种响应性使你的应用具有交互性。

`useState` 钩子是一个函数，允许你在函数组件中声明状态变量。 

在 hooks 出现之前，你只能在类组件中使用状态。但自从 React 16.8 引入 hooks 后，你可以通过使用 `useState` hook 在函数组件中使用状态。

要使用 `useState` 钩子，你需要从 React 中导入它：

```js
import { useState } from "react";
```

你也可以导入 React 本身并作为属性访问 `useState` 钩子：

```js
import React from "react";
```

以下是你在导入 `useState` 时如何声明状态变量的方法：

```js
const [stateVariable, setStateFunction] = useState(initialValue);
```

下面是你在导入 React 时如何声明状态变量的方法：

```js
const [stateVariable, setStateFunction] = React.useState(initialValue);
```

在状态变量中你有以下内容：

- `stateVariable` 保存当前状态值
- `setStateFunction`（设置函数）更新状态变量
- `initialValue` 设置初始状态

请注意，React 组件中的状态是私有的，并且隔离于每个组件实例。这意味着，如果你渲染同一个组件两次，一个组件的状态不会影响另一个组件。这也意味着，如果你想在组件之间共享状态，则需要将状态提升到共同的父组件，并通过 props 传递下去。

另一点是，hooks 必须在组件的顶层调用，就在 `return` 关键字之前，以保持状态和效果在各次渲染中的一致性。这意味着你不能在循环、条件或嵌套函数中使用状态。

这是一个在 `Counter` 组件中使用 `useState` 钩子管理状态的示例：

```jsx
// Importing the useState hook
import { useState } from "react";

function Counter() {
  const initialValue = 0;

  // The state variable and setter function
  const [count, setCount] = useState(initialValue);

  return (
    <div>
      {/* Display current state value */}
      <h2>{count}</h2>

      <button onClick={() => setCount(count - 1)}>Decrement</button>
      <button onClick={() => setCount(count + 1)}>Increment</button>
    </div>
  );
}

export default Counter;
```

在上面的代码中，我们从 React 导入了 `useState` 钩子。在 `Counter` 组件中，`count` 表现当前状态，而 `setCount` 是负责更新状态的设置函数。当前状态值是 `0`。`return` 语句包含计数和两个按钮，用于将计数递减和递增 `1`。

你可以通过多次调用 `useState` 钩子来管理多个状态。这在你有不相关的状态变量时尤其重要：

```jsx
function UserProfile() {
  const [isOnline, setIsOnline] = useState(false);
  const [notifications, setNotifications] = useState(0);

  // The rest of the component logic
}
```

当管理多个单独更新的状态（例如表单字段）时，你也可以多次调用 `useState` 钩子：

```jsx
function SignUpForm() {
  const [name, setName] = useState("");
  const [username, setUsername] = useState("");
  const [email, setEmail] = useState("");

  // The rest of the component logic
}
```

但在这种分支中，最好将状态合并，因为它们都属于同一个形式：

```jsx
function SignUpForm() {
  const [formData, setFormData] = useState({
    name: "",
    username: "",
    email: "",
  });

  // The rest of the component logic
}
```

这就是状态的含义以及你如何使用 `useState` 钩子。

# --questions--

## --text--

React 的哪个版本引入了 hooks，使得可以在函数组件中使用状态？

## --answers--

React 15.6

### --feedback--

回顾课程开始时讨论答案的部分。

---

React 16.8

---

React 17.0

### --feedback--

回顾课程开始时讨论答案的部分。

---

React 18.2

### --feedback--

回顾课程开始时讨论答案的部分。

## --video-solution--

2

## --text--

在 React 组件中，state 表现什么？

## --answers--

动态数据，在更改时触发重新渲染。

---

只有不会变化的静态数据。

### --feedback--

考虑使 UI 具有交互性并且无需页面重新加载即可更新的 `data`。

---

该组件的样式信息。

### --feedback--

考虑使 UI 具有交互性并且无需页面重新加载即可更新的 `data`。

---

应用程序开始时设置的固定值。

### --feedback--

考虑使 UI 具有交互性并且无需页面重新加载即可更新的 `data`。

## --video-solution--

1

## --text--

以下哪种方式是使用 `useState` 钩子的正确方法？

## --answers--

```js
const [formData, setFormData] = useState(<
  name: "",
  username: "",
  email: "",
>);
```

### --feedback--

回顾课程结尾处讨论答案的部分。

---

```js
const ref = useState({
  name: "",
  username: "",
  email: "",
});
```

### --feedback--

回顾课程结尾处讨论答案的部分。

---

```js
const <formData, setFormData> = useState({
  name: "",
  username: "",
  email: "",
});
```

### --feedback--

回顾课程结尾处讨论答案的部分。

---

```jsx
const [formData, setFormData] = useState({
  name: "",
  username: "",
  email: "",
});
```

## --video-solution--

4
