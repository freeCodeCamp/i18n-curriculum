---
id: 5900f4da1000cf542c50ffed
title: 'Problema 366: Stone Game III'
challengeType: 1
forumTopicId: 302027
dashedName: problem-366-stone-game-iii
---

# --description--

Dos jugadores, Anton y Bernhard, están jugando el siguiente juego.

Hay un montón de $n$ piedras.

El primer jugador puede quitar cualquier número positivo de piedras, pero no toda la pila.

Después, cada jugador puede quitar como máximo el doble de piedras que su oponente quitó en el movimiento anterior.

El jugador que quita la última piedra gana.

Por ejemplo, $n = 5$

Si el primer jugador toma más de una piedra, el siguiente jugador podrá tomar todas las piedras restantes.

Si el primer jugador toma una piedra, dejando cuatro, su oponente también tomará una piedra, dejando tres piedras.

El primer jugador no puede tomar las tres porque puede tomar como máximo $2 \times 1 = 2$ piedras. Así que digamos que también toma una piedra, dejando 2.

El segundo jugador puede tomar las dos piedras restantes y gana.

Entonces 5 es una posición perdedora para el primer jugador.

Para algunas posiciones ganadoras hay más de un movimiento posible para el primer jugador.

Por ejemplo, cuando $n = 17$ el primer jugador puede quitar una o cuatro piedras.

Sea $M(n)$ el número máximo de piedras que el primer jugador puede tomar desde una posición ganadora en su primer turno y $M(n) = 0$ para cualquier otra posición.

$\sum M(n)$ para $n ≤ 100$ es 728.

Encuentra $\sum M(n)$ para $n ≤ {10}^{18}$. Da tu respuesta módulo ${10}^8$.

# --hints--

`stoneGameThree()` debería devolver `88351299`.

```js
assert.strictEqual(stoneGameThree(), 88351299);
```

# --seed--

## --seed-contents--

```js
function stoneGameThree() {

  return true;
}

stoneGameThree();
```

# --solutions--

```js
// solution required
```
