---
id: 695b93cb572125a6fb19f39e
title: O que é o arquivo package-lock.json?
challengeType: 19
dashedName: what-is-the-package-lock-json-file
---

# --description--

Quando você instala dependências com npm, especialmente em um projeto existente, o npm verifica seu arquivo `package.json` para ver quais pacotes seu projeto precisa.

Cada dependência em `package.json` inclui um número de versão assim:

```bash
"lodash": "^4.17.21"
```

Como você aprendeu anteriormente, o **caret (^)** permite que o npm instale versões menores e de patch mais recentes como `4.18.0` ou `4.17.22`. Essa flexibilidade é útil, mas também pode causar problemas.

Se dois desenvolvedores executarem `npm install` em momentos diferentes, o npm pode instalar versões ligeiramente diferentes do mesmo pacote. Mesmo pequenas diferenças podem causar bugs ou comportamentos inesperados.

O arquivo `package-lock.json` resolve isso. Ele é criado automaticamente na primeira vez que você executa `npm install` e bloqueia as versões exatas de todas as dependências que foram instaladas—including todas as dependências filhas, que são dependências de dependências.

Isso garante que todos que trabalham no projeto obtenham as mesmas versões dos pacotes todas as vezes.

Aqui está um arquivo simples `package.json` com `lodash` como uma dependência:

```bash
{
  "name": "package-lock-json",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "type": "commonjs",
  "dependencies": {
    "lodash": "^4.17.21"
  }
}
```

E aqui está a seção correspondente do `package-lock.json`:

```bash
"node_modules/lodash": {
  "version": "4.17.21",
  "resolved": "https://registry.npmjs.org/lodash/-/lodash-4.17.21.tgz",
  "integrity": "sha512-v2kDEe57..."
}
```

Observe a diferença:

* Em `package.json`, `lodash` está listado como `^4.17.21` — uma regra flexível.
    
* No `package-lock.json`, `lodash` está fixado na versão `4.17.21`.
    

Não importa quando alguém executar `npm install`, eles obterão exatamente essa versão.

Dessa forma, não importa quando alguém executar `npm install`, eles obterão a mesma versão exata do Lodash todas as vezes.

Observe que isso também se aplica a dependências filhas, que são dependências de quaisquer dependências que você use para o seu projeto.

Por exemplo, aqui está parte do arquivo `package-lock.json` para um projeto que usa Express:

```json
{
  "name": "package-lock-json-file",
  "version": "1.0.0",
  "lockfileVersion": 3,
  "requires": true,
  "packages": {
    "": {
      "name": "package-lock-json-file",
      "version": "1.0.0",
      "license": "ISC",
      "dependencies": {
        "express": "^5.2.1"
      }
    },
    ...
    "node_modules/etag": {
      "version": "1.8.1",
      "resolved": "https://registry.npmjs.org/etag/-/etag-1.8.1.tgz",
      "integrity": "sha512-aIL5Fx7mawVa300al2BnEE4iNvo1qETxLrPI/o05L7z6go7fCw1J6EQmbK4FmJ2AS7kgVF/KEZWufBfdClMcPg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/express": {
      "version": "5.2.1",
      "resolved": "https://registry.npmjs.org/express/-/express-5.2.1.tgz",
      "integrity": "sha512-hIS4idWWai69NezIdRt2xFVofaF4j+6INOpJlVOLDO8zXGpUVEVzIYk12UUi2JzjEzWL3IOAxcTubgz9Po0yXw==",
      "license": "MIT",
      "dependencies": {
        "accepts": "^2.0.0",
        "body-parser": "^2.2.1",
        "content-disposition": "^1.0.0",
        "content-type": "^1.0.5",
        "cookie": "^0.7.1",
        "cookie-signature": "^1.2.1",
        "debug": "^4.4.0",
        "depd": "^2.0.0",
        "encodeurl": "^2.0.0",
        "escape-html": "^1.0.3",
        "etag": "^1.8.1",
        "finalhandler": "^2.1.0",
        "fresh": "^2.0.0",
        "http-errors": "^2.0.0",
        "merge-descriptors": "^2.0.0",
        "mime-types": "^3.0.0",
        "on-finished": "^2.4.1",
        "once": "^1.4.0",
        "parseurl": "^1.3.3",
        "proxy-addr": "^2.0.7",
        "qs": "^6.14.0",
        "range-parser": "^1.2.1",
        "router": "^2.2.0",
        "send": "^1.1.0",
        "serve-static": "^2.2.0",
        "statuses": "^2.0.1",
        "type-is": "^2.0.1",
        "vary": "^1.1.2"
      },
      "engines": {
        "node": ">= 18"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/express"
      }
    },
    ...others
  }
}
```

Você pode ver que além do próprio Express, existem outros pacotes como `accepts`, `mime-types` e `negotiator`. Estes são dependências filhas, que são pacotes dos quais o Express depende internamente para funcionar.

Observe também que, embora as `dependencies` em `node_modules/express` usem caracteres caret para intervalos, se você encontrar a entrada para cada dependência filha como `node_modules/etags`, elas estão fixadas em uma versão específica.

Resumindo, o arquivo `package-lock.json` mantém todos alinhados e garante consistência entre as máquinas dos desenvolvedores, servidores de CI, implantações e outros ambientes.

É importante sempre commitar seu arquivo `package-lock.json` com Git para que sua equipe compartilhe a mesma configuração. Além disso, não edite o arquivo `package-lock.json` manualmente—o npm irá atualizá-lo automaticamente sempre que as dependências mudarem.

# --questions--

## --text--

Como o arquivo `package-lock.json` resolve problemas de inconsistência de versão entre diferentes ambientes?

## --answers--

Atualizando automaticamente todas as dependências para suas versões mais recentes.

### --feedback--

Pense em como ele garante que todos instalem as mesmas versões das dependências.

---

Ao excluir dependências antigas antes de instalar as novas.

### --feedback--

Pense em como ele garante que todos instalem as mesmas versões das dependências.

---

Congelando as versões exatas das dependências que foram instaladas.

---

Armazenando apenas os números das versões principais de cada dependência.

### --feedback--

Pense em como ele garante que todos instalem as mesmas versões das dependências.

## --video-solution--

3

## --text--

Por que você deve sempre commitar seu arquivo `package-lock.json` no Git?

## --answers--

Para fazer o npm rodar mais rápido na sua máquina.

### --feedback--

Pense em manter o ambiente de cada desenvolvedor consistente.

---

Para permitir que sua equipe compartilhe as mesmas versões de dependências e configuração.

---

Para atualizar automaticamente dependências desatualizadas.

### --feedback--

Pense em manter o ambiente de cada desenvolvedor consistente.

---

Para reduzir o tamanho do seu repositório Git.

### --feedback--

Pense em manter o ambiente de cada desenvolvedor consistente.

## --video-solution--

2

## --text--

O que são dependências filhas?

## --answers--

Pacotes que estão instalados mas nunca usados no projeto.

### --feedback--

Pense nas dependências das quais suas dependências principais dependem.

---

Pacotes que dependem dos arquivos principais do seu projeto para funcionar.

### --feedback--

Pense nas dependências das quais suas dependências principais dependem.

---

Pacotes que são usados apenas durante o desenvolvimento.

### --feedback--

Pense nas dependências das quais suas dependências principais dependem.

---

Pacotes dos quais suas dependências dependem internamente para funcionar.

## --video-solution--

4
