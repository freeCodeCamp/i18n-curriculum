---
id: 687ea8eba2a8b119f2ad9f8c
title: 有哪些不同的方式來連接資料表？
challengeType: 19
dashedName: what-are-the-different-ways-to-join-tables
---

# --description--

即使關聯式資料庫將資料組織成獨立的表格，SQL 的 `JOIN` 操作仍允許你從表格中結合相關資訊以查詢資料。

`JOIN` 操作有幾種變體，包括：

- `INNER JOIN`
- `FULL OUTER JOIN`
- `LEFT OUTER JOIN`
- `RIGHT OUTER JOIN`
- `SELF JOIN`
- `CROSS JOIN`

讓我們從 `INNER JOIN` 開始。

`INNER JOIN` 會篩選結果，只包含你指定的連接行中兩個資料表的值相等的列。基本上，它會給你資料的交集。

為了說明這一點，假設我們有兩個資料表。

第一個是這個包含多個產品的 `products` 表格。它包括它們的 ID、名稱、類別、價格和產地。

```sql
| product_id | product_name     | category    | price (USD) | origin        |
| ---------- | ---------------- | ----------- | ----------- | ------------- |
| 1          | Ice Cream        | Food        | 2.50        | India         |
| 2          | Pizza Margherita | Food        | 12.00       | Italy         |
| 3          | Sushi            | Food        | 18.75       | Japan         |
| 4          | T-Shirt          | Clothing    | 25.00       | USA           |
| 5          | Jeans            | Clothing    | 60.00       | Argentina     |
| 6          | Coffee           | Beverages   | 35.00       | France        |
| 7          | Juice            | Beverages   | 5.00        | Colombia      |
```

其次，我們有一個 `sales` 表格，包含銷售 ID、產品 ID、數量和銷售日期。

```sql
| sale_id | product_id | quantity | sale_date  |
| ------- | ---------- | -------- | ---------- |
| 101     | 1          | 2        | 2025-07-18 |
| 102     | 2          | 3        | 2025-02-13 |
| 103     | 6          | 10       | 2025-06-08 |
| 104     | 5          | 8        | 2025-01-10 |
| 105     | 2          | 1        | 2025-05-15 |
```

我們可以根據 `product_id` 執行 `INNER JOIN`，如下所示：

```sql
SELECT *
FROM products
INNER JOIN sales
  ON products.product_id = sales.product_id;
```

這只會取得兩個資料表中具有相同 `product_id` 的列。因此，如果某個產品不在銷售資料表或產品資料表中，將不會被包含。

這是結果：

```sql
product_id | product_name     | category  | price | origin    | sale_id | product_id | quantity | sale_date
---------- | ---------------- | --------- |-------|-----------|---------|------------|----------|------------
     1     | Ice Cream        | Food      |  2.50 | India     |     101 |          1 |        2 | 2025-07-18
     2     | Pizza Margherita | Food      | 12.00 | Italy     |     102 |          2 |        3 | 2025-02-13
     2     | Pizza Margherita | Food      | 12.00 | Italy     |     105 |          2 |        1 | 2025-05-15
     5     | Jeans            | Clothing  | 60.00 | Argentina |     104 |          5 |        8 | 2025-01-10
     6     | Coffee           | Beverages | 35.00 | France    |     103 |          6 |       10 | 2025-06-08
```

我們只看到已售出的產品的列。 例如，`'Pizza Margherita'` 在 `sales` 表中，`product_id` 為 `2`，所以我們在結果中取得該產品。

然而，`product_id` 為 `4` 的 `'T-Shirts'` 沒有被銷售，所以此產品不在 `sales` 表中。它們不在兩個表中，因此不包含在結果中。

連接表格正如其名。它將兩個或多個表格合併成一個，這就是為什麼我們會看到來自兩個表格的所有行，包括兩次出現的 `product_id`。

`FULL OUTER JOIN` 傳回兩個資料表中的所有列。

如果在指定的行中找到匹配，資料將會被合併，並且你會取得每個匹配記錄的所有行。

如果在任一個資料表的指定行中沒有匹配，缺少的行將以 `NULL` 值填充。

讓我們在範例中根據 `product_id` 行執行 `FULL OUTER JOIN`。此行將決定是否有匹配。

```sql
SELECT *
FROM products
FULL OUTER JOIN sales
  ON products.product_id = sales.product_id;
```

這是結果：

```sql
product_id | product_name     | category  | price | origin    | sale_id | product_id | quantity | sale_date
---------- | ---------------- | --------- |-------|-----------|---------|------------|----------|------------
         1 | Ice Cream        | Food      |  2.50 | India     |     101 |          1 |        2 | 2025-07-18
         2 | Pizza Margherita | Food      | 12.00 | Italy     |     102 |          2 |        3 | 2025-02-13
         3 | Sushi            | Food      | 18.75 | Japan     |         |            |          |
         4 | T-Shirt          | Clothing  | 25.00 | USA       |         |            |          |
         5 | Jeans            | Clothing  | 60.00 | Argentina |     104 |          5 |        8 | 2025-01-10
         6 | Coffee           | Beverages | 35.00 | France    |     103 |          6 |       10 | 2025-06-08
         7 | Juice            | Beverages |  5.00 | Colombia  |         |            |          |
         2 | Pizza Margherita | Food      | 12.00 | Italy     |     105 |          2 |        1 | 2025-05-15
```

注意 `'Pizza Margherita'` 擁有所有資料，包括來自 `sales` 表的行，因為有匹配。

但是 `'T-Shirt'` 有空的（`NULL`）行，因為在 `sales` 表中找不到匹配（此產品未售出）。

`LEFT OUTER JOIN` 用於取得左表的所有記錄，以及左表每一列對應的右表匹配資訊。

如果找不到匹配，右側表格的行將以 `NULL` 值填充。

讓我們在範例中執行 `LEFT OUTER JOIN`。

```sql
SELECT *
FROM products
LEFT JOIN sales
  ON products.product_id = sales.product_id;
```

這是結果：

```sql
product_id | product_name     | category  | price | origin    | sale_id | product_id | quantity | sale_date
---------- | ---------------- | --------- |-------|-----------|---------|------------|----------|------------
         1 | Ice Cream        | Food      |  2.50 | India     |     101 |          1 |        2 | 2025-07-18
         2 | Pizza Margherita | Food      | 12.00 | Italy     |     102 |          2 |        3 | 2025-02-13
         3 | Sushi            | Food      | 18.75 | Japan     |         |            |          |
         4 | T-Shirt          | Clothing  | 25.00 | USA       |         |            |          |
         5 | Jeans            | Clothing  | 60.00 | Argentina |     104 |          5 |        8 | 2025-01-10
         6 | Coffee           | Beverages | 35.00 | France    |     103 |          6 |       10 | 2025-06-08
         7 | Juice            | Beverages |  5.00 | Colombia  |         |            |          |
         2 | Pizza Margherita | Food      | 12.00 | Italy     |     105 |          2 |        1 | 2025-05-15
```

在這種情況下，它與 `FULL OUTER JOIN` 相同，因為它包含第一個資料表 `products` 的所有列。

`RIGHT OUTER JOIN` 非常相似，但現在我們會取得右表的所有記錄，以及右表每一列對應的左表匹配資訊。

如果沒有匹配，左側表格的行將以 `NULL` 值填充。

讓我們在範例中執行 `RIGHT OUTER JOIN`。

```sql
SELECT *
FROM products
RIGHT JOIN sales
  ON products.product_id = sales.product_id;
```

結果如下：

```sql
product_id | product_name     | category  | price | origin    | sale_id | product_id | quantity | sale_date
---------- | ---------------- | --------- |-------|-----------|---------|------------|----------|------------
         1 | Ice Cream        | Food      |  2.50 | India     |     101 |          1 |        2 | 2025-07-18
         2 | Pizza Margherita | Food      | 12.00 | Italy     |     102 |          2 |        3 | 2025-02-13
         6 | Coffee           | Beverages | 35.00 | France    |     103 |          6 |       10 | 2025-06-08
         5 | Jeans            | Clothing  | 60.00 | Argentina |     104 |          5 |        8 | 2025-01-10
         2 | Pizza Margherita | Food      | 12.00 | Italy     |     105 |          2 |        1 | 2025-05-15
```

你會注意到它的列數較少。這是因為它採用了右邊資料表（此例為 `sales`）的所有記錄，而該資料表的列數少於 `products` 資料表。

如果在 `products` 表中找到匹配，則會用該資料填充那些行。但如果沒有匹配，這些行會被填充為 `NULL`。

在這種情況下，每個已售出的產品在 `products` 表中都有一筆記錄，因此資料是完整的。

這些是最常用的 `JOIN` 操作，但還有另外兩種你應該知道的。

`SELF JOIN` 允許你將資料表與其自身連接。你可以將它視為連接同一資料表的兩個副本。這對於比較同一資料表中的不同列非常有幫助。

`CROSS JOIN`，也稱為笛卡爾連接，會將第一個資料表的每一列與第二個資料表的每一列連接。因此，它會產生所有可能的列組合。這個操作不需要任何條件來連接資料表。

這些 `JOIN` 操作是使用 SQL 的基礎。透過選擇正確的 `JOIN`，你可以盡可能高效地查詢你需要的資料。

# --questions--

## --text--

哪一種 SQL `JOIN` 操作只傳回根據連接條件在兩個資料表中皆有符合的列？

## --answers--

`LEFT JOIN`

### --feedback--

思考哪種 join 型別在只包含符合兩個資料表的記錄方面最具限制性。

---

`INNER JOIN`

---

`RIGHT JOIN`

### --feedback--

思考哪種 join 型別在只包含符合兩個資料表的記錄方面最具限制性。

---

`FULL JOIN`

### --feedback--

思考哪種 join 型別在只包含符合兩個資料表的記錄方面最具限制性。

## --video-solution--

2

## --text--

如果你需要擷取所有客戶（左邊）以及每個客戶可能下的任何訂單（右邊），且沒有訂單的客戶仍應包含在結果中，你會使用哪種 SQL `JOIN` 操作？

## --answers--

`LEFT JOIN`

---

`INNER JOIN`

### --feedback--

思考哪種 join 能確保來自 customers 表的所有記錄都包含在輸出中。

---

`RIGHT JOIN`

### --feedback--

思考哪種 join 能確保來自 customers 表的所有記錄都包含在輸出中。

---

`FULL JOIN`

### --feedback--

思考哪種 join 能確保來自 customers 表的所有記錄都包含在輸出中。

## --video-solution--

1

## --text--

哪一種 SQL `JOIN` 操作會傳回兩個資料表的所有列，包括未配對的列（對於沒有配對的資料表的行，欄位為 `NULL`）？

## --answers--

`LEFT JOIN`

### --feedback--

此連接旨在成為最包容的，採用兩個資料表中的所有記錄。

---

`INNER JOIN`

### --feedback--

此連接旨在成為最包容的，採用兩個資料表中的所有記錄。

---

`RIGHT JOIN`

### --feedback--

此連接旨在成為最包容的，採用兩個資料表中的所有記錄。

---

`FULL JOIN`

## --video-solution--

4
