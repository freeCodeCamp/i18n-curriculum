---
id: 695cc6a5eefd305381ec90bc
title: O que é o módulo fs e como ele funciona?
challengeType: 19
dashedName: what-is-the-fs-module-and-how-does-it-work
---

# --description--

Muitas linguagens e frameworks oferecem maneiras de trabalhar com arquivos e pastas. O Node.js permite que você faça isso com o módulo `fs` ou sistema de arquivos.

Esta lição vai focar no módulo Node `fs`, como ele funciona e as três maneiras diferentes que você pode usar os métodos que ele fornece.

O módulo Node `fs` fornece métodos para trabalhar com arquivos e pastas, incluindo operações de abrir e fechar, ler e escrever e excluir.

O módulo `fs` é um módulo padrão do Node.js, então está disponível para uso desde que você tenha o Node.js instalado no seu ambiente. Para usar o módulo, você o importa desta forma:

```js
const fs = require("fs");
```

A flexibilidade que o módulo `fs` oferece é que ele permite que você use seus métodos tanto de forma síncrona quanto assíncrona. Os métodos do módulo `fs` são assíncronos por padrão, mas para cada método, existe uma forma síncrona:

```js
fs.writeFile() // Asynchronous file writing
fs.writeFileSync() // Synchronous file writing

fs.readFile() // Asynchronous file reading
fs.readFileSync() // Synchronous file reading

fs.open() // Opens a file
fs.openAsBlob() // Opens as blob
fs.openSync() // Synchronous open
fs.opendir() // Opens directory
fs.opendirSync() // Synchronous directory open
```

Não termina aí. Dependendo das suas necessidades, você pode usar os métodos de três maneiras:

- com callbacks, por exemplo `fs.writeFile()` (assíncrono)
- com promises se você preferir a sintaxe `async/await`, por exemplo `fs.promises.writeFile()`
- sincronamente, por exemplo, `fs.writeFileSync()`

Aqui está a sintaxe básica para o uso assíncrono dos métodos:

```js
fs.writeFile("filePath", "content", "utf8", (err) => {
  if (err) {
    throw err;
  }
  console.log("File written to!");
});
```

Para a versão com promises, você pode importar isso de `fs/promises` ou encadear `promises` à sua importação de `fs`. Aqui está a sintaxe:

```js
async function promisesExample() {
  try {
    await fs.promises.writeFile("filePath", "content", "utf8");
    console.log("File written to!");
  } catch (err) {
    console.error("Error:", err);
  }
}

promisesExample();
```

E aqui está a versão síncrona:

```js
try {
  fs.writeFileSync("filePath", "content", "utf8");
  console.log("File written to!");
} catch (err) {
  console.error("Error:", err);
}
```

Observe que usar qualquer um dos métodos de forma síncrona é bloqueante. Em outras palavras, seu programa vai parar de executar e esperar até que a operação seja concluída antes de passar para a próxima linha de código.

Para scripts rápidos, projetos pequenos ou tarefas pontuais, métodos síncronos provavelmente são adequados. Mas em aplicações do mundo real, I/O (entrada/saída) bloqueante se torna um problema porque pode congelar outras partes do seu app enquanto o Node espera o sistema de arquivos terminar suas operações. Isso desacelera as coisas e prejudica o desempenho e a experiência do usuário.

É por isso que métodos assíncronos existem. Eles permitem que o restante do seu programa continue rodando enquanto o Node lida com operações de arquivo em segundo plano. Tradicionalmente, isso usava callbacks, mas eles podem ficar confusos rapidamente conforme seu app cresce.

Promises e `async/await` resolvem esse problema. Eles ainda são não bloqueantes, mas o código é lido como código síncrono normal e é muito mais fácil de manter. 

Por essa razão, a abordagem baseada em promises é geralmente preferida hoje e é isso que usaremos no restante desta lição.

O método `writeFile()` permite que você escreva em um arquivo existente. Se o arquivo não existir, ele o cria no diretório atual e então escreve o conteúdo especificado nele.

Aqui está como usar o método `writeFile()`:

```js
const fs = require("fs/promises");

async function writeToFile() {
  try {
    await fs.writeFile(
      "article.md",
      "## Node `fs` Module: The Complete Guide",
      "utf8",
    );
    console.log("File written to!");
  } catch (err) {
    console.error("Error writing to file:", err);
  }
}

writeToFile(); // File written to!
```

Aqui está o conteúdo do arquivo article.md depois disso:

```md
## Node `fs` Module: The Complete Guide
```

O método `appendFile()` permite que você adicione ao conteúdo de um arquivo existente. Veja como usá-lo:

```js
const fs = require("fs/promises");

async function appendToFile() {
  try {
    await fs.appendFile(
      "article.md",
      "\nIn this article, you will learn all there is to know about the Node fs module...",
      "utf8",
    );
    console.log("File appended to!");
  } catch (err) {
    console.log("Error appending to file:", err);
  }
}

appendToFile(); // File appended to!
```

O método `readFile()` permite que você veja qual é o conteúdo de um arquivo:

```js
const fs = require("fs/promises");

async function readFileContent() {
  try {
    const fileContent = await fs.readFile("article.md", "utf8");
    console.log("File content:", fileContent);
  } catch (err) {
    console.log("File read successfully");
  }
}

readFileContent();

/*
File content: ## Node `fs` Module: The Complete Guide

In this article, you will learn all there is to know about the Node fs module...
*/
```

Se você não especificar a codificação de caracteres `utf8`, você receberá o conteúdo do arquivo como um buffer:

```js
async function readFileContent() {
  try {
    const fileContent = await fs.readFile("article.md");
    console.log("File content:", fileContent);
  } catch (err) {
    console.log("File read successfully");
  }
}

readFileContent();

/*
File content: <Buffer 23 23 20 4e 6f 64 65 20 60 66 73 60 20 4c 69 62 72 61 72 79 3a 20
 54 68 65 20 43 6f 6d 70 6c 65 74 65 20 47 75 69 64 65 0a 0a 49 6e 20 74 68 69 73 20 ... 
72 more bytes>
*/
```

Na próxima lição, você aprenderá como manipular um buffer assim com o módulo Buffer do Node.js.

Por fim, o método `unlink()` permite que você exclua um arquivo:

```js
const fs = require("fs/promises");

async function deleteFile() {
  try {
    await fs.unlink("article.ts");
    console.log("File deleted successfully!");
  } catch (err) {
    console.error("Error deleting file:", err);
  }
}

deleteFile();
```

Se o arquivo não existir, você receberá uma mensagem de erro semelhante a esta:

```bash
Error deleting file: Error: ENOENT: no such file or directory, unlink 'article.ts'
```

Se existir, o arquivo é deletado e você recebe a mensagem de sucesso que definiu.

# --questions--

## --text--

Qual é o principal propósito do módulo Node `fs`?

## --answers--

Para criar páginas HTML dinâmicas no navegador.

### --feedback--

Pense em como você lida com arquivos como documentos de texto ou pastas diretamente do Node.js.

---

Para conectar o Node.js a um banco de dados.

### --feedback--

Pense em como você lida com arquivos como documentos de texto ou pastas diretamente do Node.js.

---

Para interagir com o sistema de arquivos para operações CRUD de arquivos e pastas.

---

Para gerenciar instalações de pacotes Node.js.

### --feedback--

Pense em como você lida com arquivos como documentos de texto ou pastas diretamente do Node.js.

## --video-solution--

3

## --text--

Qual método no módulo fs do Node permite que você escreva conteúdo em um arquivo, criando-o se ele não existir?

## --answers--

`writeFile()`

---

`readFile()`

### --feedback--

Pense no método que tanto cria quanto escreve conteúdo em um arquivo.

---

`appendFile()`

### --feedback--

Pense no método que tanto cria quanto escreve conteúdo em um arquivo.

---

`unlink()`

### --feedback--

Pense no método que tanto cria quanto escreve conteúdo em um arquivo.

## --video-solution--

1

## --text--

Qual das seguintes opções **NÃO** é uma das três formas de usar métodos no módulo Node `fs`?

## --answers--

Com callbacks, por exemplo `fs.writeFile()`.

### --feedback--

Dois são assíncronos, um é síncrono e um não existe.

---

 Com promises, por exemplo `fs.promises.writeFile()`.

### --feedback--

Dois são assíncronos, um é síncrono e um não existe.

---

Sincronamente, por exemplo `fs.writeFileSync()`.

### --feedback--

Dois são assíncronos, um é síncrono e um não existe.

---

Com análise JSON, por exemplo `fs.parseFile()`.

## --video-solution--

4

