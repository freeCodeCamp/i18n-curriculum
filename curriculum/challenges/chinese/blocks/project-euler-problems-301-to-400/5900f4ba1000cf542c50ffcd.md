---
id: 5900f4ba1000cf542c50ffcd
title: '问题334：溢出豆子'
challengeType: 1
forumTopicId: 301992
dashedName: problem-334-spilling-the-beans
---

# --description--

在柏拉图的天堂里，存在着无数个直线的碗。 每个碗都包含一些或不包含有限数量的豆。 一个孩子玩游戏，只允许一种移动：从任何碗中取出两个豆子，并在两个相邻的碗中放入一个豆子。 当每个碗包含一个或没有豆时，游戏结束。

例如，考虑两个相邻的碗，分别装有 2 和 3 颗豆子，其他所有碗都是空的。以下八步操作将完成 `game`：

<img alt="animation of game when two adjacent bowls contain 2 and 3 beans respectively" src="https://cdn.freecodecamp.org/curriculum/project-euler/spilling-the-beans.gif" style="background-color: white; padding: 10px; display: block; margin-right: auto; margin-left: auto; margin-bottom: 1.2rem;">

你获得了以下序列：

$$\begin{align}
  & t_0 = 123456, \\\\
  & t_i = \begin{cases}
         \frac{t_{i - 1}}{2},               & \text{如果 $t_{i - 1}$ 是偶数} \\\\
         \left\lfloor\frac{t_{i - 1}}{2}\right\rfloor \oplus 926252, & \text{如果 $t_{i - 1}$ 是奇数}
         \end{cases} \\\\
         & \qquad \text{其中 $⌊x⌋$ 是下取整函数，$\oplus$ 是按位异或操作符。} \\\\
  & b_i = (t_i\bmod 2^{11}) + 1.
\end{align}$$

最后一个序列的前两个项是 $b_1 = 289$ 和 $b_2 = 145$。如果我们在两个相邻的碗中分别放入 $b_1$ 和 $b_2$ 颗豆子，完成游戏将需要 3419100 步。

现在考虑 1500 个相邻的碗，分别包含 $b_1, b_2, \ldots, b_{1500}$ 颗豆子，所有其他碗都是空的。查找游戏结束前需要多少步。

# --hints--

`spillingTheBeans()` 应该返回 `150320021261690850`。

```js
assert.strictEqual(spillingTheBeans(), 150320021261690850);
```

# --seed--

## --seed-contents--

```js
function spillingTheBeans() {

  return true;
}

spillingTheBeans();
```

# --solutions--

```js
// solution required
```
