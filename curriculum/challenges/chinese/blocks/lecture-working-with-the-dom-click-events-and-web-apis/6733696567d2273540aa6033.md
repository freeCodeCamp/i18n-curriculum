---
id: 6733696567d2273540aa6033
title: 什么是 Web Animations API，它与 CSS 动画属性有何关系？
challengeType: 19
dashedName: what-is-the-web-animations-api-and-how-does-it-relate-to-css-animation-properties
---

# --interactive--

`Web Animations` API（WAAPI）允许你直接在 JavaScript 中创建和控件动画。使用 WAAPI，你可以更动态地处理动画，使操作更加简便。

让我们更详细地了解 WAAPI，这样你就可以开始在你的 JavaScript 代码中直接处理动画。WAAPI 的核心是 `Animation` 构造函数，它提供了多个实例方法和属性，允许你动态地为元素制作动画。

`Animation` 构造函数中的一个重要方法是 `animate()`。它允许你通过指定关键帧和持续时间、方向、缓动和迭代等选项来创建动画。

以下是 `animate()` 方法的基本语法：

```js
element.animate(keyframes, options);
```

让我们来看一个例子。 

:::interactive_editor

```html
<link rel="stylesheet" href="styles.css" />
<div class="square" id="square"></div>
<script src="index.js"></script>
```

```css
body {
  background: #f1f1f1;
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100vh;
}

.square {
  background: #1b1b32;
  width: 10rem;
  aspect-ratio: 1/1;
}
```

```js
const square = document.querySelector("#square");

const animation = square.animate(
  [{ transform: "translateX(0px)" }, { transform: "translateX(100px)" }],
  {
    duration: 2000, // makes animation lasts 2 seconds
    iterations: Infinity, // loops indefinitely
    direction: "alternate", // moves back and forth
    easing: "ease-in-out" // smooth easing
  }
);
```

:::

浏览器中的结果将是一个蓝色的 `square` 水平来回移动。

`Animation` 构造的实例方法包括：

```js
play()
pause()
reverse()
finish()
cancel()
```

实例属性包括：

```md
playbackRate
currentTime
startTime
effect
timeline
playState
finished
onfinish
oncancel
```

让我们修改示例以使用 `play()`、`pause()` 方法和 `onfinish` 属性。以下是新建版本：

:::interactive_editor

```html
<link rel="stylesheet" href="styles.css" />
<div class="square" id="square"></div>

<button id="playBtn">Play</button>
<button id="pauseBtn">Pause</button>
<script src="index.js"></script>
```

```css
body {
  background: #f1f1f1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100vh;
}
.square {
  background: #1b1b32;
  width: 10rem;
  aspect-ratio: 1/1;
  margin-bottom: 20px;
}
button {
  margin: 10px;
  padding: 10px 20px;
  font-size: 16px;
}
```

```js
const square = document.querySelector("#square");
const playBtn = document.querySelector("#playBtn");
const pauseBtn = document.querySelector("#pauseBtn");

const animation = square.animate(
  [{ transform: "translateX(0px)" }, { transform: "translateX(200px)" }],
  {
    duration: 5000, // Animation lasts 5 seconds
    // iterations: Infinity, // Loops indefinitely
    direction: "alternate", // Moves back and forth
    easing: "ease-in-out" // Smooth easing function
  }
);

// Set the onfinish property to log a message when the animation ends
animation.onfinish = () => {
  console.log("Animation finished!");
};

// Play the animation when the "Play" button is clicked
playBtn.addEventListener("click", () => {
  animation.play();
  console.log("You start the animation");
});

// Pause the animation when the "Pause" button is clicked
pauseBtn.addEventListener("click", () => {
  animation.pause();
  console.log("You pause the animation");
});
```

:::

当点击 `play` 按钮时，浏览器中的结果将显示蓝色方块从左向右移动。

WAAPI 通过在 JavaScript 内部提供对动画的更动态控制，扩展了 CSS 动画的功能。

使用 CSS 动画，你可以通过 `animation-name`、`animation-duration` 和 `animation-timing-function` 等属性以声明式方式定义动画。你也可以使用 WAAPI 的 `animate()` 方法实现相同的效果。

区别在于你可以更直接和动态地使用 `animate()` 方法控件你创建的动画，但使用 CSS 动画时，你需要通过定义自定义样式并在你的 JavaScript 文件中触发它们来完成更多操作。

CSS 动画非常适合简单且声明式的自动运行动画。这些包括悬停效果、过渡或触发后不需要太多交互的动画。如果你的动画需要响应用户的点击、滚动等交互，或者你希望用户能够动态暂停、倒放或改变速度，WAAPI 是更好的选择。 

当你想要 CSS 的简单性来进行基本设置，但需要在运行期控制动画时，你可以考虑结合使用 WAAPI 和 CSS 动画。

# --questions--

## --text--

Web 动画 API（WAAPI）中用于创建动画的主要方法是什么？

## --answers--

`setInterval()`

### --feedback--

考虑允许你定义关键帧和持续时间等选项的方法。

---

`setTimeout()`

### --feedback--

考虑允许你定义关键帧和持续时间等选项的方法。

---

`animate()`

---

`requestAnimationFrame()`

### --feedback--

考虑允许你定义关键帧和持续时间等选项的方法。

## --video-solution--

3

## --text--
以下哪项不是 Web Animations API（WAAPI）中 `Animation` 构造函数的实例方法？

## --answers--

`play()`

### --feedback--

考虑用于控制动画的 `methods`。

---

`pause()`

### --feedback--

考虑用于控制动画的 `methods`。

---

`reverse()`

### --feedback--

考虑用于控制动画的 `methods`。

---

`stop()`

## --video-solution--

4

## --text--

什么时候你应该使用 WAAPI 而不是 CSS 动画？

## --answers--

用于简单的自动悬停效果。

### --feedback--

考虑你需要对动画有更多控件的情况。

---

当你需要动画响应用户的点击、滚动等交互，或允许动态控件如暂停或反转时。

---

当你只需要无交互的过渡时。

### --feedback--

考虑你需要对动画有更多控件的情况。

---

对于触发后不需要太多交互的动画。

### --feedback--

考虑你需要对动画有更多控件的情况。

## --video-solution--

2
