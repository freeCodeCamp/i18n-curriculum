---
id: 6723d0ac516099c902394e8b
title: 區域的儲存與 CRUD 複習
challengeType: 31
dashedName: review-local-storage-and-crud
---

# --description--

## 持久儲存

- **定義**：持久性儲存是指一種儲存資料的方式，即使在關閉電源或重新啟動裝置後，資料仍然可用。

## 創建、讀取、更新、刪除（CRUD）

- **創建**：這是指創建新資料的處理程序。例如，在網頁應用程式中，這可能是當使用者為部落格添加新文章時。
- **讀取**：這是從資料庫擷取資料的操作行為。例如，當你瀏覽部落格文章或查看網站上的評測時，你正在執行讀取操作行為以擷取並顯示儲存在資料庫中的資料。
- **更新**：這涉及修改資料庫中現有的資料。範例包括編輯部落格文章或更新你的評測資訊。
- **刪除**：這是從資料庫中移除資料的操作行為。例如，當你刪除一篇部落格文章或帳號時，你正在執行刪除操作行為。

## HTTP 方法

- **定義**：HTTP 代表超文字傳輸協定，它是網路上資料通訊的基礎。有 HTTP 方法定義了可以對網路上的資源執行的動作。常見的方法有 GET、POST、PUT、PATCH、DELETE。
- **`GET` 方法**：這用於從伺服器擷取資料。
- **`POST` 方法**：這用於將資料提交到伺服器，該伺服器會創建一個新的資源。
- **`PUT` 方法**：這用於透過完全取代來更新資源。
- **`PATCH` 方法**：這用於部分更新資源。
- **`DELETE` 方法**：這用於從資料庫中移除記錄。

## `localStorage` 和 `sessionStorage` 屬性

- **Web Storage API**：此 API 提供瀏覽器在瀏覽器內部儲存鍵值對的機制，讓開發者能夠儲存可跨不同頁面重新載入和工作階段使用的資訊。Web Storage API 的兩個主要組件是 `localStorage` 和 `sessionStorage` 屬性。
- **`localStorage` 屬性**：`localStorage` 是 Web Storage API 的零件，允許資料即使在瀏覽器視窗關閉或頁面重新整理後仍然持續存在。這些資料會一直保留，直到應用程式或使用者明確地將其移除。
- **`localStorage.setItem()` 方法**：此方法用於在 `localStorage` 中儲存一組鍵值配對。

```js
localStorage.setItem('username', 'Jessica');
```

- **`localStorage.getItem()` 方法**：此方法用於從 `localStorage` 取得指定鍵的值。

```js
localStorage.setItem('username', 'codingRules');

let username = localStorage.getItem('username');
console.log(username); // codingRules
```

- **`localStorage.removeItem()` 方法**：此方法用於使用其鍵從 `localStorage` 中移除特定項目。

```js
localStorage.removeItem('username');
```

- **`localStorage.clear()` 方法**：此方法用於清除 `localStorage` 中所有儲存的資料。

```js
localStorage.clear();
```

- **`sessionStorage` 屬性**：儲存只在當前工作階段持續的資料，並且在瀏覽器分頁或視窗關閉時清除。
- **`sessionStorage.setItem()` 方法**：此方法用於在 `sessionStorage` 中儲存一個鍵值對組。

```js
sessionStorage.setItem('cart', '3 items');
```

- **`sessionStorage.getItem()` 方法**：此方法用於從 `sessionStorage` 中取得指定鍵的值。

```js
sessionStorage.setItem('cart', '3 items');

let cart = sessionStorage.getItem('cart');
console.log(cart); // '3 items'
```

- **`sessionStorage.removeItem()` 方法**：此方法用於使用其鍵從 `sessionStorage` 中移除特定項目。

```js
sessionStorage.removeItem('cart');
```

- **`sessionStorage.clear()` 方法**：此方法用於清除儲存在 `sessionStorage` 中的所有資料。

```js
sessionStorage.clear();
```

## 操作 Cookies

- **定義**：Cookies，也稱為網頁 Cookies 或瀏覽器 Cookies，是伺端傳送給使用者網頁瀏覽器的小塊資料。這些 Cookies 會儲存在使用者的裝置上，並在後續請求時回傳給伺端。Cookies 對於協助網頁應用程式維護狀態並記住使用者資訊至關重要，這在 HTTP 是無狀態協定的情況下尤其重要。
- **工作階段 Cookie**：這些 Cookie 僅在使用者於網站上的工作階段期間有效。一旦使用者關閉瀏覽器或分頁，工作階段 Cookie 即會被刪除。這些 Cookie 通常用於在使用者訪問期間保持登入狀態等任務。
- **安全 Cookie**：這些 Cookie 僅會透過 HTTPS 傳送，確保它們在傳輸過程中不會被攻擊者攔截。
- **HttpOnly Cookies**：這些 cookies 無法被瀏覽器中執行的 JavaScript 存取或修改，使它們在防範跨站腳本攻擊（XSS）方面更為安全。
- **Set-Cookie 標頭**：當你造訪網站時，伺服端可以在 HTTP 回應中傳送 Set-Cookie 標頭。此標頭會告訴你的瀏覽器存檔一個帶有特定資訊的 cookie。例如，它可能會儲存一個唯一 ID，幫助網站在你下次造訪時辨識你。  
你可以使用 `document.cookie` 在 JavaScript 中手動設定 cookie：

```js
document.cookie = "organization=freeCodeCamp; expires=Fri, 31 Dec 2021 23:59:59 GMT; path=/";
```

要刪除 cookie，你可以將其過期時間設定為過去的時間。

```js
document.cookie = "username=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/";
```

## 快取 API

- **定義**：快取是將檔案的副本儲存在暫存位置的過程，以便能更快速地存取。`Cache API` 用於儲存網路請求和回應，使網頁應用程式能更高效地運作，甚至能離線運作。它是更廣泛的 `Service Worker API` 的一部分，對於建立能在不穩定或緩慢網路條件下運作的漸進式網頁應用程式（PWA）至關重要。  
`Cache API` 是一種儲存機制，用於儲存 `Request` 和 `Response` 物件。當向伺服器發出請求時，應用程式可以將回應儲存起來，之後從快取中取回，而不必重新發出網路請求。這樣可以減少載入時間、節省頻寬，並提升整體使用者體驗。
- **快取儲存**：這用於儲存 HTTP 請求及其對應回應的鍵值對組。這可啟用高效檢索先前請求的資源，減少後續造訪時從網路擷取的需求，並提升效率。
- **Cache-Control**：開發者可以定義快取資源應該保留多久，以及是否應該重新驗證或直接從快取提供。
- **離線支援**：透過使用 Cache API，你可以創建離線優先的網頁應用程式。舉例來說，PWA 可以在使用者與網路斷線時提供快取的資源。

## 負面樣式和客戶端儲存

- **過度追蹤**：指在未取得明確、知情同意或合法需求的情況下，於客戶端儲存空間（例如 cookies、區域儲存或工作階段儲存）中收集並儲存過多使用者資料的行為。這通常涉及跨多個網站或工作階段追蹤使用者行為、偏好和互動，可能侵犯使用者隱私。
- **瀏覽器指紋辨識**：一種用於追蹤和識別個別使用者的技術，根據其裝置和瀏覽器的獨特特徵，而非依賴 cookie 或其他傳統追蹤方法。與儲存在使用者裝置上的 cookie 不同，指紋辨識涉及收集一系列資訊，用以創建使用者瀏覽器工作階段的獨特「指紋」。
- **在 LocalStorage 中設定密碼**：這看起來可能是更明顯的負面樣式，但在區域的儲存中設定任何敏感資料如密碼會帶來安全風險。Local Storage 沒有加密且很容易被存取、取用。所以你絕不應該將任何類型的敏感資料儲存在那裡。

## IndexedDB

- **定義**：IndexedDB 用於在瀏覽器中儲存結構化資料。這是內建於現代網頁瀏覽器中，允許網頁應用程式高效地儲存和擷取 JavaScript 物件。

## 快取記憶體／Service Workers

- **定義**：Service Worker 是一個在背景中執行且與你的網頁分離的腳本。它可以攔截網路請求、存取快取，並使網頁應用程式能離線運作。這是漸進式網頁應用程式的重要組件。

# --assignment--

檢視 Local Storage 和 CRUD 主題與概念。
