---
id: 673403ca2bb16658309e3632
title: This 关键字如何工作？
challengeType: 19
dashedName: how-does-the-this-keyword-work
---

# --interactive--

你已经了解到，`class` 就像蓝图，可以用来创建 `object`。

这些蓝图需要一种通用的方式来引用在代码中被创建、访问或修改的特定对象。这正是 `this` 关键字的用途。它引用代码应运行的上下文。如果你在方法中使用它，`this` 的值将是对关联该方法的对象的引用。通过这种方式，你可以访问类中对象的属性和方法，并在不同对象上重用该方法。

例如，这里我们有一个 `Dessert` 类。这次，我们定义了一个 `hasPeanuts` 属性。

```js
class Dessert {
  constructor(hasPeanuts) {
    this.hasPeanuts = hasPeanuts;
  }
}
```

请注意，我们在构造函数中使用了 `this` 关键字。请记住，当类的新建对象被创建时，构造函数会被自动调用。

`this` 关键字告诉程序 `hasPeanuts` 应该是当前正在被创建的对象的一个属性。

赋值语句右侧将 `hasPeanuts` 参数的值赋值给新建对象的 `hasPeanuts` 属性。

```js
this.hasPeanuts = hasPeanuts;
```

那是在构造函数的上下文中，但你也可以在其他方法中使用 `this` 关键字。

这是我们的 `Dessert` 类，带有一些更改。现在我们有两个属性：`name` 和 `price`。

```js
class Dessert {
  constructor(name, price) {
    this.name = name;
    this.price = price;
  }

  showPrice() {
    console.log(`The price of ${this.name} is $${this.price}.`);
  }
}
```

我们还新建了一个 `showPrice` 方法。在此方法中，我们向控制台打印包含甜点对象名称和价格的描述性消息。

注意我们如何使用 `this` 关键字来访问 `showPrice` 方法内对象的属性。

在这个方法的上下文中，`this` 关键字的值将是什么？它将引用调用该方法的对象。在这种情况下，我们正在新建一个名为 `"Brownie"` 且价格为 `$5.99` 的 Dessert 实例：

```js
const brownie = new Dessert("Brownie", 5.99);
```

如果我们对该对象调用 `.showPrice()` 方法：

```js
brownie.showPrice();
```

这是完整的示例：

:::interactive_editor

```js
class Dessert {
  constructor(name, price) {
    this.name = name;
    this.price = price;
  }

  showPrice() {
    console.log(`The price of ${this.name} is $${this.price}.`);
  }
}

const brownie = new Dessert("Brownie", 5.99);
brownie.showPrice();
console.log(brownie);
```

:::

当前对象（`brownie`）的名称和价格被替换到字串中。

这都要归功于 `this` 关键字，它为你提供了一种通用的方式来在类中引用当前对象。这使你能够在不同对象上重用该方法。

这是在对象方法的上下文中，但 `this` 密钥在独立函数和箭头函数中也会有值。

它在独立函数中的值通常参考全局对象（在非严格模式下）或 `undefined`（在严格模式下）。

`this` 关键字的值在箭头函数中有些不同。箭头函数继承定义它们的外层作用域中的 `this` 值。它们不会创建自己的 `this` 绑定。这意味着 `this` 的值取决于箭头函数定义的上下文，而不是箭头函数被调用的位置或方式。这使得箭头函数对于回调或保持上下文非常有用。

但是，因为这个原因，`this` 的值在对象方法中不会指向当前对象，所以在使用箭头函数时你应该记住这一点。

同样适用于在其他函数内定义的箭头函数。它们将从其父作用域继承 `this` 的值。

`this` 关键字是访问和操作对象的强大工具。理解它的工作原理对于掌握 JavaScript 中的面向对象编程至关重要。

# --questions--

## --text--

JavaScript 中 `this` 关键字的主要用途是什么？

## --answers--

定义一个新建对象。

### --feedback--

思考 `this` 在方法中是如何使用的。

---

访问当前对象的属性和方法。

---

创建函数。

### --feedback--

思考 `this` 在方法中是如何使用的。

---

调用其他对象上的方法。

### --feedback--

思考 `this` 在方法中是如何使用的。

## --video-solution--

2

## --text--

以下关于 JavaScript 方法中 `this` 的语句哪项是正确的？

## --answers--

`this` 总是参考全局的对象。

### --feedback--

考虑 `this` 的值如何根据上下文发生变化。

---

`this` 总是绑定到定义该函数的对象。

### --feedback--

考虑 `this` 的值如何根据上下文发生变化。

---

`this` 可以根据其使用的上下文参考不同的对象。

---

`this` 仅用于函数式编程。

### --feedback--

考虑 `this` 的值如何根据上下文发生变化。

## --video-solution--

3

## --text--

在以下哪些场景中你通常会使用 `this` 关键字？

## --answers--

定义函数时

### --feedback--

考虑 `this` 的常见使用分支。

---

当访问对象的属性和方法时。

---

调用函数时。

### --feedback--

考虑 `this` 的常见使用分支。

---

创建新建对象时。

### --feedback--

考虑 `this` 的常见使用分支。

## --video-solution--

2
