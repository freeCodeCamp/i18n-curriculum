---
id: 672a54ce90c19e9038f481d7
title: 什么是 `aria-expanded` 属性，它是如何工作的？
challengeType: 19
dashedName: what-is-the-aria-expanded-attribute
---

# --interactive--

`aria-expanded` 属性用于无障碍目的，以指示控件是展开还是折叠。它与可折叠的小部件一起使用，如菜单、手风琴和其他控制内容可见性的信息披露小部件。如果控件是展开的，`aria-expanded` 属性设置为 `true`，如果是折叠的，则设置为 `false`。

`aria-expanded` 提供的信息使使用屏幕阅读器的人能够理解控件的当前状态（是展开还是折叠）。

`aria-expanded` 属性应用于切换可折叠小部件可见性的交互元素。例如，如果按钮切换可展开菜单，则 `aria-expanded` 属性放置在该按钮上。

当菜单展开时，`aria-expanded` 属性应设置为 `true`，如以下示例所示：

```html
<button aria-expanded="true">Menu</button>
```

当菜单折叠时，应将其设置为 `false`。

```html
<button aria-expanded="false">Menu</button>
```

你必须始终在控件元素上将 `aria-expanded` 属性设置为 `true` 或 `false`。例如，如果一个按钮切换菜单的可见性，`aria-expanded` 的默认值应基于菜单的默认可见性。

如果菜单默认展开，`aria-expanded` 应该初始设置为 `true`。如果菜单默认折叠，`aria-expanded` 应该初始设置为 `false`。

`aria-expanded` 的值应随着用户与元素交互时使用 JavaScript 动态更新。

此外，属性 `aria-controls` 和 `aria-owns` 可以与 `aria-expanded` 结合使用，以建立控件元素与其控件元素之间的程序连接。

让我们从 `aria-controls` 开始。当与 `aria-expanded` 一起使用时，`aria-controls` 属性用于指定被控元素。例如，按钮可能会展开或折叠作为菜单的列表。`aria-controls` 的值将是被控元素的 `id`（此示例中的菜单列表）。

:::interactive_editor

```html
<link rel="stylesheet" href="styles.css">

<button aria-expanded="false" aria-controls="menu1">Menu</button>
<ul id="menu1">
  <li>...</li>
  <li>...</li>
</ul>

<script src="index.js"></script>
```

```css
button {
  background-color: #0078d4;
  color: white;
  padding: 8px 12px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

button:hover {
  background-color: #005ea2;
}

ul {
  list-style: none;
  padding: 0;
  margin: 8px 0 0;
  border: 1px solid #ccc;
  border-radius: 4px;
  width: 150px;
  background: #fff;
}

li {
  padding: 8px;
  cursor: pointer;
}

li:hover {
  background-color: #f2f2f2;
}

```

```js
const button = document.querySelector('button');
const menu = document.getElementById(button.getAttribute('aria-controls'));

button.addEventListener('click', () => {
  const expanded = button.getAttribute('aria-expanded') === 'true';
  button.setAttribute('aria-expanded', String(!expanded));
  menu.hidden = expanded;
});

```

:::

请注意，列表紧跟在控件按钮之后。对于像这样的可展开控件，最好让展开的内容在 DOM 中紧跟控制它的元素之后。这可以防止屏幕阅读器用户必须查找展开的内容，并使键盘用户更容易导航展开内容中的任何交互控件。

如果无法将展开的内容立即放置在控件元素之后，`aria-owns` 属性允许你在无障碍树中将其虚拟地移动到控件之后。这使得辅助技术如屏幕阅读器能够假装展开的内容直接放置在 DOM 中控件之后。  

:::interactive_editor

```html
<link rel="stylesheet" href="styles.css">

<button aria-owns="menu1" aria-expanded="true">Menu</button>
<main>
  <!-- an entire page worth of content --->
</main>
<ul id="menu1">
  <li>...</li>
  <li>...</li>
</ul>

<script src="index.js"></script>
```

```css
button {
  background-color: #0078d4;
  color: white;
  padding: 8px 12px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  margin-bottom: 10px;
}

button:hover {
  background-color: #005ea2;
}

ul {
  list-style: none;
  padding: 0;
  margin: 8px 0;
  border: 1px solid #ccc;
  border-radius: 4px;
  width: 150px;
  background: #fff;
  position: absolute;
  z-index: 10;
}

li {
  padding: 8px;
  cursor: pointer;
}

li:hover {
  background-color: #f2f2f2;
}

```

```js
const button = document.querySelector('button');
const menu = document.getElementById(button.getAttribute('aria-owns'));

button.addEventListener('click', () => {
  const expanded = button.getAttribute('aria-expanded') === 'true';
  button.setAttribute('aria-expanded', String(!expanded));
  menu.hidden = expanded;
});

// Close the menu if user clicks outside
document.addEventListener('click', (e) => {
  if (!button.contains(e.target) && !menu.contains(e.target)) {
    button.setAttribute('aria-expanded', 'false');
    menu.hidden = true;
  }
});

```

:::

使用 `aria-owns` 属性存在缺点。它会为屏幕阅读器用户造成不必要的冗长，因为大多数屏幕阅读器在首次展开时会自动朗读展开元素的全部内容。它也不会改变标签（页）顺序，可能会迫使键盘用户在到达展开内容之前，必须通过页面上的所有其他交互控件，除非你使用 JavaScript 管理标签（页）顺序。

理想情况下，可展开内容应放置在控件元素之后，且只有在无法实现该情况的最坏情况下才应使用 `aria-owns` 属性。如果必须使用，你需要使用各种屏幕阅读器和浏览器进行彻底测试，以确保你的实现对所有人都是可访问的。

顺便提醒，当你使用 `aria-controls` 或 `aria-owns` 时，`aria-expanded` 的值必须在控件展开和折叠时持续更新。

`aria-expanded` 属性指示控件是展开还是折叠。此信息对于屏幕阅读器用户至关重要，帮助他们理解可折叠元素（如菜单、手风琴和其他类似的披露小部件）的当前状态。

通过正确使用 `aria-expanded`，你可以为所有人创建直观的用户体验。

# --questions--

## --text--

`aria-expanded` 属性的主要用途是什么？

## --answers--

定义元素的视觉外观。

### --feedback--

考虑 `aria-expanded` 如何向辅助技术提供信息。

---

提高网站性能。

### --feedback--

考虑 `aria-expanded` 如何向辅助技术提供信息。

---

指示一个元素是展开还是折叠。

---

增强浏览器兼容性。

### --feedback--

考虑 `aria-expanded` 如何向辅助技术提供信息。

## --video-solution--

3

## --text--

什么时候应该使用 `aria-expanded` 属性？

## --answers--

适用于网页上的所有元素。

### --feedback--

考虑 `aria-expanded` 最有用的上下文。

---

对于视觉上隐藏的元素。

### --feedback--

考虑 `aria-expanded` 最有用的上下文。

---

对于可折叠的元素，如菜单和手风琴。

---

对于具有动态内容的元素。

### --feedback--

考虑 `aria-expanded` 最有用的上下文。

## --video-solution--

3

## --text--

`aria-expanded` 属性的可能取值有哪些？

## --answers--

`true`、`false`、`yes`、`no`。

### --feedback--

考虑一个元素在展开或折叠时可能处于的状态。

---

`open`、`closed`、`expanded`、`collapsed`。

### --feedback--

考虑一个元素在展开或折叠时可能处于的状态。

---

`show`、`hide`、`visible`、`invisible`。

### --feedback--

考虑一个元素在展开或折叠时可能处于的状态。

---

`true`、`false`。

## --video-solution--

4
