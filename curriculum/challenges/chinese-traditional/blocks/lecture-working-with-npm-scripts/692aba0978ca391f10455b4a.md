---
id: 692aba0978ca391f10455b4a
title: 你如何將軟體包發佈到 npm 登錄檔？
challengeType: 19
dashedName: how-can-you-publish-a-package-to-the-npm-registry
---

# --description--

讓我們來了解 npm 登錄檔，在那裡你可以與全世界分享你的 JavaScript 軟體包。

**npm 登錄檔** 是一個公開和私有軟體包的資料庫。

開發者和組織可以將軟體包發佈到此登錄檔，以便與他們的社群和團隊成員分享工具，在許多情況下，也會與所有其他 Node.js 開發者分享。

軟體包可以是公開或私有的。公開軟體包任何人都可以存取。私有軟體包只能被特定使用者或組織成員存取。

在 npm 登錄檔中，你只需點擊幾下就能與全世界分享你所建立的內容。聽起來很棒，對吧？

讓我們一步一步看看你如何發佈一個軟體包。

## 步驟 1：創建帳戶

第一步是創建一個免費的 npm 帳號。要創建你的帳號：

* 前往 https://www.npmjs.com/signup。
    
* 填寫表單。你需要輸入你的使用者名稱、電子郵件和密碼。
    

請注意，根據註冊頁面，「你的電子郵件位址將會被添加到你發佈的軟體包的詮釋資料中，因此可能會被公開看到。」

## 步驟 2：**登入**

一旦你有了 npm 帳號，你需要在你的終端機上透過執行此指令來登入：

```bash
npm login
```

然後你需要使用你的帳戶資訊進行驗證。

## **步驟 3：創建一個** `package.json` 檔案

在你發佈你的軟體包之前，你需要使用此指令創建一個 `package.json` 檔案：

```bash
npm init
```

如果你的專案已經有一個，你可以直接進入**步驟 4**。

你需要為你的 `package.json` 檔案輸入這些資訊：

* **name**：這通常是你的專案／目錄名稱。如果你計劃將你的軟體包公開，這個名稱必須是唯一的，除非你使用範圍（我們稍後會涵蓋這部分）。
    
* **version**：你應該從 `"1.0.0"` 開始，這是預設值。這表述你的軟體包的初始版本，並且你可以在對軟體包進行更改時更新它。
    
* **main**：你的專案的進入點。預設為 `index.js`。
    
* **author**：你可以寫下你的名字或偏好的控制代碼。
    
* **license**：選擇一個特定的授權。部分範例包括 MIT 和 ISC。
    
* **description**：你的軟體包的簡要摘要。
    

在選擇你的軟體包名稱時，請確保它尚未在 npm 登錄檔中被使用。為此，你可以前往以下 URL，並將 `<your-package-name>` 替換為你的軟體包名稱：

```bash
https://www.npmjs.com/package/<your-package-name>
```

如果該 URL 沒有軟體包，軟體包名稱可用且你可以使用它。

但是，如果名稱已被使用，而你真的想保留它，你可以使用所謂的 **scope** 來發佈它。

### **範圍、作用域**

當你在 npm 登錄檔中創建使用者或組織帳戶時，你會獲得一個以你的使用者名稱或組織名稱為名的作用域。

範圍有助於避免名稱衝突，因為你可以將你的軟體包發佈在你的範圍下，即使已經存在另一個同名的軟體包。

帶有範圍的軟體包名稱以範圍名稱開頭。例如，在 `package.json` 中，你會找到這個鍵值對：

```bash
"name": "@<scope-name>/<your-package-name>"
```

如果你需要，可以直接在檔案中進行此更改，或者你可以從一開始就為 `package.json` 檔案創建範圍，方法是將 `--scope=@<scope-name>` 添加到 `npm init` 命令中。

```bash
npm init --scope=@<scope-name>
```

如果你使用個人帳戶，範圍名稱可以是你的使用者名稱；如果你使用組織帳戶，範圍名稱則可以是你的組織名稱。

## 第 4 步：創建 README.md

你的軟體包的 README 是一個 markdown 檔案，用來描述你的軟體包的功能及其預期用途。

你可能想要包含的一些重要內容範例有：

* 它的目的。
    
* 如何安裝它。
    
* 重要的相依性和注意事項。
    
* 如何開始。
    
* 範例程式碼片段。
    
* 貢獻指南（如果你接受貢獻）。
    
* 將聯結添加到一個變更紀錄檔案，在該檔案中追蹤不同版本所做的變更。
    

README 的結構是彈性的。不過，你可以調整它以符合你的需求。

## **步驟 5：** `.npmignore`

`.npmignore` 檔案告訴 npm 登錄檔在發佈你的軟體包時要包含哪些檔案以及忽略哪些檔案。防止分享敏感資訊，例如私鑰、密碼和個人資訊，非常重要。

在這個檔案中，你可以撰寫樣式來指定要忽略哪些檔案、目錄和檔案型別。它遵循與 `.gitignore` 檔案相同的樣式匹配規則。

如果你曾經使用過 Git，你可能會覺得這個檔案聽起來和 `.gitignore` 非常相似，對吧？那是因為它確實如此。根據 npm 文件，「如果沒有 `.npmignore` 檔案，但有 `.gitignore` 檔案，則 npm 會忽略 `.gitignore` 檔案所匹配的內容。」

你也應該知道，npm 會在你的軟體包所有子目錄中尋找 `.npmignore` 和 `.gitignore` 檔案，而不僅僅是根目錄。

預設這些路徑會自動被忽略，所以你不需要將它們添加到 `.npmignore`：

* `.*.swp`
    
* `._*`
    
* `.DS_Store`
    
* `.git`
    
* `.gitignore`
    
* `.hg`
    
* `.npmignore`
    
* `.npmrc`
    
* `.lock-wscript`
    
* `.svn`
    
* `.wafpickle-*`
    
* `config.gypi`
    
* `CVS`
    
* `npm-debug.log`
    

`node_modules` 目錄也會被忽略，除了已打包的相依性。

## **步驟 6：發佈你的軟體包**

在將你的軟體包發佈到 npm 登錄檔之前，你應該透過執行此命令來測試它：

```bash
npm install <full-path-to-package-directory>
```

一旦你準備好發佈，它的指令將取決於軟體包的型別：有範圍與無範圍。

如果你的軟體包是無範圍的，請執行此指令：

```bash
npm publish
```

如果你的軟體包有範圍，預設會以私人軟體包發佈（如果你的帳戶有此功能）。如果你想將它設為公開，你需要在指令中添加 `--access public`。

```bash
npm publish --access public
```

要查看你的公開軟體包，請前往此 URL：

```bash
https://npmjs.com/package/<your-package-name>
```

你應該會在軟體包名稱下方看到軟體包的可見性指示（公開或私人）。

## **第 7 步（選用）：安裝你的軟體包**

現在你已經全部設定完成，可以使用此指令在 Node.js 專案中安裝你的軟體包：

```bash
npm install <your-package-name>
```

## 更新你的軟體包

如果你在發佈軟體包後需要對軟體包進行更改，你可以在 `package.json` 中更新軟體包版本。

這是語義版本控制的標準慣例：

* **首次發行：** `1.0.0`。
    
* **修補版本發布：** 增加第三個數字。例如，從 `1.0.0` 更新到 `1.0.1`。
    
* **次要版本釋出：** 將中間的數字遞增並將最後一個數字重設為零。 例如，將 `1.0.0` 更新為 `1.1.0`。
    
* **主要版本釋出：** 將第一個數字遞增，並將中間及最後的數字重設為零。例如，將 `1.1.0` 更新為 `2.0.0`。
    
做得很好。現在你知道如何將你的軟體包發佈到 npm 登錄檔，以及如何更新它以修正錯誤和添加新特性。

# --questions--

## --text--

在終端機中，將軟體包從你的區域機器上傳到 npm 登錄檔所使用的指令是什麼？

## --answers--

`npm install <package-name>`

### --feedback--

這是用來完成該處理程序的指令，使你的軟體包可供其他人安裝。

---

`npm start`

### --feedback--

這是用來完成該處理程序的指令，使你的軟體包可供其他人安裝。

---

`npm add`

### --feedback--

這是用來完成該處理程序的指令，使你的軟體包可供其他人安裝。

---

`npm publish`

## --video-solution--

4

## --text--

目錄中必須存在什麼檔案，才能向 npm 登錄檔發出該資料夾是一個完整且可安裝的軟體包的信號？

## --answers--

`README.md`

### --feedback--

請思考包含所有必要詮釋資料、相依性和 npm 專案設定的檔案。

---

`index.js`

### --feedback--

請思考包含所有必要詮釋資料、相依性和 npm 專案設定的檔案。

---

`package.json`

---

`.npmignore`

### --feedback--

請思考包含所有必要詮釋資料、相依性和 npm 專案設定的檔案。

## --video-solution--

3

## --text--

你應該採取哪個動作以確保在發佈軟體包時不包含敏感資訊？

## --answers--

在執行 `npm publish` 之前，暫時從專案資料夾刪除這些檔案。

### --feedback--

npm 使用特定的檔案來決定要從發佈的軟體包中排除什麼。

---

使用 `.ignore` 檔案來列出敏感檔案。

### --feedback--

npm 使用特定的檔案來決定要從發佈的軟體包中排除什麼。

---

使用 `.npmignore` 檔案來列出敏感檔案。

---

在 `package.json` 中將 `private` 欄位設為 `true`。

### --feedback--

npm 使用特定的檔案來決定要從發佈的軟體包中排除什麼。

## --video-solution--

3
