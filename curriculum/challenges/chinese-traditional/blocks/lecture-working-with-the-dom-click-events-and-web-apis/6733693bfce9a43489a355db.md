---
id: 6733693bfce9a43489a355db
title: 什麼是 `DOMContentLoaded` 事件，以及它如何運作？
challengeType: 19
dashedName: what-is-the-domcontentloaded-event-and-how-does-it-work
---

# --interactive--

當 HTML 文件中的所有內容都已載入並解析完成時，會觸發 `DOMContentLoaded` 事件。如果你有外部樣式表或影像，`DOMContentLoaded` 事件不會等待那些載入。它只會等待 HTML 載入完成。

這與 `load` 事件不同，`load` 事件會等待所有內容載入完成，包括外部樣式表、影像等等。

以下是使用 `DOMContentLoaded` 事件的範例語法：

```js
document.addEventListener("DOMContentLoaded", function () {
  console.log("DOM is loaded.");
});
```

一旦 DOM 載入，該函式（程式）將會被執行，並且 `DOM is loaded.` 訊息會被記錄到主控台。

現在，讓我們來看看另一個使用 `DOMContentLoaded` 事件的範例。在這個範例中，我們在 HTML 裡有一個影像。為了更新影像，我們可以創建一個函式，改變影像的 `src` 和 `alt` 屬性：

:::interactive_editor

```html
<h1>Image Change on DOM Loaded</h1>
<img
  id="example-img"
  src="https://cdn.freecodecamp.org/curriculum/cat-photo-app/relaxing-cat.jpg"
  alt="Cat relaxing"
/>

<script src="index.js"></script>
```

```js
function changeImg() {
  const img = document.getElementById("example-img");
  img.src =
    "https://cdn.freecodecamp.org/curriculum/responsive-web-design-principles/FCCStickers-CamperBot200x200.jpg";
  img.alt = "CamperBot sticker";
  console.log("image was just changed");
}

changeImg();
```

:::

接著我們可以檢查 DOM 是否仍在載入中，並為 `DOMContentLoaded` 事件添加監聽器。如果 `DOMContentLoaded` 事件已經觸發，我們可以直接呼叫 `changeImg` 函式（程式）：

```js
if (document.readyState === "loading") {
  document.addEventListener("DOMContentLoaded", changeImg);
} else {
  console.log("DOMContentLoaded has already fired");
  changeImg();
}
```

如果你執行這段 `code`，並重新整理頁面，你會看到在 DOM 載入後，影像變更為新的影像。這個過程相當快速，但你會看到影像變更時有輕微的閃爍。

當你想在 DOM 載入後，但在所有外部資源如影像和樣式表載入之前，立即執行一些 JavaScript 程式碼時，`DOMContentLoaded` 事件非常有用。

# --questions--

## --text--

`DOMContentLoaded` 事件代表什麼？

## --answers--

所有外部資源皆已完全載入。

### --feedback--

此事件不會等待影像或樣式表。

---

HTML 文件已完全載入並解析。

---

瀏覽器已完成頁面的呈現。

### --feedback--

此事件不會等待影像或樣式表。

---

頁面上的所有影像皆已完全載入。

### --feedback--

此事件不會等待影像或樣式表。

## --video-solution--

2

## --text--

`DOMContentLoaded` 事件與 `load` 事件有何不同？

## --answers--

`DOMContentLoaded` 會等待影像載入，而 load 則不會。

### --feedback--

考慮每個事件等待的資源。

---

`DOMContentLoaded` 在所有資源載入之前觸發，而 `load` 則會等待所有資源載入完成。

---

`DOMContentLoaded` 僅能用於外部腳本。

### --feedback--

考慮每個事件等待的資源。

---

沒有差別；它們是相同的事件。

### --feedback--

考慮每個事件等待的資源。

## --video-solution--

2

## --text--

在提供的範例中，如果在腳本執行時 `DOMContentLoaded` 事件已經觸發，會發生什麼情況？

## --answers--

影像完全不會改變。

### --feedback--

思考程式碼中的條件檢查。

---

會發生錯誤。

### --feedback--

思考程式碼中的條件檢查。

---

會直接呼叫 `changeImg` 函式（程式）。

---

事件監聽器將會再次被添加。

### --feedback--

思考程式碼中的條件檢查。

## --video-solution--

3
