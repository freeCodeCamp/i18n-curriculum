---
id: 6723ce555ff2dfc0cc04b69a
title: 使用 JavaScript 进行表单验证回顾
challengeType: 31
dashedName: review-form-validation-with-javascript
---

# --interactive--

## 使用 JavaScript 验证形式

- **约束验证 API**：某些超文本标记语言元素，如 `textarea` 和 `input` 元素，暴露了约束验证 API。该 API 允许你断言用户为该元素提供的值通过你编写的任何超文本标记语言级别的验证，例如最小长度或模式匹配。
- **`checkValidity()` 方法**：如果元素匹配所有基于其属性的超文本标记语言验证，则此方法返回 `true`，如果验证失败，则返回 `false`。

:::interactive_editor

```html
<form>
  <label>
    Email:
    <input
      id="email"
      type="email"
      required
      pattern=".+\.com$"
      placeholder="example@site.com"
    />
  </label>
</form>

<script>
  const input = document.getElementById("email");

  input.addEventListener("input", (e) => {
    if (!e.target.checkValidity()) {
      e.target.setCustomValidity("You must use a .com email.");
    } else {
      e.target.setCustomValidity("");
    }
  });
</script>
```

:::

- **`reportValidity()` 方法**：此方法告诉浏览器 `input` 无效。

:::interactive_editor

```html
<form>
  <label>
    Email:
    <input
      id="email2"
      type="email"
      required
      pattern=".+\.com$"
      placeholder="example@site.com"
    />
  </label>
</form>

<script>
  const input = document.getElementById("email2");

  input.addEventListener("input", (e) => {
    if (!e.target.checkValidity()) {
      e.target.reportValidity();
    }
  });
</script>
```

:::

- **`validity` 属性**：此属性用于获取或设置形式控件（如 `<input>`、`<select>` 等）的有效性状态，并提供有关用户输入是否符合为该元素定义的约束（例如，`required` 字段、模式约束、最大长度等）的信息。

:::interactive_editor

```html
<input
  id="age"
  type="number"
  min="18"
  placeholder="Enter age (18+)"
/>

<script>
  const input = document.getElementById("age");

  input.addEventListener("input", (e) => {
    console.log(e.target.validity);
  });
</script>
```

:::

- **`patternMismatch` 属性**：如果值不匹配指定的正则表达式模式，则该属性为 `true`。

## `preventDefault()` 方法

- **定义**：DOM 中每个触发的事件都有某种默认行为。复选框上的点击事件默认会切换该复选框的状态。按下聚焦按钮上的空格键会激活该按钮。对这些 `Event` 对象调用的 `preventDefault()` 方法会阻止该行为发生。

:::interactive_editor

```html
<form id="form">
  <input type="text" placeholder="Try to submit" />
  <button type="submit">Submit</button>
</form>

<p id="status"></p>

<script>
  const form = document.getElementById("form");
  const status = document.getElementById("status");

  form.addEventListener("submit", (event) => {
    event.preventDefault();
    status.textContent = "Form submission prevented.";
  });
</script>
```

:::

## 提交表单

- **定义**：表单可以通过三种方式提交。第一种是用户点击表单中 `type` 属性设置为 `submit` 的按钮。第二种是用户在表单中任何可编辑的 `input` 字段上按下 `Enter` 键。第三种是通过 JavaScript 调用 `form` 元素的 `requestSubmit()` 或 `submit()` 方法。
- **`action` 属性**：`action` 属性应包含一个 URL 或当前域的相对路径。该值决定了表单尝试发送数据的位置——如果你未设置 `action` 属性，表单将把数据发送到当前页面的 URL。

```html
<form action="https://freecodecamp.org" method="GET">
  <input
    type="number"
    name="number"
    placeholder="Enter a number"
  />
  <button type="submit">Submit</button>
</form>
```

- **`method` 属性**：此属性接受标准的 `HTTP` 方法，例如 `GET` 或 `POST`，并在向操作 URL 发起请求时使用该方法。当未设置方法时，表单将默认使用 `GET` 请求。表单中的数据将作为 `name=value` 点对进行 URL 编码，并作为查询参数追加到操作 URL。

```html
<form action="/data" method="POST">
  <input
    type="number"
    id="input"
    placeholder="Enter a number"
    name="number"
  />
  <button type="submit">Submit</button>
</form>
```

- **`enctype` 属性**：`form` 元素接受一个 `enctype` 属性，该属性表现用于数据的编码类型。此属性仅接受三个值：`application/x-www-form-urlencoded`（这是默认值，将数据作为 URL 编码的形式体发送）、`text/plain`（以纯文本形式发送数据，使用换行符分隔的 `name=value` 点对），或 `multipart/form-data`，专门用于处理带有文件上传的形式。


# --assignment--

复习使用 JavaScript 的表单验证主题和概念。
