---
id: 68dd97fbd18ede5ae983e343
title: 当一个 `form` 被提交时会发生什么，以及不同的 `form` 提交是如何工作的？
challengeType: 19
dashedName: what-happens-when-a-form-is-submitted-and-how-do-the-different-form-submissions-work
---

# --description--

网站和应用需要收集数据并处理它，或生成用户需要的内容，例如搜索结果。所以，就像文本一样，表单也是网络的基本组成部分。

通过表单，用户可以注册并登录网站，发送消息，以及查找项。例如，你通过在网络上最流行的表单——Google 搜索输入中输入你的查询，从而访问 Google 搜索结果页面。

让我们看看构成一个形式的内容，比如输入字段、`action` 属性、形式方法，以及最重要的，当你提交一个形式时会发生什么。

表单通过 `form` 元素嵌入在网页中，但要显示输入，还需要根据你的需求添加 `input` 元素。这些输入元素包括文本、电子邮件、密码、选择、文件、隐藏输入等。

要使用这些输入字段，必须将它们包裹在 `form` 元素中。每个输入都需要一个 `name` 属性，以便服务器知道哪些数据对应哪个字段。

这是一个示例：

```html
<form>
   <input type="text" name="username" />
   <input type="email" name="email" />
   <input type="file" name="profilePicture" />
   <input type="radio" name="gender" />
   <input type="checkbox" name="subscribe" />
   <input type="hidden" name="userId" />
</form>
```

输入字段也需要被验证，以确保用户输入正确的信息。

此验证可以在客户端和服务器端同时进行。超文本标记语言允许你使用 `required` 和 `pattern` 属性进行基本的客户端验证。即便如此，你也应该在服务器端进行验证以增强安全性，因为超文本标记语言验证主要用于用户体验和即时反馈。

`required` 属性指定输入字段必须填写，而 `pattern` 属性允许你输入正则表达式，迫使用户以你需要的方式输入信息。

这是一个用户名字段的示例：

```html
<input type="text" name="username" required pattern="[A-Za-z0-9]{3,}" />
```

在输入字段通过验证后，应进行提交。那么当表单提交时会发生什么？

首先，为了提交，表单需要有一个 `action` 属性，指定浏览器应将输入字段的值发送到哪里，以及一个 `method` 属性，指定表单数据如何提交。稍后会详细介绍 `method` 属性。

下面是一个动作属性可能的样子：

```html
<form action="/register">
	<!-- input fields -->
</form>
```

`method` 属性可以是 `GET`、`POST`、`PUT`、`PATCH` 或 `DELETE`：

* `GET` 从服务器检索内容，例如，查找结果。
    
* `POST` 将内容发送到服务器，例如通过输入字段输入的登录或注册信息。
    
* `PUT` 修改服务器上的某些内容。
    
* `PATCH` 部分修改服务器上的内容。
    
* `DELETE` 从服务器中删除某些内容。
    
请注意，超文本标记语言不直接支持 `PUT`、`PATCH` 和 `DELETE` 方法，但有解决方法。如果你使用原生 JavaScript，可以使用 Fetch API 指定方法，在 Node.js 和 Express 中，可以使用 `method-override` 包。

下面是一个发出 `GET` 请求的形式示例：

```html
<form action="/search" method="GET">
   <input type="text" name="q">
   <button type="submit">Search</button>
</form>
```

下面是一个发起 `POST` 请求的形式示例：

```html
<form action="/submit" method="POST">
   <input type="text" name="username" required pattern="[A-Za-z0-9]{3,}" />
   <input type="password" name="password" />
   <button type="submit">Submit</button>
</form>
```

在 `GET` 或 `POST` 请求之后，服务器查看服务器端验证，然后处理或拒绝输入值。

如果验证成功，服务器将发送请求的信息；如果验证失败，则抛出误差。 

如果验证成功，服务器的响应可能是在认证或查找的分支中进行重定向，或者是确认操作的成功消息。

以下是提交 `form` 时发生的情况回顾：

* 用户填写表单字段。
    
* 浏览器会查看客户端验证（如果有的话），并在验证成功后继续。
    
* 浏览器根据 `action` 和 `method` 属性将表单数据发送到服务器。
    
* 服务器接收数据并处理它（将其存储在数据库中、注册用户、用户登录、发送查找查询等）。
    
* 如果存在服务器端验证，服务器会在处理之前重新查看数据。
    
* 服务器根据验证状态（成功或失败）响应成功消息、误差或重定向用户。
    
* 用户根据服务器响应看到反馈。

# --questions--

## --text--

你如何使用 `HTML` 执行客户端验证？

## --answers--

通过使用 `validate` 属性

### --feedback--

考虑那些帮助在没有 JavaScript 的情况下迫使输入规则的属性。

---

仅使用 JavaScript

### --feedback--

考虑那些帮助在没有 JavaScript 的情况下迫使输入规则的属性。

---

通过使用 `required` 和 `pattern` 属性

---

仅使用服务器端验证

### --feedback--

考虑那些帮助在没有 JavaScript 的情况下迫使输入规则的属性。

## --video-solution--

3

## --text--

在使用 Node.js 或 Express 时，如何在超文本标记语言形式中使用 `PUT`、`PATCH` 和 `DELETE` 方法的变通方法是什么？

## --answers--

超文本标记语言本地支持这些方法

### --feedback--

超文本标记语言 形式不直接支持这些方法，但存在变通方法。

---

通过在 JavaScript 中使用 Fetch API

### --feedback--

超文本标记语言 形式不直接支持这些方法，但存在变通方法。

---

通过在表单中使用 `method="PUT"` 属性

### --feedback--

超文本标记语言 形式不直接支持这些方法，但存在变通方法。

---

通过使用 `method-override` 包

## --video-solution--

4

## --text--

`PUT` 和 `PATCH` 超文本传输协议方法之间有什么区别？

## --answers--

`PUT` 修改服务器上的某些内容，而 `PATCH` 部分修改它

---

`PATCH` 删除数据，而 `PUT` 更新数据

### --feedback--

一个更新整个资源，另一个进行部分更改。

---

`PUT` 用于检索数据，而 `PATCH` 用于发送数据

### --feedback--

一个更新整个资源，另一个进行部分更改。

---

`PATCH` 替换整个资源，而 `PUT` 仅修改部分内容

### --feedback--

一个更新整个资源，另一个进行部分更改。

## --video-solution--

1
