---
id: 5e601c775ac9d0ecd8b94aff
title: 安全即時多人遊戲
challengeType: 4
forumTopicId: 462375
dashedName: secure-real-time-multiplayer-game
---

# --description--

使用 HTML Canvas API 和 Socket.io 開發一款 2D 即時多人遊戲，其功能類似於此：<a href="https://secure-real-time-multiplayer-game.freecodecamp.rocks/" target="_blank" rel="noopener noreferrer nofollow">https://secure-real-time-multiplayer-game.freecodecamp.rocks/</a>。進行此專案時，你將使用以下其中一種方法撰寫你的程式碼：

-   複製 <a href="https://github.com/freeCodeCamp/boilerplate-project-secure-real-time-multiplayer-game/" target="_blank" rel="noopener noreferrer nofollow">這個 GitHub 倉庫</a> 並在區域完成你的專案。
-   使用你選擇的網站建置工具來完成專案。務必將我們 GitHub 倉庫中的所有檔案納入其中。

# --instructions--

創建一個安全的多人遊戲，其中每個玩家都可以移動他們的 avatar，至少有一個可收集的項目，並且玩家的等級是根據他們的分數計算的。

詳細資訊請參閱以下測試。

確保你的遊戲是安全的！包含這些安全措施：

- 客戶端不應該能夠猜測或嗅探 MIME 型別
- 防止 XSS 攻擊
- 不要在客戶端快取網站上的任何內容。
- 標題顯示該網站是由 `PHP 7.4.3` 威力本源。

**注意**：`helmet@^3.21.3` 是用於使用者故事所需的。這表示你將需要使用 Helmet 先前版本的文件，以取得如何實現使用者故事的資訊。

# --hints--

你可以提供你自己的專案，而非範例 URL。

```js
  assert(
    !/.*\/secure-real-time-multiplayer-game\.freecodecamp\.rocks/.test(
      code
    )
  );
```

多位玩家可以連接到伺服器並進行遊戲。

```js

```

每個玩家都有一個頭像。

```js

```

每個玩家都由 `Player.mjs` 中 `Player` 類別創建的物件表述。

```js

```

每個玩家物件至少應包含唯一的 `id`、`score`，以及表述玩家當前位置的 `x` 和 `y` 座標。

```js

```

遊戲至少有一種可收集的項目。完成 `Collectible.mjs` 中的 `Collectible` 類別以實作此功能。

```js

```

每個由 `Collectible` 類別創建的可收集項目物件至少應包含唯一的 `id`、`value`，以及表述該項目當前位置的 `x` 和 `y` 座標。

```js

```

玩家可以使用 WASD 和／或方向鍵來移動他們的角色。完成 `Player.mjs` 中的 `movePlayer` 方法以實作此功能。

```js

```

`movePlayer` 方法應該接受兩個引數：一個為「up」、「down」、「left」或「right」的字串，另一個為玩家位置應該改變的像素數量。`movePlayer` 應該調整它被呼叫的玩家物件的 `x` 和 `y` 座標。

```js

```

玩家的分數應該用來計算他們在其他玩家中的等級。完成 `Player` 類別中的 `calculateRank` 方法以實作此功能。

```js

```

`calculateRank` 方法應該接受一個表述所有連線玩家的物件陣列，並傳回字串 `Rank: currentRanking/totalPlayers`。例如，在一個有兩名玩家的遊戲中，如果玩家 A 的分數是 3，玩家 B 的分數是 5，則玩家 A 的 `calculateRank` 應該傳回 `Rank: 2/2`。

```js

```

玩家可以與可收集的項目碰撞。完成 `Player.mjs` 中的 `collision` 方法以實作此功能。

```js

```

`collision` 方法應該接受一個可收集項目的物件作為引數。如果玩家的虛擬角色與該項目相交，`collision` 方法應該傳回 `true`。

```js

```

所有玩家都保持同步。

```js

```

玩家可以隨時從遊戲中斷線。

```js

```

防止客戶端嘗試猜測／嗅探 MIME 型別。

```js
  const data = await fetch(code + '/_api/app-info');
  const parsed = await data.json();
  assert.equal(parsed.headers['x-content-type-options'], 'nosniff');
```

防止跨站腳本（XSS）攻擊。

```js
  const data = await fetch(code + '/_api/app-info');
  const parsed = await data.json();
  assert.equal(parsed.headers['x-xss-protection'], '1; mode=block');
```

網站上的任何內容都不會被快取到客戶端。

```js
  const data = await fetch(code + '/_api/app-info');
  const parsed = await data.json();
  assert.equal(parsed.headers['surrogate-control'], 'no-store');
  assert.equal(
    parsed.headers['cache-control'],
    'no-store, no-cache, must-revalidate, proxy-revalidate'
  );
  assert.equal(parsed.headers['pragma'], 'no-cache');
  assert.equal(parsed.headers['expires'], '0');
```

標頭顯示該網站是由 `PHP 7.4.3` 威力本源，即使實際上並非如此（作為一種安全措施）。

```js
  const data = await fetch(code + '/_api/app-info');
  const parsed = await data.json();
  assert.equal(parsed.headers['x-powered-by'], 'PHP 7.4.3');
```
