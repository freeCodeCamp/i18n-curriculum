---
id: 6839e4ef24827717b838f54d
title: 什么是 Lambda 函数及其工作原理？
challengeType: 19
dashedName: what-are-lambda-functions-and-how-do-they-work
---

# --description--

在之前的课程中，你已经习惯了使用 `def` 关键字来定义函数，像这样：

```py
def square(num):
    return num ** 2

print(square(4)) # 16
```

但是当涉及使用像 `map()` 和 `filter()` 这样的高阶函数时，你可以使用匿名内联函数。这就是 lambda 函数的用武之地。

下面是将 `square()` 函数重构为 lambda 函数后的样子：

```py
lambda num: num ** 2
```

如前所述，lambda 函数是匿名的，因此这个函数不再有与之关联的名称 `square`。当你需要在像这样的一阶函数中使用它们时，lambda 函数非常有用：

```py
numbers = [1, 2, 3, 4, 5]

even_numbers = list(filter(lambda x: x % 2 == 0, numbers))
print(even_numbers)  # [2, 4]
```

在这个例子中，我们有一个数字列表，想要创建一个新的偶数列表。所以我们将一个 lambda 函数作为参数传递给 `filter()` 函数，以获得一个包含数字 `2` 和 `4` 的新列表。

在使用 lambda 函数时，了解最佳实践非常重要。例如，将 lambda 函数赋值给变量像这样做并不是一个好习惯：

```py
numbers = [1, 2, 3, 4, 5]

square = lambda x: x ** 2
squared_numbers = list(map(square, numbers))
print(squared_numbers) # [1, 4, 9, 16, 25]
```

这违背了使用匿名函数的初衷。在这种情况下，你应该使用常规函数，如下所示：

```py
numbers = [1, 2, 3, 4, 5]

def square(num):
    return num ** 2

squared_numbers = list(map(square, numbers))
print(squared_numbers) # [1, 4, 9, 16, 25]
```

此外，你应该避免创建难以读取或不必要复杂的 lambda 函数，比如这样：

```py
result = (lambda x: (x**2 + 2*x - 1) if x > 0 else (x**3 - x + 4))(3)
print(result)  # 14
```

虽然这个函数运行正常并产生正确的结果 `14`，但它不易阅读或查看。在这种情况下，最好创建一个带有 `if/else` 语句的单独函数，然后调用该函数：

```py
def calculate_expression(x):
    if x > 0:
        return x**2 + 2*x - 1
    else:
        return x**3 - x + 4

print(calculate_expression(3))  # 14
```

在 Python 程序中，常规函数和 lambda 函数都有它们的使用分支。如果你处理的是单个内联表达式，那么你可以考虑使用 lambda 函数。否则，使用常规函数是更好的选择。

# --questions--

## --text--

以下哪项是使用 lambda 函数的最佳分支？

## --answers--

定义一个包含多行和条件式逻辑的函数。

### --feedback--

考虑匿名单行函数最合适的时机。

---

在多个模块中创建可重用的函数。

### --feedback--

考虑匿名单行函数最合适的时机。

---

为在 `map()` 或 `filter()` 调用中使用编写一个小函数。

---

创建一个具有描述性名称以提高清晰度的 `function`。

### --feedback--

考虑匿名单行函数最合适的时机。

## --video-solution--

3

## --text--

为什么通常认为将 lambda 函数赋值给变量是不好的做法？

## --answers--

 它会导致语法误差。

### --feedback--

请记住，匿名函数应当是内联的，而不是命名的。

---

这违背了使用匿名函数的目的。

---

Lambda 函数比普通函数更慢。

### --feedback--

请记住，匿名函数应当是内联的，而不是命名的。

---

Python 在大多数版本中不允许这样做。

### --feedback--

请记住，匿名函数应当是内联的，而不是命名的。

## --video-solution--

2

## --text--

使用如下所示的复杂 lambda 函数的主要缺点是什么？

```py
result = (lambda x: (x**2 + 2*x - 1) if x > 0 else (x**3 - x + 4))(3)
```

## --answers--

它使代码更易于读取。

### --feedback--

查看课程最后部分以获取答案。

---

这可能导致由于歧义而出现意外行为。

### --feedback--

查看课程最后部分以获取答案。

---

理解和维护起来更困难。

---

执行它需要太多资源。

### --feedback--

查看课程最后部分以获取答案。

## --video-solution--

3
