---
id: 6733c5e54e3a154c8078ed48
title: 什麼是 Regex 量詞，以及它們如何運作？
challengeType: 19
dashedName: what-are-regex-quantifiers-and-how-do-they-work
---

# --interactive--

讓我們來了解正規表達式中的量詞。

考慮一個你想要比對四位數識別碼的情境。你知道你可以使用 `\d` 字元類別，所以你可能會寫四次。並且為了避免任何多餘的字元，你會包含起始和結束錨點：

```js
const regex = /^\d\d\d\d$/;
```

這確實有效－它會匹配四個數字字元。但與其多次寫出相同的類別，你可以為它指定一個量詞。

量詞由包含一個或兩個數字的大括號定義。讓我們在樣式中使用量詞：

```js
const regex = /^\d{4}$/;
```

注意我們的量詞只包含數字 `4`。這個語法表示「精確匹配前一個字元四次」。讓我們看看它的行為：

:::interactive_editor

```js
const regex = /^\d{4}$/;
console.log(regex.test("123")); // false
console.log(regex.test("1234")); // true
console.log(regex.test("12345")); // false
console.log(regex.test("123456")); // false
console.log(regex.test("1234567")); // false
```

:::

該樣式只會匹配恰好四位數字的字串，因為我們使用了錨點且量詞只允許恰好四位數字。但識別碼可能只需要至少四位數字。

若要允許四位數或更多位數，請在你的量詞中的數字後面添加逗號：

```js
const regex = /^\d{4,}$/;
```

現在，我們的語法允許樣式匹配四個或更多數字。讓我們測試它：

:::interactive_editor

```js
const regex = /^\d{4,}$/;
console.log(regex.test("123")); // false
console.log(regex.test("1234")); // true
console.log(regex.test("12345")); // true
console.log(regex.test("123456")); // true
console.log(regex.test("1234567")); // true
```

:::

七位數的識別符號相當長。這些識別符號應該最多有 6 位數，最少有 4 位數。為了達成這個目標，你可以在逗號後將第二個數字添加到你的量詞中：

```js
const regex = /^\d{4,6}$/;
```

現在我們的樣式不再符合七位數的識別符，因為它超過了我們六位數的最大值。

:::interactive_editor

```js
const regex = /^\d{4,6}$/;
console.log(regex.test("123")); // false
console.log(regex.test("1234")); // true
console.log(regex.test("12345")); // true
console.log(regex.test("123456")); // true
console.log(regex.test("1234567")); // false
```

:::

請注意，你不能單獨使用此語法來設定最大值－你必須始終設定最小值。但如果你將最小值設定為 `1`，你就可以有效地達成相同的結果。

我們已經收到來自使用者的更新需求。識別符號現在可以選用以字母開頭。我們已經知道這個字元類別，所以讓我們將它添加到我們的正規表達式中：

```js
const regex = /^[a-zA-Z]\d{4,6}$/;
```

但現在我們強制要求必須有一個字母。要如何讓它變成選用？

你可以使用量詞語法，將 `0` 設為最小值，`1` 設為最大值：

```js
const regex = /^[a-zA-Z]{0,1}\d{4,6}$/;
```

但其實有一個針對單一選用字元的特殊簡寫量詞－問號（`?`）。讓我們用問號取代我們的量詞：

```js
const regex = /^[a-zA-Z]?\d{4,6}$/;
```

我們應該驗證結果：

:::interactive_editor

```js
const regex = /^[a-zA-Z]?\d{4,6}$/;
console.log(regex.test("123")); // false
console.log(regex.test("a1234")); // true
console.log(regex.test("12345")); // true
console.log(regex.test("az12345")); // false
console.log(regex.test("X123456")); // true
console.log(regex.test("1234567")); // false
```

:::

我們的樣式現在允許一個單一選用字母，後接四到六個數字。

不幸地，我們剛剛發現我們讀錯了需求。我們需要允許在數字前有任意數量的字母。我們可以使用最小值為 `0` 且無定義最大值的量詞：

```js
const regex = /^[a-zA-Z]{0,}\d{4,6}$/;
```

但是我們的樣式又變長了。幸好，還有另一個簡寫用來「匹配前一個字元零次或多次」－ 星號（`*`）符號。讓我們用它來取代樣式中的量詞，並進行測試：

:::interactive_editor

```js
const regex = /^[a-zA-Z]*\d{4,6}$/;
console.log(regex.test("123")); // false
console.log(regex.test("a1234")); // true
console.log(regex.test("12345")); // true
console.log(regex.test("az12345")); // true
console.log(regex.test("X123456")); // true
console.log(regex.test("1234567")); // false
```

:::

現在我們成功匹配任何由零個或多個字母後接四到六個數字組成的識別字。但事實證明這會導致我們的系統當機－我們實際上必須要求至少有一個字母。

同樣地，我們可以使用最小值為 1 且無定義最大值的量詞，或者我們可以使用另一種特殊語法－加號（`+`）符號：

:::interactive_editor

```js
const regex = /^[a-zA-Z]+\d{4,6}$/;
console.log(regex.test("123")); // false
console.log(regex.test("a1234")); // true
console.log(regex.test("12345")); // false
console.log(regex.test("az12345")); // true
console.log(regex.test("X123456")); // true
console.log(regex.test("1234567")); // false
```

:::

現在不以至少一個字母開頭的識別字，不論有多少數字，都會失敗。

你可以使用量詞大幅提升你的正規表達式的簡潔性和可讀性。

# --questions--

## --text--

在正規表達式中，量詞 `{4,6}` 是什麼意思？

## --answers--

完全匹配四次或六次。

### --feedback--

請考慮量詞中指定的最小值和最大值。

---

至少匹配 4 次，但不超過 6 次。

---

比對總共四到六個字元。

### --feedback--

請考慮量詞中指定的最小值和最大值。

---

匹配四位或六位數字。

### --feedback--

請考慮量詞中指定的最小值和最大值。

## --video-solution--

2

## --text--

哪一個量詞符號在正規表達式中等價於 `{0,1}`？

## --answers--

`*`

### --feedback--

課程提到「單一選用字元的特殊簡寫量詞」。

---

`+`

### --feedback--

課程提到「單一選用字元的特殊簡寫量詞」。

---

`?`

---

`^`

### --feedback--

課程提到「單一選用字元的特殊簡寫量詞」。

## --video-solution--

3

## --text--

在正規表達式中，`+` 量詞代表什麼意思？

## --answers--

匹配零次或多次。

### --feedback--

本課程將此量詞描述為要求「至少一個」前面的元素。

---

精確匹配一次。

### --feedback--

本課程將此量詞描述為要求「至少一個」前面的元素。

---

匹配一次或多次。

---

匹配零次或一次。

### --feedback--

本課程將此量詞描述為要求「至少一個」前面的元素。

## --video-solution--

3
