---
id: 6732b284901f8c1539e20bcb
title: 如何在陣列中間添加和移除元素？
challengeType: 19
dashedName: how-do-you-add-remove-elements-from-the-middle-of-an-array
---

# --interactive--

JavaScript 中的 `splice()` 方法是一種強大的修改陣列的方式。它允許你從陣列中的任何位置（包括中間）添加或移除元素。`splice()` 方法的返回值將會是從陣列中移除的項目陣列。如果沒有移除任何項目，則會傳回一個空陣列。

重要的是要注意，這個方法會變更原始陣列，直接在原地修改它，而不是建立新的陣列。當使用 `splice()` 時，這點需要特別留意。基本語法如下：

```js
array.splice(startIndex, itemsToRemove, item1, item2)
```

`startIndex` 指定開始修改陣列的索引，而 `itemsToRemove` 是一個選用參數，表示要移除多少個元素。如果省略 `itemsToRemove`，`splice()` 將會從 `startIndex` 移除陣列中所有元素直到結尾。後續的參數（`item1`、`item2` 等）是要從起始索引開始添加到陣列中的元素。

讓我們從一個從陣列中間移除元素的範例開始：

:::interactive_editor

```js
let fruits = ["apple", "banana", "orange", "mango", "kiwi"];
let removed = fruits.splice(2, 2);

console.log(fruits);  // ["apple", "banana", "kiwi"]
console.log(removed); // ["orange", "mango"]
```

:::

在這個範例中，`splice(2, 2)` 從索引 `2` 開始並移除 `2` 個元素。修改後的陣列現在只包含 `apple`、`banana` 和 `kiwi`。現在，讓我們來看看如何將元素添加到陣列的中間：

:::interactive_editor

```js
let colors = ["red", "green", "blue"];
colors.splice(1, 0, "yellow", "purple");

console.log(colors); // ["red", "yellow", "purple", "green", "blue"]
```

:::

這裡，`splice(1, 0, "yellow", "purple")` 從索引 `1` 開始，移除 `0` 個元素，並插入 yellow 和 purple。第二個參數（`0`）表示在插入之前不移除任何元素。你也可以使用 `splice()` 同時移除和添加元素：

:::interactive_editor

```js
let numbers = [1, 2, 3, 4, 5];
numbers.splice(1, 2, 6, 7, 8);

console.log(numbers); // [1, 6, 7, 8, 4, 5]
```

:::

在這種情況下，`splice(1, 2, 6, 7, 8)` 從索引 `1` 開始，移除 `2` 個元素（`2` 和 `3`），並插入 `6`、`7` 和 `8`。如果你需要保持原始陣列不變，應該在使用 `splice()` 之前創建一個副本：

:::interactive_editor

```js
let original = [1, 2, 3, 4, 5];
let copy = [...original];
copy.splice(2, 1, 6);

console.log(original); // [1, 2, 3, 4, 5]
console.log(copy);     // [1, 2, 6, 4, 5]
```

:::

在此範例中，為了在不修改 `original` 陣列的情況下創建其副本，我們使用展開運算子（`...`）。展開運算子會將 `original` 陣列的元素淺層複製到一個新的陣列中。你將在未來的課程中學到更多相關內容。

當我們使用 `copy.splice(2, 1, 6)` 時，它會修改 copy 陣列，移除索引為 `2`（即 `3`）的元素，並在該位置插入新元素 `6`。

`splice()` 的一個常見用例是在你知道索引時，從陣列中移除單一元素：

:::interactive_editor

```js
let fruits = ["apple", "banana", "orange", "mango"];
let indexToRemove = fruits.indexOf("orange");
if (indexToRemove !== -1) {
    fruits.splice(indexToRemove, 1);
}

console.log(fruits); // ["apple", "banana", "mango"]
```

:::

在這個範例中，我們首先使用 `indexOf()` 方法來尋找 `fruits` 陣列中元素 `orange` 的索引。`indexOf()` 方法會傳回指定元素第一次出現的索引，若陣列中找不到該元素，則傳回 `-1`。 

接著，我們將 `indexToRemove` 與 `-1` 進行比較，以確保該元素存在於陣列中，然後才嘗試將其移除。如果 `indexToRemove` 不相等於 `-1`（表示找到該元素），我們會使用 `splice()` 從 `indexToRemove` 位置開始移除一個元素。

你也可以使用 `splice()` 透過移除所有元素來清空陣列：

:::interactive_editor

```js
let array = [1, 2, 3, 4, 5];
array.splice(0);

console.log(array); // []
```

:::

雖然 `splice()` 很強大，但值得注意的是，對於非常大的陣列，當修改陣列開頭時，它可能比其他方法效率較低。這是因為 `splice()` 可能需要移動所有後續元素。在這種情況下，如果你只是在陣列末端添加或移除元素，像 `push()`、`pop()`、`unshift()` 和 `shift()` 這些方法可能更合適。

總結來說，`splice()` 方法是在 JavaScript 中修改陣列的多功能方式。它允許你精確控制從陣列中任何位置新增和移除元素。了解如何有效使用 `splice()` 可以大幅提升你操作 JavaScript 陣列的能力。

# --questions--

## --text--

以下 `code` 的輸出結果會是什麼？

```js
let arr = [1, 2, 3, 4, 5];
arr.splice(2, 0, 6, 7);
console.log(arr);
```

## --answers--

`[1, 2, 6, 7, 3, 4, 5]`

---

`[1, 2, 3, 4, 5, 6, 7]`

### --feedback--

考慮 `splice()` 方法中第二個參數（`0`）的意義。

---

`[1, 2, 3, 6, 7, 4, 5]`

### --feedback--

考慮 `splice()` 方法中第二個參數（`0`）的意義。

---

`[1, 2, 6, 7, 4, 5]`

### --feedback--

考慮 `splice()` 方法中第二個參數（`0`）的意義。

## --video-solution--

1

## --text--

以下哪一個 `splice()` 呼叫會從陣列中移除數字 3？

```js
let arr = [1, 2, 3, 4, 5];
```

## --answers--

`arr.splice(3, 1)`

### --feedback--

請記住，陣列索引從 0 開始。

---

`arr.splice(3, 0)`

### --feedback--

請記住，陣列索引從 0 開始。 

---

`arr.splice(2, 1)`

---

`arr.splice(arr.length - 2, 1)`

### --feedback--

請記住，陣列索引從 0 開始。

## --video-solution--

3

## --text--

`splice()` 方法傳回什麼？

## --answers--

修改後的陣列。

### --feedback--

考慮在從陣列中移除元素後，哪些資訊可能會有用。

---

移除的元素數量。

### --feedback--

考慮在從陣列中移除元素後，哪些資訊可能會有用。

---

包含已移除元素的陣列。

---

`undefined`

### --feedback--

考慮在從陣列中移除元素後，哪些資訊可能會有用。

## --video-solution--

3
