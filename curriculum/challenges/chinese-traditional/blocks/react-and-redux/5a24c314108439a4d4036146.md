---
id: 5a24c314108439a4d4036146
title: 將 Dispatch 映射到 Props
challengeType: 6
forumTopicId: 301432
dashedName: map-dispatch-to-props
---

# --description--

`mapDispatchToProps()` 函式用於為你的 React 組件提供特定的動作建立者，以便它們可以對 Redux 儲存庫分派動作。它的結構類似於你在上一個挑戰中撰寫的 `mapStateToProps()` 函式。它傳回一個物件，將分派動作對應到屬性名稱，這些名稱會成為組件的 `props`。然而，每個屬性傳回一個函式，該函式會使用動作建立者和任何相關的動作資料呼叫 `dispatch`，而不是傳回一段 `state`。你可以存取這個 `dispatch`，因為當你定義函式時，它會作為參數傳入 `mapDispatchToProps()`，就像你將 `state` 傳入 `mapStateToProps()` 一樣。在背後，React Redux 使用 Redux 的 `store.dispatch()` 來透過 `mapDispatchToProps()` 執行這些分派。這類似於它如何使用 `store.subscribe()` 來處理映射到 `state` 的組件。

例如，你有一個 `loginUser()` 動作建立器，它以 `username` 作為動作的有效載荷。從 `mapDispatchToProps()` 為這個動作建立器傳回的物件看起來會像這樣：

```jsx
{
  submitLoginUser: function(username) {
    dispatch(loginUser(username));
  }
}
```

# --instructions--

程式碼編輯器提供一個名為 `addMessage()` 的動作建立器。撰寫函式 `mapDispatchToProps()`，該函式以 `dispatch` 作為引數，然後傳回一個物件。該物件應該有一個屬性 `submitNewMessage`，設定為分派函式，該函式在分派 `addMessage()` 時會帶入要新增的新訊息作為參數。

# --hints--

`addMessage` 應該傳回一個具有鍵 `type` 和 `message` 的物件。

```js
assert(
  (function () {
    const addMessageTest = addMessage();
    return (
      addMessageTest.hasOwnProperty('type') &&
      addMessageTest.hasOwnProperty('message')
    );
  })()
);
```

`mapDispatchToProps` 應該是一個函式（程式）。

```js
assert(typeof mapDispatchToProps === 'function');
```

`mapDispatchToProps` 應該傳回一個物件。

```js
assert(typeof mapDispatchToProps() === 'object');
```

從 `mapDispatchToProps` 分派 `addMessage` 並帶有 `submitNewMessage`，應該傳回一個訊息給分派函式（function）。

```js
assert(
  (function () {
    let testAction;
    const dispatch = (fn) => {
      testAction = fn;
    };
    let dispatchFn = mapDispatchToProps(dispatch);
    dispatchFn.submitNewMessage('__TEST__MESSAGE__');
    return (
      testAction.type === 'ADD' && testAction.message === '__TEST__MESSAGE__'
    );
  })()
);
```

# --seed--

## --seed-contents--

```jsx
const addMessage = (message) => {
  return {
    type: 'ADD',
    message: message
  }
};

// Change code below this line
```

# --solutions--

```jsx
const addMessage = (message) => {
  return {
    type: 'ADD',
    message: message
  }
};

// Change code below this line

const mapDispatchToProps = (dispatch) => {
  return {
    submitNewMessage: function(message) {
      dispatch(addMessage(message));
    }
  }
};
```
