---
id: 6733bee844600f35c05b8264
title: try...catch...finally 如何運作？
challengeType: 19
dashedName: how-does-try-catch-finally-work
---

# --interactive--

在上一課中，你學會了如何在你的程式中丟出例外。在本課中，我們將探討如何在 `try…catch…finally` 區塊中優雅地控制這些錯誤。

`try` 區塊用來包裹可能會丟出錯誤的程式碼。它作為一個安全的空間來嘗試可能會失敗的操作。

`catch` 區塊會捕捉並處理發生在 `try` 區塊中的錯誤。你可以在 `catch` 中使用 `Error` 物件來檢查錯誤原因。

`finally` 區塊會在 `try` 和 `catch` 區塊之後執行，無論是否發生錯誤。它通常用於清理工作，例如關閉檔案或釋放資源。

以下是使用 `try…catch` 區塊的範例：

:::interactive_editor

```js
function processInput(input) {
  if (typeof input !== "string") {
    throw new TypeError("Input must be a string.");
  }

  return input.toUpperCase();
}

try {
  console.log("Starting to process input...");
  const result = processInput(9);
  console.log("Processed result:", result);
} catch (error) {
  console.error("Error occurred:", error.message);
} 
```

:::

在此範例中，我們有一個名為 `processInput` 的函式（程式），它首先檢查 `input` 是否不是 `string` 型別。如果是這種情況，則我們會丟出錯誤。否則，我們傳回對 `input` 使用 `toUpperCase` 方法的結果。

我們在 `try` 區塊內呼叫函式。由於函式呼叫會丟出錯誤，因此錯誤會被 `catch` 區塊捕捉，並且錯誤訊息會顯示在主控台。 

傳入 `catch` 區塊的錯誤是一個 `Error` 物件，該物件包含關於該錯誤的資訊。在此情況下，我們使用 `message` 屬性來顯示給使用者可讀的資訊。 

我們使用 `console.error`，因為它是專門設計用來記錄錯誤的。在許多現代瀏覽器中，`console.error()` 的輸出會以紅色顯示在主控台中。

無論是否有丟出例外，`finally` 述語都會被執行。

```js
try {
  // Code that might throw an error
} catch (error) {
  // Code to handle the error
} finally {
  // Code that runs regardless of whether an error occurred or not
}
```

`finally` 述語的一個良好使用案例是當你正在處理檔案時。在 JavaScript 中，你可以打開一個檔案，使用 `try` 區塊將資料寫入檔案。如果有任何錯誤，你可以使用 `catch` 來捕捉那些錯誤。然後使用 `finally` 述語來關閉檔案。

# --questions--

## --text--

`try` 區塊最能描述的是什麼？

## --answers--

它用於在發生錯誤後自動再次執行程式碼。

### --feedback--

思考 `try…catch…finally` 述語中區塊的順序，以及每個區塊處理的任務型別。

---

它是用來處理錯誤的。

### --feedback--

思考 `try…catch…finally` 述語中區塊的順序，以及每個區塊處理的任務型別。

---

這是用於在發出錯誤之前的設定。

### --feedback--

思考 `try…catch…finally` 述語中區塊的順序，以及每個區塊處理的任務型別。

---

這是一個用於可能會丟出錯誤的程式碼的安全外覆。

## --video-solution--

4

## --text--

哪個區塊即使發生錯誤也會始終執行？

## --answers--

`try`

### --feedback--

這個區塊通常用於清理任務。

---

`catch`

### --feedback--

這個區塊通常用於清理任務。

---

`finally`

---

`throw`

### --feedback--

這個區塊通常用於清理任務。

## --video-solution--

3

## --text--

`catch` 區塊的目的為何？

## --answers--

執行可能會發出錯誤的程式碼。

### --feedback--

當 `try` 區塊中發生錯誤時，這個區塊會作用。

---

定義程式碼執行的安全空間。

### --feedback--

當 `try` 區塊中發生錯誤時，這個區塊會作用。

---

優雅地處理錯誤而不會使程式當機。

---

無論是否發生錯誤，都始終執行。

### --feedback--

當 `try` 區塊中發生錯誤時，這個區塊會作用。

## --video-solution--

3
