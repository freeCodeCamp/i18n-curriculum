---
id: 688291b65db00473e1136725
title: 什么是 CI/CD，CI 如何与 GitHub Actions 配合工作？
challengeType: 19
dashedName: what-is-ci-cd-and-how-does-ci-work-with-github-actions
---

# --description--

CI 代表持续集成，CD 代表持续交付或持续部署。这些进程共同允许你在确保这些更改可用后自动将更改部署到你的应用。

在 CI 管道中，你可能会对代码运行你的 linter 和测试。CI 管道通常在拉取请求上运行，以确保所做的更改不会破坏应用程序，也会在 `main` 分支上运行，以确保它已准备好部署。

CD 管道也可能在拉取请求上运行，如果你设置了预览环境，这样你就可以实时查看更改。但你也会在你的 `main` 分支上运行它，以便在更改被接受和合并时持续部署。

但是这些实际上如何与 GitHub Actions 一起工作？首先，我们需要了解 GitHub Actions 究竟是什么。GitHub Actions 提供临时的 runner（可以理解为临时计算机），允许你执行特定的命令。

操作通过 YAML 文件配置。你可以有多个文件来指定不同的操作以供运行。例如，你可能有一个文件用于你的 CI，另一个用于你的 CD。

让我们来看一个基本的 CI 示例：

```yml
name: Node.js CI
on:
  push:
    branches:
      - main
  pull_request:
    branches:
      - main

jobs:
  lint:
    name: Lint and Test
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Source Files
        uses: actions/checkout@v4

      - name: Use Node.js v22
        uses: actions/setup-node@v4
        with:
          node-version: 22

      - name: Setup pnpm
        uses: pnpm/action-setup@v2
        with:
          version: 10

      - name: Install Dependencies
        run: pnpm install

      - name: Lint Source Files
        run: pnpm run lint

      - name: Verify Build
        run: pnpm run build

      - name: Run Tests
        run: pnpm run test
```

这很多，所以我们来分解一下。先看第一部分：

```yml
name: Node.js CI
on:
  push:
    branches:
      - main
  pull_request:
    branches:
      - main
```

`name` 定义了操作本身的名称。它会出现在 PR 的状态查看部分等区域。`on` 属性定义了所谓的“工作流触发器”——这些是触发你的操作运行的事件。

在此示例中，当提交被推送到 `main` 时，我们运行该操作；当拉取请求的目标是 `main` 时，也会运行该操作。这意味着当有人发起拉取请求时，CI 会运行一次，合并时会再次运行。

`jobs` 部分是你定义你的动作实际执行内容的地方。`lint:` 密钥是一个任意密钥，用于定义该作业的内部名称。`name` 属性定义该特定作业的外部名称。`runs-on` 属性定义你的动作应在哪种环境中运行——在这个分支中，我们让它在最新支持的 Ubuntu 版本中运行。

`steps` 属性是魔法发生的地方。这个块定义了你的动作应执行的实际步骤。让我们来看一下那里第一个块：

```yml
      - name: Checkout Source Files
        uses: actions/checkout@v4
```

此步骤有两个属性，步骤应具有的 `name` 和一个 `uses` 属性。这个 `uses` 属性很特殊，因为它告诉动作运行器去从 GitHub 获取一个公共动作并运行它，而不是运行一个命令。`actions/checkout` 动作负责在你的运行器中克隆和设置仓库。

```yml
      - name: Use Node.js v22
        uses: actions/setup-node@v4
        with:
          node-version: 22

      - name: Setup pnpm
        uses: pnpm/action-setup@v2
        with:
          version: 10
```

接下来的两个块也使用第三方动作。这些步骤设置了 Node 和 pnpm 包管理器。它们都有一个 `with` 密钥，你可以使用它向这些第三方动作传递参数。把这看作是向函数传递参数。

最后四个块才是真正发生魔法的地方。

```yml
      - name: Install Dependencies
        run: pnpm install

      - name: Lint Source Files
        run: pnpm run lint

      - name: Verify Build
        run: pnpm run build

      - name: Run Tests
        run: pnpm run test
```

我们有一个 `Install Dependencies` 块，用于安装 npm 包。我们的 `Lint Source Files` 块运行代码检查器，`Verify Build` 块确保 Typescript 代码可以编译，`Run Tests` 块运行单元测试。

关于动作，重要的是要知道，默认情况下，如果其中一个步骤失败，剩余的步骤将被跳过，整个 `run` 将被标记为失败。

你把 YAML 文件放在哪里才能运行这些操作？它们需要放在你的仓库中的 `.github/workflows` 目录，以便 GitHub 查找并使用它们。

操作可以执行许多额外的功能，我鼓励你阅读文档并探索像 freeCodeCamp 仓库这样的项目中现有的操作。但现在，你应该对 GitHub Actions 和 CI/CD 的基础知识有一个不错的理解！

# --questions--

## --text--

GitHub Actions 工作流 `file` 中的 `on` 属性定义了什么？

## --answers--

操作的名称。

### --feedback--

考虑你希望你的动作何时自动运行。

---

触发工作流运行的事件。

---

要运行的操作系统。

### --feedback--

考虑你希望你的动作何时自动运行。

---

执行步骤。

### --feedback--

考虑你希望你的动作何时自动运行。

## --video-solution--

2

## --text--

GitHub Actions 工作流 YAML 文件应该放置在仓库的哪里？

## --answers--

在根目录。

### --feedback--

GitHub 会在特定的目录结构中查找工作流文件。

---

在 `.github/actions` 目录中。

### --feedback--

GitHub 会在特定的目录结构中查找工作流文件。

---

在 `.github/workflows` 目录中。

---

在 `workflows` 目录中。

### --feedback--

GitHub 会在特定的目录结构中查找工作流文件。

## --video-solution--

3

## --text--

当 GitHub Actions 工作流中的步骤失败时，默认会发生什么？

## --answers--

工作流继续，带有警告。

### --feedback--

考虑 GitHub Actions 如何处理工作流执行中的误差。

---

只有该特定步骤被标记为失败。

### --feedback--

考虑 GitHub Actions 如何处理工作流执行中的误差。

---

工作流从头开始重新启动。

### --feedback--

考虑 GitHub Actions 如何处理工作流执行中的误差。

---

剩余步骤将被跳过，且该运行被标记为失败。

## --video-solution--

4
