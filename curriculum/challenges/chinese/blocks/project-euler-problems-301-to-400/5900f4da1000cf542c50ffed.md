---
id: 5900f4da1000cf542c50ffed
title: '问题366：石头游戏III'
challengeType: 1
forumTopicId: 302027
dashedName: problem-366-stone-game-iii
---

# --description--

安东和伯恩哈德两位球员正在参加以下比赛。

有一堆 $n$ 颗石头。

设M（n）是第一个玩家在第一个回合的胜利位置可以获得的最大结石数，M（n）= 0表示任何其他位置。

此后，每个玩家可以移除最多两倍于他的对手在之前移动时所用的石头数量。

移除最后一块石头的玩家获胜。

例如 $n = 5$

如果第一个玩家拿走超过一块石头，下一位玩家将能够拿走所有剩余的石头。

如果第一个玩家拿走一块石头，留下四块石头，他的对手也将拿走一块石头，留下三块石头。

第一个玩家不能拿走全部三个，因为他最多只能拿 $2 \times 1 = 2$ 颗石头。所以假设他也拿走一颗，剩下 2 颗。

第二个玩家可以拿走剩下的两块石头并获胜。

所以5对于第一个玩家来说是一个失败的位置。

对于一些获胜位置，第一个玩家可能有多个可能的移动。

例如，当 $n = 17$ 时，第一个玩家可以移除一块或四块石头。

设 $M(n)$ 为第一位玩家在其首次回合中从必胜局面中能拿走的最多石子数，且对于任何其他局面，$M(n) = 0$。

$\sum M(n)$ 对于 $n ≤ 100$ 是 728。

查找 $\sum M(n)$，其中 $n ≤ {10}^{18}$。将你的答案对 ${10}^8$ 取模。

# --hints--

`stoneGameThree()` 应该返回 `88351299`。

```js
assert.strictEqual(stoneGameThree(), 88351299);
```

# --seed--

## --seed-contents--

```js
function stoneGameThree() {

  return true;
}

stoneGameThree();
```

# --solutions--

```js
// solution required
```
