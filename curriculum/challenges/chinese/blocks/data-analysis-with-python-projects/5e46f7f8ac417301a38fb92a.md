---
id: 5e46f7f8ac417301a38fb92a
title: 医疗数据可视化工具
challengeType: 10
forumTopicId: 462368
dashedName: medical-data-visualizer
---

# --description--

你将使用我们的 Ona 启动代码<a href="https://app.ona.com/?autostart=true#https://github.com/freeCodeCamp/boilerplate-medical-data-visualizer/" target="_blank" rel="noopener noreferrer nofollow">来完成这个项目</a>。

我们仍在开发Python课程的交互式教学部分 目前，你可以在 freeCodeCamp.org 的 YouTube 频道中通过视频学习到这个项目相关的所有知识

- <a href="https://www.freecodecamp.org/news/python-for-everybody/" target="_blank" rel="noopener noreferrer nofollow">Python for Everybody 视频课程</a>（14 小时）

- <a href="https://www.freecodecamp.org/news/how-to-analyze-data-with-python-pandas/" target="_blank" rel="noopener noreferrer nofollow">如何使用 Python Pandas 分析数据</a>（10 小时）

# --instructions--

在本项目中，您将使用`matplotlib`， `seaborn`，和`pandas`对医疗检查数据进行可视化和计算。 数据集的数值是从体检中收集的。

## 数据说明

数据集中的行代表患者，列代表身体测量、各种血液检查的结果和生活方式等信息。 您将使用该数据集来探索心脏病、身体测量数据、血液标志物和对生活方式的选择之间的关系。

文件名：medical_examination.csv

| Feature | Variable Type | Variable      | Value Type |
|:-------:|:------------:|:-------------:|:----------:|
| Age | Objective Feature | `age` | int (days) |
| Height | Objective Feature | `height` | int (cm) |
| Weight | Objective Feature | `weight` | float (kg) |
| Gender | Objective Feature | `gender` | categorical code |
| Systolic blood pressure | Examination Feature | `ap_hi` | int |
| Diastolic blood pressure | Examination Feature | `ap_lo` | int |
| Cholesterol | Examination Feature | `cholesterol` | 1: normal, 2: above normal, 3: well above normal |
| Glucose | Examination Feature | `gluc` | 1: normal, 2: above normal, 3: well above normal |
| Smoking | Subjective Feature | `smoke` | binary |
| Alcohol intake | Subjective Feature | `alco` | binary |
| Physical activity | Subjective Feature | `active` | binary |
| Presence or absence of cardiovascular disease | Target Variable | `cardio` | binary |


## 说明

创建一个类似于`examples/Figure_1.png`的图表，在该图表中展示`cholesterol`、`gluc`、`alco`、`active`和`smoke`变量的良性与不良结果计数，并针对`cardio=1`和`cardio=0`的患者分别显示在不同子图中。

按照`medical_data_visualizer.py`文件的每个编号，从下面的相关指令编号中添加代码。

1. 从 `medical_examination.csv` 导入数据，然后赋值给`df` 变量。
2. 向数据中添加一个`overweight`列。 要确定一个人是否超重，首先要用体重（公斤）除以身高（米）的平方来计算BMI。  If that value is > 25 then the person is overweight. 使用值`0`表示未超重，值`1`表示超重。
3. 用`0`始终表示良好、`1`始终表示不良来标准化数据。 如果`cholesterol`或`gluc`的值为1，则将其值设置为`0`。 若值大于 `1`，就将值设置为 `1`。
4. 在`draw_cat_plot`函数中绘制分类图。
5. 使用`pd.melt`创建一个用于分类图的DataFrame，其中包含`df_cat`变量中的`cholesterol`、`gluc`、`smoke`、`alco`、`active`和`overweight`值。
6. 对`df_cat`中的数据进行分组和重构，以按照`cardio`进行拆分。 展示每个特征的计数。 您需要重命名其中一个列才能使`catplot`正常工作。
7. 将数据转换为`long`格式，并使用seaborn库提供的`sns.catplot()`方法创建显示分类特征值计数的图表。
8. 获取输出图形并将其存储在`fig`变量中。
9. 不要修改接下来的两行。
10. 在`draw_heat_map`函数中绘制热力图。
11. 通过过滤掉以下代表错误数据的患者群体来清洗`df_heat`变量中的数据：
    - 舒张压高于收缩压（保持正确的数据 `(df['ap_lo'] <= df['ap_hi'])`）
    - 身高低于第 2.5 百分位数（保持正确的数据使用 `(df['height'] >= df['height'].quantile(0.025))`）
    - 身高超过第 97.5 个百分位
    - 体重小于第 2.5 个百分位
    - 体重超过第 97.5 个百分位
12. 计算相关矩阵并将其存储在`corr`变量中。
13. 为上三角生成掩码并将其存储在`mask`变量中。
14. 设置`matplotlib`图形。
15. 使用`seaborn`库提供的`sns.heatmap()`方法绘制相关矩阵。
16. 不要修改接下来的两行。

## 开发

在 `medical_data_visualizer.py` 中输入您的代码。 对于开发，你可以使用 `main.py` 来测试你的代码。

## 测试

这个项目的单元测试在 `test_module.py` 中。 为了你的方便，我们将测试从 `test_module.py` 导入到 `main.py`。

## 提交

复制项目的 URL 并将其提交给 freeCodeCamp。

# --hints--

它应该通过所有的 Python 测试。

```js

```

# --solutions--

```py
  # Python challenges don't need solutions,
  # because they would need to be tested against a full working project.
  # Please check our contributing guidelines to learn more.
```
