---
id: 6882904fd7063f7258c0aef3
title: 你如何處理像 `SSH` 和 `GPG` 金鑰這類的安全需求？
challengeType: 19
dashedName: how-do-you-handle-security-requirements-like-ssh-and-gpg-keys
---

# --description--

在你可以將你的儲存庫推送到 GitHub 之前，你需要先通過驗證。SSH 和 GPG 金鑰都使用公私配對。這表示你會將私鑰保存在你的區域的機器上，用來驗證你自己。你會將公鑰分享給需要驗證你身份的人或服務。換句話說，執行動作需要私鑰，而驗證動作則使用公鑰。

GPG，或稱 Gnu Privacy Guard，金鑰通常用於為檔案或提交進行簽名。其他人可以使用你的公開 GPG 金鑰來驗證該檔案標記是否來自你的金鑰，以及檔案內容是否未被修改或竄改。SSH，或稱 Secure SHell，金鑰通常用於透過 `ssh` 工具驗證遠端連線到伺服器。然而，正如你將在本課程中學到的，你也可以使用 SSH 金鑰來為提交簽名。

要產生 GPG 金鑰，你需要執行：

```sh
gpg --full-generate-key
```

對於 SSH 金鑰，你將執行：

```sh
ssh-keygen -t ed25519 -C "your_email@example.com"
```

請務必提供你的真實電子郵件。

這兩個指令都應該要求輸入密碼短語以保護金鑰。這些是選用的，但強烈建議使用。

對於 SSH 金鑰，你會得到兩個檔案－一個是你的私鑰，另一個是你的公鑰。公鑰檔案名稱會以 `.pub` 結尾，因此你不會意外分享你的私鑰。這些檔案會位於 `~/.ssh`。

GPG 金鑰將會位於隱藏且加密的目錄中。相反地，要列出你的公開金鑰，你需要執行：

```sh
gpg --list-secret-keys --keyid-format=long
```

然後，要取得公鑰，請使用：

```sh
gpg --armor --export "<key id>"
```

但是你可以用這些新金鑰做什麼呢？我們已經談過簽署你的提交，而你可以使用這些金鑰中的任何一個來做這件事。

為了使用你的 GPG 金鑰簽署你的提交，你需要將你的公鑰（而非私鑰）上傳到你的 GitHub 帳戶。然後，使用先前列出金鑰時取得的短 ID，並執行此命令將其設為你的 git 簽署金鑰：

```sh
git config --global user.signingkey <your_gpg_key_id>
```

然後，你可以將 `-S` 旗標傳遞給你的 `git commit` 指令來簽署特定的提交－你需要提供你的密碼短語。或者，如果你想自動簽署每個提交，你可以將 autosign 設定為 `true`：

```sh
git config --global commit.gpgsign true
```

要使用 SSH 金鑰簽署，這是 GitHub 上相對較新的特性，你需要先將金鑰上傳到你的 GitHub 帳戶。然後你需要設定 git 的簽署模式以使用 SSH：

```sh
git config --global gpg.format ssh
```

然後，為了設定簽署金鑰，你將傳遞檔案路徑而非 ID：

```sh
git config --global user.signingkey <path_to_your_ssh_keys>
```

最後，你可以像為 GPG 金鑰一樣啟用自動簽署。

只要設定好這兩種方法中的任一種，你現在就可以擁有經過驗證的提交，這些提交會在 GitHub 上獲得特殊徽章。

# --questions--

## --text--

SSH 和 GPG 金鑰配對中，私鑰和公鑰的根本差異是什麼？

## --answers--

私鑰比公鑰長。

### --feedback--

請思考誰可以存取每個金鑰以及它們儲存的位置。

---

私鑰保留在你的區域的機器上，而公鑰則會被分享。

---

公鑰用於加密資料，而私鑰用於解密資料。

### --feedback--

請思考誰可以存取每個金鑰以及它們儲存的位置。

---

私鑰在一定時間後過期。

### --feedback--

請思考誰可以存取每個金鑰以及它們儲存的位置。

## --video-solution--

2

## --text--

你會使用哪個指令來啟用使用你的 GPG 金鑰自動簽署所有提交？

## --answers--

```sh
git config --global gpg.autosign true
```

### --feedback--

請參考課程中提到的用於自動簽署所有提交的設定指令。

---

```sh
git config --global commit.sign always
```

### --feedback--

請參考課程中提到的用於自動簽署所有提交的設定指令。

---

```sh
git config --global commit.gpgsign true
```

---

```sh
git --enable-auto-signing
```

### --feedback--

請參考課程中提到的用於自動簽署所有提交的設定指令。

## --video-solution--

3

## --text--

設定 GitHub 上 Git 提交的 SSH 金鑰簽署需要什麼？

## --answers--

只將你的公開 SSH 金鑰上傳到 GitHub。

### --feedback--

請考慮為 SSH 簽署提到的設定步驟。

---

將簽署格式設定為 SSH 並組態你的簽署金鑰路徑。

---

產生一個與你一般 SSH 金鑰分開的特殊 SSH 簽署金鑰。

### --feedback--

請考慮為 SSH 簽署提到的設定步驟。

---

在你的帳戶設定中啟用一個特殊的 GitHub 功能。

### --feedback--

請考慮為 SSH 簽署提到的設定步驟。

## --video-solution--

2
