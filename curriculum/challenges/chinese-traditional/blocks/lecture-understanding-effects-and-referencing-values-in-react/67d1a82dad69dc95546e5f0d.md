---
id: 67d1a82dad69dc95546e5f0d
title: 你如何使用 Refs 取用值？
challengeType: 19
dashedName: how-do-you-reference-values-using-refs
---

# --description--

在 React 中，可能會有需要直接存取 DOM 元素的情況。這時「refs」就非常有用。Refs 也可以儲存可變的值，但狀態是更好的選擇。 

在純 JavaScript 中，你使用 `getElementById()` 和 `querySelector()` 方法來存取 DOM 元素。但在 React 中，你使用 refs 來存取 DOM 中的元素。

主要差異之一是，使用 refs 時，你不需要像 ID 和類別這樣的識別字來取用元素。

那麼，你如何創建並使用 refs 呢？React 提供了一個 `useRef()` 掛鉤，讓你可以做到這一點。 

第一步是從 React 匯入掛鉤：

```js
import { useRef } from "react";
```

接下來，你需要創建一個變數來保存帶有初始值的 `useRef` 掛鉤中的 ref，例如一個初始化為 `null` 的 `sectionRef`：

```js
const sectionRef = useRef(null);
```

最後一步是使用 `ref` 屬性將 ref 變數附加到你的 JSX 元素上：

```jsx
<section ref={sectionRef}>
  {/* Section content */}
</section>
```

如果你將 ref 記錄到主控台，你會看到它是一個具有當前值的物件，在此情況下為 `null`：

```js
console.log(sectionRef); // { current: null }
```

你也可以使用 `current` 屬性將目前值記錄到主控台，這樣你就可以直接看到該值：

```js
console.log(sectionRef.current); // null
```

ref 的後續值取決於組件生命週期。 

例如，`sectionRef` 的初始值將永遠是 `null`，因為它就是這樣被初始化的。在組件掛載後，ref 的值將會是該 ref 所附加的 `section` 元素。

如果組件被卸載，ref 的值會回到初始值 `null`。

一個展示 ref 的典型範例是在呈現時，或點擊按鈕時，將焦點設置到輸入元素。

當你點擊按鈕時，操作方法如下：

```jsx
import { useRef } from "react";

const Focus = () => {
  const inputRef = useRef(null);

  const handleFocus = () => {
    if (inputRef.current) {
      inputRef.current.focus();
    }
  };

  return (
    <div>
      <input ref={inputRef} type="text" placeholder="Enter text" />
      <button onClick={handleFocus}>Focus Input</button>
    </div>
  );
};

export default Focus;
```

在上述程式碼中，`inputRef` 被創建並附加到 `input` 元素。還有一個按鈕帶有一個 `onClick` 事件，該事件會呼叫一個 `handleFocus` 函式（程式）。

`handleFocus` 函式所做的就是對 `input` 元素呼叫 `focus()` 方法。請注意，因為 `input` 是 React 內建的組件，實際的 `input` DOM 元素會被設定到 ref 的 `current` 屬性。所以你要用 `input.current.focus()` 來呼叫 `focus()` 方法。

以下是你在使用 refs 時應該注意的一些最佳實踐：

- 主要使用 refs 與 DOM 互動。你也可以將它們用於可變的資料，但狀態是更好的選擇。

- 不要使用 refs 來進行基本狀態管理－這正是 `useState` 的用途。

- 請確定在存取 `ref.current` 的屬性之前，`ref.current` 已存在。以下是再次說明如何執行：

```js
const handleFocus = () => {
  if (inputRef.current) {
    inputRef.current.focus();
  }
};
```

這可防止在 `ref` 尚未附加到 DOM 或已被移除後被存取時發生錯誤。

# --questions--

## --text--

你如何在 React 中創建並使用 refs？

## --answers--

透過匯入並使用 `useState` 掛鉤。

### --feedback--

請注意提供管理 React 組件中可變引用方法的掛鉤。

---

透過匯入並使用 `useEffect` 掛鉤。

### --feedback--

請注意提供管理 React 組件中可變引用方法的掛鉤。

---

透過匯入並使用 `useRef` 掛鉤。

---

透過匯入並使用 `useMemo` 掛鉤。

### --feedback--

請注意提供管理 React 組件中可變引用方法的掛鉤。

## --video-solution--

3

## --text--

如果你將 ref 記錄到主控台，它會是什麼樣子？

## --answers--

具有 `current` 屬性的物件。

---

像字串或數字這樣的原始值。

### --feedback--

思考 refs 如何以一個鍵來存取具有可變性的物件中的 `current` 值。

---

一個追蹤組件狀態的函式（程式）。

### --feedback--

思考 refs 如何以一個鍵來存取具有可變性的物件中的 `current` 值。

---

組件中所有 DOM 節點的列表。

### --feedback--

思考 refs 如何以一個鍵來存取具有可變性的物件中的 `current` 值。

## --video-solution--

1

## --text--

組件掛載後，`ref` 的值是什麼？

## --answers--

永遠是 `null`。

### --feedback--

考慮當 ref 附加到 DOM 元素後它所指向的內容。

---

該組件的 props。

### --feedback--

考慮當 ref 附加到 DOM 元素後它所指向的內容。

---

由 React 產生的隨機值。

### --feedback--

考慮當 ref 附加到 DOM 元素後它所指向的內容。

---

ref 附加的 DOM 元素。

## --video-solution--

4
