---
id: 6839e4d62ae09d1661e4cf9b
title: 什么是列表推导式以及有哪些有用的函数可以操作列表？
challengeType: 19
dashedName: what-are-list-comprehensions-and-what-are-some-useful-functions-to-work-with-lists
---

# --description--

在过去的几节课中，你已经开始熟悉像这样的循环操作：

```py
even_numbers = []

for num in range(21):
    if num % 2 == 0:
        even_numbers.append(num)

print(even_numbers)
```

这个示例创建了一个名为 `even_numbers` 的新空列表，并循环遍历 `0` 到 `20` 之间的数字序列。在循环内部，有一个条件查看当前数字除以 `2` 后的余数是否为 `0`。这用于判断数字是否为偶数。如果条件为 `True`，则将当前的 `num` 追加到 `even_numbers` 列表的末尾。最后，我们将 `even_numbers` 列表打印到控制台。

虽然这段代码可以运行，但有一种更简洁的写法，使用列表推导式代替。列表推导式允许你通过将循环和条件直接组合在方括弧内，在一行内创建一个新列表。这使代码更短且通常更易读。

这是之前使用方括弧重构的示例：

```py
even_numbers = [num for num in range(21) if num % 2 == 0]
print(even_numbers)
```

在这个重构的示例中，`even_numbers` 列表是使用一行代码创建的。列表推导式循环遍历从 `0` 到 `20` 的数字，并且只包含能被 `2` 整除的数字。这种方法更简洁，且无需单独的循环和条件块。

让我们来看另一个例子，以便更好地理解 `list` 推导式的工作原理：

```py
numbers = [1, 2, 3, 4, 5]
result = [(num, 'Even') if num % 2 == 0 else (num, 'Odd') for num in numbers]
print(result)
```

在此示例中，我们有一个数字列表，想要创建一个新的元组列表，指示哪些数字是偶数或奇数。在列表推导的第一部分，我们使用 `if` 语句查看数字是否能被 `2` 整除。如果是，则结果是该数字后跟单词 `Even` 的元组。否则，结果是该数字后跟单词 `Odd` 的元组。

以下是在控制台中打印的结果示例：

```py
[(1, 'Odd'), (2, 'Even'), (3, 'Odd'), (4, 'Even'), (5, 'Odd')]
```

另一种从现有可迭代对象创建列表的方法是使用 `filter()` 函数。下面是一个只创建长度超过四个字符单词的新列表的示例：

```py
words = ['tree', 'sky', 'mountain', 'river', 'cloud', 'sun']

def is_long_word(word):
    return len(word) > 4

long_words = list(filter(is_long_word, words))
print(long_words) # ['mountain', 'river', 'cloud']
```

`filter()` 函数用于从可迭代对象中选择满足特定条件的元素。`filter()` 函数接受一个函数和一个可迭代对象作为它的参数。在此示例中，我们将 `is_long_word` 函数传递给 `filter()` 函数，以查看当前单词数是否大于 `4`。所有字符数大于 `4` 的单词都被添加到一个新列表中，并赋值给 `long_words` 变量。

除了 `filter()` 函数外，还有一些在处理列表时非常有用的函数。另一个需要注意的函数是 `map()` 函数，它接受一个可迭代对象并对其每个元素应用一个函数。下面是使用 `map()` 函数将摄氏温度列表转换为华氏温度的示例：

```py
celsius = [0, 10, 20, 30, 40]

def to_fahrenheit(temp):
    return (temp * 9/5) + 32

fahrenheit = list(map(to_fahrenheit, celsius))
print(fahrenheit) # [32.0, 50.0, 68.0, 86.0, 104.0]
```

就像 `filter()` 函数一样，`map()` 接受一个函数和一个可迭代对象作为它的参数。`to_fahrenheit` 函数接受一个温度并将其从摄氏度转换为华氏度。

我们将要看的最后一个函数是 `sum()` 函数。这个函数用于从可迭代对象（如列表或元组）中获取总和。以下是使用 `sum()` 函数的示例：

```py
numbers = [5, 10, 15, 20]
total = sum(numbers)
print(total) # Result: 50
```

你也可以传入一个可选的 `start` 参数，用于设置求和的初始值。下面是一个使用 `start` 参数作为位置参数的更新示例：

```py
numbers = [5, 10, 15, 20]
total = sum(numbers, 10) # positional argument
print(total) # 60
```

你也可以选择将 `start` 参数作为关键字参数这样使用：

```py
numbers = [5, 10, 15, 20]
total = sum(numbers, start=10) # keyword argument
print(total) # 60
```

两个版本都会产生相同的结果，但关键字参数更为显式。

列表推导式以及其他函数如 `map()`、`filter()` 和 `sum()` 起初可能会让人感到有些困惑。但经过足够的练习和时间，你会开始在你的 Python 程序中更自如地使用它们。

# --questions--

## --text--

以下哪种是使用列表推导式的正确方法？

## --answers--

```py
[while for loop num in range(21)]
```

### --feedback--

查看课程开头以获取答案。

---

```py
[num for num in range(21) if num % 2 == 0]
```

---

```py
[num for num]
```

### --feedback--

查看课程开头以获取答案。

---

```py
[for num in range(21) if num % 2 == 0]
```

### --feedback--

查看课程开头以获取答案。

## --video-solution--

2

## --text--

以下哪个函数接受一个可迭代对象并将一个函数应用于它的每个元素？

## --answers--

`memoryview`

### --feedback--

想象一个函数，它将一个变换“映射”到列表中的每一项，逐一进行。

---

`map`

---

`max`

### --feedback--

想象一个函数，它将一个变换“映射”到列表中的每一项，逐一进行。

---

`min`

### --feedback--

想象一个函数，它将一个变换“映射”到列表中的每一项，逐一进行。

## --video-solution--

2

## --text--

控制台将打印什么？

```py
numbers = [5, 10, 15, 20]
total = sum(numbers, start=10)
print(total) # ?
```

## --answers--

`60`

---

`50`

### --feedback--

复习课程结尾部分来找出答案。

---

`40`

### --feedback--

复习课程结尾部分来找出答案。

---

`70`

### --feedback--

复习课程结尾部分来找出答案。

## --video-solution--

1
