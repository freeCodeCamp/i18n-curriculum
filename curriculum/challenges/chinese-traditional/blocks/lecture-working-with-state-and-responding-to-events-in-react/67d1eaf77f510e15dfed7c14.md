---
id: 67d1eaf77f510e15dfed7c14
title: 什麼是 State，`useState` 掛鉤如何運作？
challengeType: 19
dashedName: what-is-state-and-how-does-the-usestate-hook-work
---

# --description--

State 是 React 和其他前端框架中最重要的基本概念之一。它就像組件的大腦，意指它保存會隨時間改變的資訊，並控制組件的行為和外觀。

讓我們來看看狀態是什麼，以及 `useState` 掛鉤如何讓你操作它。

State 表現你 React 組件中的動態資料，例如來自使用者輸入的值、從 API 擷取的資料，或待辦列表中的一個項目。

每當狀態改變時，React 會重新算繪組件而不重新載入頁面，以反映這些變化在人機介面中。這種反應性使你的應用程式具有互動性。

`useState` 掛鉤是一個讓你在函式（程式）組件中宣告狀態變數的函式。 

在掛鉤出現之前，你只能在類別組件中使用狀態。但自從 React 16.8 引入掛鉤後，你可以透過使用 `useState` 掛鉤在函式組件中使用狀態。

要使用 `useState` 掛鉤，你需要從 React 匯入它：

```js
import { useState } from "react";
```

你也可以匯入 React 本身並存取 `useState` 掛鉤作為一個屬性：

```js
import React from "react";
```

以下是你在匯入 `useState` 時如何宣告狀態變數的方法：

```js
const [stateVariable, setStateFunction] = useState(initialValue);
```

以下是你在匯入 React 時如何宣告狀態變數的方法：

```js
const [stateVariable, setStateFunction] = React.useState(initialValue);
```

在狀態變數中你有以下內容：

- `stateVariable` 保存目前的狀態值
- `setStateFunction`（設值函式）會更新狀態變數
- `initialValue` 設定初始狀態

請注意，React 組件中的狀態是私有的，並且隔離於每個組件實體。這表示，如果你算繪同一個組件兩次，一個組件的狀態不會影響另一個組件。這也表示，如果你想在組件之間共享狀態，則需要將狀態提升到共同的父組件，並作為 props 傳遞下去。

另一件事是掛鉤必須在組件的頂層呼叫，就在 `return` 關鍵字之前，以保持狀態和效果在各次呈現中一致。這表示你不能在迴圈、條件或巢狀函式中使用狀態。

以下是在 `Counter` 組件中使用 `useState` 掛鉤管理狀態的範例：

```jsx
// Importing the useState hook
import { useState } from "react";

function Counter() {
  const initialValue = 0;

  // The state variable and setter function
  const [count, setCount] = useState(initialValue);

  return (
    <div>
      {/* Display current state value */}
      <h2>{count}</h2>

      <button onClick={() => setCount(count - 1)}>Decrement</button>
      <button onClick={() => setCount(count + 1)}>Increment</button>
    </div>
  );
}

export default Counter;
```

在上述程式碼中，我們從 React 匯入了 `useState` 掛鉤。在 `Counter` 組件中，`count` 表現目前的狀態，而 `setCount` 是負責更新狀態的設定函式（程式）。目前的狀態值是 `0`。`return` 述語包含計數值和兩個按鈕，用於將計數減少和增加 `1`。

你可以透過多次呼叫 `useState` 掛鉤來管理多個狀態。當你有不相關的狀態變數時，這點尤其重要：

```jsx
function UserProfile() {
  const [isOnline, setIsOnline] = useState(false);
  const [notifications, setNotifications] = useState(0);

  // The rest of the component logic
}
```

當管理多個分別更新的狀態（例如表單欄位）時，你也可以多次呼叫 `useState` 掛鉤：

```jsx
function SignUpForm() {
  const [name, setName] = useState("");
  const [username, setUsername] = useState("");
  const [email, setEmail] = useState("");

  // The rest of the component logic
}
```

但在這種情況下，最好將狀態合併，因為它們都是同一個表單的零件。

```jsx
function SignUpForm() {
  const [formData, setFormData] = useState({
    name: "",
    username: "",
    email: "",
  });

  // The rest of the component logic
}
```

這就是狀態的意義以及你如何使用 `useState` 掛鉤。

# --questions--

## --text--

在 React 的哪個版本中引入了掛鉤，使得可以在函式組件中使用狀態？

## --answers--

React 15.6

### --feedback--

回顧課程開始時討論答案的部分。

---

React 16.8

---

React 17.0

### --feedback--

回顧課程開始時討論答案的部分。

---

React 18.2

### --feedback--

回顧課程開始時討論答案的部分。

## --video-solution--

2

## --text--

在 React 組件中，`state` 表現什麼？

## --answers--

動態資料在變更時會觸發重新呈現。

---

只有不會改變的靜態資料。

### --feedback--

思考使 UI 具有互動性且在不重新載入頁面的情況下更新的資料。

---

該組件的樣式資訊。

### --feedback--

思考使 UI 具有互動性且在不重新載入頁面的情況下更新的資料。

---

在應用程式開始時設定的固定值。

### --feedback--

思考使 UI 具有互動性且在不重新載入頁面的情況下更新的資料。

## --video-solution--

1

## --text--

以下哪一種方式是使用 `useState` 掛鉤的正確方法？

## --answers--

```js
const [formData, setFormData] = useState(<
  name: "",
  username: "",
  email: "",
>);
```

### --feedback--

回顧課程結尾討論答案的部分。

---

```js
const ref = useState({
  name: "",
  username: "",
  email: "",
});
```

### --feedback--

回顧課程結尾討論答案的部分。

---

```js
const <formData, setFormData> = useState({
  name: "",
  username: "",
  email: "",
});
```

### --feedback--

回顧課程結尾討論答案的部分。

---

```jsx
const [formData, setFormData] = useState({
  name: "",
  username: "",
  email: "",
});
```

## --video-solution--

4
