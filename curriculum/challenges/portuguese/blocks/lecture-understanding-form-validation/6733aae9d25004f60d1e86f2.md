---
id: 6733aae9d25004f60d1e86f2
title: Quais São Algumas Formas de Validar Formulários Usando JavaScript?
challengeType: 19
dashedName: what-are-some-ways-to-validate-forms-using-javascript
---

# --interactive--

In a previous lesson, you've learned how to use HTML to restrict the values your users can submit in your form. Mas às vezes isso não é suficiente. Se você quiser algo mais complexo, como exibir suas próprias mensagens de erro para o usuário, será necessário usar JavaScript.

Certos elementos HTML, como os elementos `textarea` e `input`, expõem uma Constraint Validation API. Esta API permite que você afirme que o valor fornecido pelo usuário para esse elemento passa por qualquer validação em nível HTML que você tenha escrito, como comprimento mínimo ou correspondência de padrão.

Mas como você pode realmente usá-lo? Vamos supor que você queira que os funcionários de uma empresa enviem mensagens de feedback através de um formulário como este:

:::interactive_editor

```html
<link rel="stylesheet" href="styles.css" />
<form>
  <label>Enter your email: </label>
  <input required type="email" />

  <label>Enter your feedback: </label>
  <textarea required placeholder="Your feedback here..."></textarea>

  <button type="submit">Submit Feedback</button>
</form>
```

```css
form {
  max-width: 400px;
  margin: 20px auto;
  display: flex;
  flex-direction: column;
  gap: 12px;
  font-family: Arial, sans-serif;
}

label {
  font-weight: 600;
  margin-bottom: 4px;
  color: #333;
}

input,
textarea {
  padding: 8px 12px;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: 14px;
  width: 100%;
  box-sizing: border-box;
  transition: border-color 0.2s, box-shadow 0.2s;
}

input:focus,
textarea:focus {
  border-color: #0078d4;
  box-shadow: 0 0 3px rgba(0, 120, 212, 0.5);
  outline: none;
}

textarea {
  resize: vertical;
  min-height: 100px;
}

button[type="submit"] {
  background-color: #0078d4;
  color: #fff;
  border: none;
  padding: 10px 16px;
  font-size: 14px;
  border-radius: 4px;
  cursor: pointer;
  transition: background-color 0.2s;
}

button[type="submit"]:hover {
  background-color: #005ea2;
}

```

:::

Estamos usando o `input` de email que vem com validação embutida para verificar validações básicas como se o `input` inclui o sinal de arroba (`@`).

Mas e se o usuário fornecer um endereço de email como `example@email.com`? Isso passaria na validação básica, mas queremos ser mais específicos sobre aceitar emails daqueles que possuem um endereço de email corporativo.

Aqui é onde podemos usar o atributo `pattern` para especificar que o endereço de email deve terminar em um endereço de email da empresa. Aqui está como o exemplo atualizado ficará:

:::interactive_editor

```html
<link rel="stylesheet" href="styles.css" />
<form>
  <label>Enter your email: </label>
  <input required placeholder="username@sampleCompany.com" type="email" pattern=".+@sampleCompany\.com" />

  <label>Enter your feedback: </label>
  <textarea required placeholder="Your feedback here..."></textarea>

  <button type="submit">Submit Feedback</button>
</form>
```

```css
form {
  max-width: 400px;
  margin: 20px auto;
  display: flex;
  flex-direction: column;
  gap: 12px;
  font-family: Arial, sans-serif;
}

label {
  font-weight: 600;
  margin-bottom: 4px;
  color: #333;
}

input,
textarea {
  padding: 8px 12px;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: 14px;
  width: 100%;
  box-sizing: border-box;
  transition: border-color 0.2s, box-shadow 0.2s;
}

input:focus,
textarea:focus {
  border-color: #0078d4;
  box-shadow: 0 0 3px rgba(0, 120, 212, 0.5);
  outline: none;
}

textarea {
  resize: vertical;
  min-height: 100px;
}

button[type="submit"] {
  background-color: #0078d4;
  color: #fff;
  border: none;
  padding: 10px 16px;
  font-size: 14px;
  border-radius: 4px;
  cursor: pointer;
  transition: background-color 0.2s;
}

button[type="submit"]:hover {
  background-color: #005ea2;
}

```

:::

Agora, se você tentar enviar o feedback, verá uma mensagem dizendo "Please match the requested format."

Embora o `input` tenha texto de espaço reservado mostrando a eles o formato desejado, seria melhor também incluir uma mensagem de erro personalizada usando JavaScript.

Vamos primeiro dar uma olhada no método `checkValidity()`:

:::interactive_editor

```html
<link rel="stylesheet" href="styles.css" />
<form>
  <label>Enter your email: </label>
  <input required placeholder="username@sampleCompany.com" type="email" pattern=".+@sampleCompany\.com" />

  <label>Enter your feedback: </label>
  <textarea required placeholder="Your feedback here..."></textarea>

  <button type="submit">Submit Feedback</button>
</form>
<script src="index.js"></script>
```

```css
form {
  max-width: 400px;
  margin: 20px auto;
  display: flex;
  flex-direction: column;
  gap: 12px;
  font-family: Arial, sans-serif;
}

label {
  font-weight: 600;
  margin-bottom: 4px;
  color: #333;
}

input,
textarea {
  padding: 8px 12px;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: 14px;
  width: 100%;
  box-sizing: border-box;
  transition: border-color 0.2s, box-shadow 0.2s;
}

input:focus,
textarea:focus {
  border-color: #0078d4;
  box-shadow: 0 0 3px rgba(0, 120, 212, 0.5);
  outline: none;
}

textarea {
  resize: vertical;
  min-height: 100px;
}

button[type="submit"] {
  background-color: #0078d4;
  color: #fff;
  border: none;
  padding: 10px 16px;
  font-size: 14px;
  border-radius: 4px;
  cursor: pointer;
  transition: background-color 0.2s;
}

button[type="submit"]:hover {
  background-color: #005ea2;
}

```

```js
const input = document.querySelector("input");

input.addEventListener("input", (e) => {
  console.log(e.target.checkValidity())
})
```

:::

No exemplo acima, consultamos nossa entrada no DOM e adicionamos um listener de evento input.

Sabemos que `e.target` se refere ao elemento que disparou o evento. Neste caso, nosso `input`. Mas o que é o método `checkValidity()`?

Esta é parte da Constraint Validation API. O método `checkValidity()` retorna `true` se o elemento corresponder a toda a validação HTML (com base em seus atributos) e `false` se falhar.

Quando tentamos com uma entrada inválida, vemos que `false` é registrado no console. Agora que sabemos que a entrada é inválida, vamos relatar a invalidade:

:::interactive_editor

```html
<link rel="stylesheet" href="styles.css" />
<form>
  <label>Enter your email: </label>
  <input required placeholder="username@sampleCompany.com" type="email" pattern=".+@sampleCompany\.com" />

  <label>Enter your feedback: </label>
  <textarea required placeholder="Your feedback here..."></textarea>

  <button type="submit">Submit Feedback</button>
</form>
<script src="index.js"></script>
```

```css
form {
  max-width: 400px;
  margin: 20px auto;
  display: flex;
  flex-direction: column;
  gap: 12px;
  font-family: Arial, sans-serif;
}

label {
  font-weight: 600;
  margin-bottom: 4px;
  color: #333;
}

input,
textarea {
  padding: 8px 12px;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: 14px;
  width: 100%;
  box-sizing: border-box;
  transition: border-color 0.2s, box-shadow 0.2s;
}

input:focus,
textarea:focus {
  border-color: #0078d4;
  box-shadow: 0 0 3px rgba(0, 120, 212, 0.5);
  outline: none;
}

textarea {
  resize: vertical;
  min-height: 100px;
}

button[type="submit"] {
  background-color: #0078d4;
  color: #fff;
  border: none;
  padding: 10px 16px;
  font-size: 14px;
  border-radius: 4px;
  cursor: pointer;
  transition: background-color 0.2s;
}

button[type="submit"]:hover {
  background-color: #005ea2;
}

```

```js
const input = document.querySelector("input");

input.addEventListener("input", (e) => {
  if (!e.target.checkValidity()) {
    e.target.reportValidity();
  }
})
```

:::

E como resultado, você verá a mensagem de erro do navegador "Please match the requested format."

Ele reporta o estado inválido imediatamente, em vez de esperar que enviemos o formulário. Mas ainda está usando a mensagem padrão. Isso ocorre porque o método `reportValidity` apenas informa ao navegador que a entrada é inválida. O navegador ainda escolhe como exibir por que isso é inválido. É aí que o método `setCustomValidity` entra em ação.

:::interactive_editor

```html
<link rel="stylesheet" href="styles.css" />
<form>
  <label>Enter your email: </label>
  <input required placeholder="username@sampleCompany.com" type="email" pattern=".+@sampleCompany\.com" />

  <label>Enter your feedback: </label>
  <textarea required placeholder="Your feedback here..."></textarea>

  <button type="submit">Submit Feedback</button>
</form>
<script src="index.js"></script>
```

```css
form {
  max-width: 400px;
  margin: 20px auto;
  display: flex;
  flex-direction: column;
  gap: 12px;
  font-family: Arial, sans-serif;
}

label {
  font-weight: 600;
  margin-bottom: 4px;
  color: #333;
}

input,
textarea {
  padding: 8px 12px;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: 14px;
  width: 100%;
  box-sizing: border-box;
  transition: border-color 0.2s, box-shadow 0.2s;
}

input:focus,
textarea:focus {
  border-color: #0078d4;
  box-shadow: 0 0 3px rgba(0, 120, 212, 0.5);
  outline: none;
}

textarea {
  resize: vertical;
  min-height: 100px;
}

button[type="submit"] {
  background-color: #0078d4;
  color: #fff;
  border: none;
  padding: 10px 16px;
  font-size: 14px;
  border-radius: 4px;
  cursor: pointer;
  transition: background-color 0.2s;
}

button[type="submit"]:hover {
  background-color: #005ea2;
}

```

```js
const input = document.querySelector("input");

input.addEventListener("input", (e) => {
  if (!e.target.checkValidity()) {
    e.target.setCustomValidity(
      "You must use a company email address that ends in @sampleCompany.com"
    );
  }
});
```

:::

Este método aceita uma mensagem de erro personalizada, que é exibida para o usuário. Como resultado, você verá a mensagem de erro personalizada `You must use a company email address that ends in @sampleCompany.com`.

Se você estiver interessado em explorar mais sobre os diferentes tipos de estados de validade e por que uma validação específica falhou, você pode registrar a propriedade `validity` assim:

:::interactive_editor

```html
<link rel="stylesheet" href="styles.css" />
<form>
  <label>Enter your email: </label>
  <input required placeholder="username@sampleCompany.com" type="email" pattern=".+@sampleCompany\.com" />

  <label>Enter your feedback: </label>
  <textarea required placeholder="Your feedback here..."></textarea>

  <button type="submit">Submit Feedback</button>
</form>
<script src="index.js"></script>
```

```css
form {
  max-width: 400px;
  margin: 20px auto;
  display: flex;
  flex-direction: column;
  gap: 12px;
  font-family: Arial, sans-serif;
}

label {
  font-weight: 600;
  margin-bottom: 4px;
  color: #333;
}

input,
textarea {
  padding: 8px 12px;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: 14px;
  width: 100%;
  box-sizing: border-box;
  transition: border-color 0.2s, box-shadow 0.2s;
}

input:focus,
textarea:focus {
  border-color: #0078d4;
  box-shadow: 0 0 3px rgba(0, 120, 212, 0.5);
  outline: none;
}

textarea {
  resize: vertical;
  min-height: 100px;
}

button[type="submit"] {
  background-color: #0078d4;
  color: #fff;
  border: none;
  padding: 10px 16px;
  font-size: 14px;
  border-radius: 4px;
  cursor: pointer;
  transition: background-color 0.2s;
}

button[type="submit"]:hover {
  background-color: #005ea2;
}

```

```js
const input = document.querySelector("input");

input.addEventListener("input", (e) => {
  console.log(e.target.validity);
})
```

:::

A propriedade `validity` é uma instância do objeto `ValidityState`. Aqui está um exemplo de como o objeto pode parecer no navegador:

```js
ValidityState {
  badInput: false,
  customError: false,
  patternMismatch: true,
  rangeOverflow: false,
  rangeUnderflow: false,
  stepMismatch: false,
  tooLong: false,
  tooShort: false,
  typeMismatch: true,
  valueMissing: false,
  valid: true
}
```

Existem várias propriedades úteis que todas possuem o valor booleano `true` ou `false`.

Algumas dessas propriedades úteis que você pode explorar mais por conta própria seriam a propriedade `valueMissing` que é `true` quando um campo de entrada obrigatório é deixado vazio. Ou o `patternMismatch` que é `true` se o valor não corresponder ao padrão de expressão regular especificado.

Após esta lição, incentivo você a experimentar os exemplos fornecidos nesta lição e explorar mais sobre as diferentes propriedades de validade.

# --questions--

## --text--

Qual método da Constraint Validation API é usado para verificar se um elemento de entrada atende a todas as suas restrições de validação?

## --answers--

`validateInput()`

### --feedback--

A lição demonstra este método ao adicionar um event listener ao elemento input.

---

`checkValidity()`

---

`isValid()`

### --feedback--

A lição demonstra este método ao adicionar um event listener ao elemento input.

---

`testConstraints()`

### --feedback--

A lição demonstra este método ao adicionar um event listener ao elemento input.

## --video-solution--

2

## --text--

Qual é o propósito do método `setCustomValidity()` na validação de formulários?

## --answers--

Para definir estilos CSS personalizados para entradas inválidas.

### --feedback--

A lição explica como este método é usado para fornecer um feedback mais informativo aos usuários.

---

Para criar regras de validação personalizadas.

### --feedback--

A lição explica como este método é usado para fornecer um feedback mais informativo aos usuários.

---

Para exibir uma mensagem de erro personalizada para entradas inválidas.

---

Para substituir a validação HTML padrão.

### --feedback--

A lição explica como este método é usado para fornecer um feedback mais informativo aos usuários.

## --video-solution--

3

## --text--

Qual propriedade do objeto `validity` se torna verdadeira quando um campo de entrada obrigatório é deixado vazio?

## --answers--

`isEmpty`

### --feedback--

A lição mostra essa propriedade ao registrar o objeto `validity` para um campo obrigatório vazio.

---

`required`

### --feedback--

A lição mostra essa propriedade ao registrar o objeto `validity` para um campo obrigatório vazio.

---

`valueMissing`

---

`invalidValue`

### --feedback--

A lição mostra essa propriedade ao registrar o objeto `validity` para um campo obrigatório vazio.

## --video-solution--

3
