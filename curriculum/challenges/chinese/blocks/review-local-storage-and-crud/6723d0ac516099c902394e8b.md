---
id: 6723d0ac516099c902394e8b
title: 局部存储和 CRUD 复习
challengeType: 31
dashedName: review-local-storage-and-crud
---

# --description--

## 持久存储

- **定义**：持久存储指的是一种保存数据的方式，即使断电或设备重启后数据仍然可用。

## 创建、读取、更新、删除（CRUD）

- **创建**：这指的是创建新数据的过程。例如，在一个网页应用中，这可能是用户为博客添加新帖子的时候。
- **读取**：这是从数据库中检索数据的操作。例如，当你访问博客文章或查看你的网站评测时，你正在执行读取操作以获取并显示保存在数据库中的数据。
- **更新**：这涉及修改数据库中现有的数据。一个例子是编辑博客文章或更新你的评测信息。
- **删除**：这是从数据库中移除数据的操作。例如，当你删除一篇博客文章或账户时，你正在执行删除操作。

## 超文本传输协议 方法

- **定义**：HTTP 代表超文本传输协议，它是网络上数据通信的基础。存在 HTTP 方法，用于定义可以在网络资源上执行的操作。常见的方法有 GET、POST、PUT、PATCH、DELETE。
- **`GET` 方法**：这用于从服务器获取数据。
- **`POST` 方法**：这用于向服务器提交数据，从而创建一个新资源。
- **`PUT` 方法**：用于通过完全替换来更新资源。
- **`PATCH` 方法**：用于部分更新资源。
- **`DELETE` 方法**：用于从数据库中删除记录。

## `localStorage` 和 `sessionStorage` 属性

- **Web Storage API**：该 API 为浏览器提供了一种机制，可以在浏览器内直接保存键值对，允许开发者存储可跨不同页面重载和会话使用的信息。Web Storage API 的两个主要组件是 `localStorage` 和 `sessionStorage` 属性。
- **`localStorage` 属性**：`localStorage` 是 Web Storage API 的一部分，允许数据即使在浏览器窗口关闭或页面刷新后仍然保持持久。该数据将一直可用，直到被应用或用户显式移除。
- **`localStorage.setItem()` 方法**：此方法用于在 `localStorage` 中保存一个密钥-值对。

```js
localStorage.setItem('username', 'Jessica');
```

- **`localStorage.getItem()` 方法**：此方法用于从 `localStorage` 中检索给定密钥的值。

```js
localStorage.setItem('username', 'codingRules');

let username = localStorage.getItem('username');
console.log(username); // codingRules
```

- **`localStorage.removeItem()` 方法**：此方法用于通过其密钥从 `localStorage` 中移除特定项。

```js
localStorage.removeItem('username');
```

- **`localStorage.clear()` 方法**：此方法用于清除 `localStorage` 中保存的所有数据。

```js
localStorage.clear();
```

- **`sessionStorage` 属性**：存储仅在当前会话中存在的数据，浏览器标签（页）或窗口关闭时会被清除。
- **`sessionStorage.setItem()` 方法**：此方法用于在 `sessionStorage` 中保存一个密钥-值点对。

```js
sessionStorage.setItem('cart', '3 items');
```

- **`sessionStorage.getItem()` 方法**：此方法用于从 `sessionStorage` 中检索给定密钥的值。

```js
sessionStorage.setItem('cart', '3 items');

let cart = sessionStorage.getItem('cart');
console.log(cart); // '3 items'
```

- **`sessionStorage.removeItem()` 方法**：此方法用于通过其密钥从 `sessionStorage` 中移除特定项。

```js
sessionStorage.removeItem('cart');
```

- **`sessionStorage.clear()` 方法**：此方法用于清除存储在 `sessionStorage` 中的所有数据。

```js
sessionStorage.clear();
```

## 使用 Cookie

- **定义**：Cookie，也称为网页 Cookie 或浏览器 Cookie，是服务器发送到用户网页浏览器的小块数据。这些 Cookie 存储在用户设备上，并在后续请求中发送回服务器。Cookie 对于帮助网页应用维护状态和记住用户信息至关重要，这一点尤其重要，因为 `HTTP` 是无状态协议。
- **会话 Cookies**：这些 Cookies 仅在用户在网站上的会话期间有效。一旦用户关闭浏览器或标签（页），会话 Cookie 就会被删除。这些 Cookies 通常用于保持用户在访问期间的登录状态等任务。
- **安全 Cookie**：这些 Cookie 仅通过 `HTTPS` 发送，确保它们在传输过程中不会被攻击者截获。
- **HttpOnly Cookies**：这些 Cookie 无法被浏览器中运行的 JavaScript 访问或修改，从而使它们在防范跨站脚本（XSS）攻击方面更安全。
- **Set-Cookie 头部**：当你访问一个网站时，服务器可以在 HTTP 响应中发送一个 Set-Cookie 头部。该头部告诉你的浏览器储存一个包含特定信息的 cookie。例如，它可能保存一个唯一 ID，帮助网站在你下次访问时识别你。  
你可以使用 `document.cookie` 在 JavaScript 中手动设置 cookie：

```js
document.cookie = "organization=freeCodeCamp; expires=Fri, 31 Dec 2021 23:59:59 GMT; path=/";
```

要删除 cookie，你可以将其过期时间设置为过去的某个时间。

```js
document.cookie = "username=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/";
```

## 缓存 API

- **定义**：缓存是将文件副本存储在临时存储位置的过程，以便可以更快速地访问它们。Cache API 用于保存网络请求和响应，使网页应用更高效，甚至可以离线运行。它是更广泛的 Service Worker API 的一部分，对于创建能够在不可靠或缓慢网络条件下工作的渐进式网页应用（PWA）至关重要。  
Cache API 是一种存储机制，用于存储 `Request` 和 `Response` 对象。当向服务器发出请求时，应用可以保存响应，并在以后从缓存中检索，而不是发出新的网络请求。这减少了装载时间，节省了带宽，并提升了整体用户体验。
- **缓存存储**：用于保存超文本传输协议请求及其对应响应的键值点对。这使得能够高效地检索先前请求的资源，减少后续访问时从网络获取的需求，从而提升性能。
- **Cache-Control**：开发者可以定义缓存资源应保留多长时间，以及是否应重新验证或直接从缓存中提供。
- **离线支持**：通过使用 Cache API，你可以创建离线优先的网页应用。例如，当用户断开网络时，PWA 可以提供缓存的资源。

## 负面模式和客户端存储

- **过度跟踪**：指在没有明确、知情同意或合法需求的情况下，在客户端存储（例如 cookie、local storage 或 session storage）中收集和存储过多的用户数据的做法。这通常涉及跨多个站点或会话跟踪用户行为、偏好和交互，可能侵犯用户隐私。
- **浏览器指纹识别**：一种基于设备和浏览器的独特特征来跟踪和识别单个用户的技术，而不是依赖于 cookie 或其他传统的跟踪方法。与存储在用户设备上的 cookie 不同，指纹识别涉及收集一系列信息，这些信息可用于创建用户浏览器会话的独特“指纹”。
- **在 LocalStorage 中设置密码**：这看起来可能是一个更明显的负面模式，但在局部存储中设置任何敏感数据如密码都会带来安全性风险。局部存储未加密且可以轻松访问。因此，你绝不应该将任何类型的敏感数据保存其中。

## 索引数据库

- **定义**：IndexedDB 用于在浏览器中保存结构化数据。它内置于现代网页浏览器中，允许网页应用高效地保存和获取 JavaScript 对象。

## 缓存/服务工作者

- **定义**：Service Worker 是一个在后台运行的脚本，独立于你的网页。它可以拦截网络请求，访问缓存，并使网页应用离线工作。这是渐进式网页应用的关键组件。

# --assignment--

复习 `Local Storage` 和 `CRUD` 主题及概念。
