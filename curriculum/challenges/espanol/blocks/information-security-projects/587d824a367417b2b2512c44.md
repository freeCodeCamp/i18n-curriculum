---
id: 587d824a367417b2b2512c44
title: Comprobador de precios de acciones
challengeType: 4
forumTopicId: 301572
dashedName: stock-price-checker
---

# --description--

Construye una aplicación JavaScript full-stack que sea funcionalmente similar a esta: <a href="https://stock-price-checker.freecodecamp.rocks/" target="_blank" rel="noopener noreferrer nofollow">https://stock-price-checker.freecodecamp.rocks/</a>.

Dado que todas las APIs confiables de precios de acciones requieren una clave API, hemos creado una solución alternativa. Usa <a href="https://stock-price-checker-proxy.freecodecamp.rocks/" target="_blank" rel="noopener noreferrer nofollow">https://stock-price-checker-proxy.freecodecamp.rocks/</a> para obtener información actualizada de precios de acciones sin necesidad de registrarte para obtener tu propia clave. 

Trabajar en este proyecto implicará escribir tu código utilizando uno de los siguientes métodos:

-   Clona <a href="https://github.com/freeCodeCamp/boilerplate-project-stockchecker/" target="_blank" rel="noopener noreferrer nofollow">este repositorio de GitHub</a> y completa tu proyecto localmente.
-   Usa un constructor de sitios de tu elección para completar el proyecto. Asegúrate de incorporar todos los archivos de nuestro repositorio de GitHub.

# --instructions--

1.  Configura la variable de entorno `NODE_ENV` a `test`, sin comillas
2.  Completa el proyecto en `routes/api.js` o creando un manejador/controlador
3.  Añadirás cualquier característica de seguridad a `server.js`
4.  Crearás todas las pruebas funcionales en `tests/2_functional-tests.js`

**Note** Privacy Considerations: Due to the requirement that only 1 like per IP should be accepted, you will have to save IP addresses. Es importante seguir cumpliendo con leyes de privacidad como el Reglamento General de Protección de Datos. Una opción es obtener permiso para guardar los datos del usuario, pero es mucho más simple hacerlo anónimo. Para este desafío, recuerde anonimizar las direcciones IP antes de guardarlas en la base de datos.  If you need ideas on how to do this, you may choose to hash the data, truncate it, or set part of the IP address to 0.

Escribir las siguientes pruebas en `tests/2_functional-tests.js`:

-   Ver un stock: solicitud GET a `/api/stock-prices/`
-   Ver una acción y darle me gusta: solicitud GET a `/api/stock-prices/`
-   Ver la misma acción y darle me gusta de nuevo: solicitud GET a `/api/stock-prices/`
-   Visualizando dos acciones: solicitud GET a `/api/stock-prices/`
-   Ver dos acciones y darles "me gusta": solicitud GET a `/api/stock-prices/`

# --hints--

Debes proporcionar tu propio proyecto, no la URL de ejemplo.

```js
  assert(
    !/.*\/stock-price-checker\.freecodecamp\.rocks/.test(code)
  );
```

Debes configurar las políticas de seguridad de contenido para permitir solo la carga de scripts y CSS desde tu servidor.

```js
  const data = await fetch(code + '/_api/app-info');
  const parsed = await data.json();
  assert.isTrue(
    parsed.headers['content-security-policy'].includes("script-src 'self'")
  );
  assert.isTrue(
    parsed.headers['content-security-policy'].includes("style-src 'self'")
  );
```

Puedes enviar una solicitud `GET` a `/api/stock-prices`, pasando un símbolo de acción del NASDAQ al parámetro de consulta `stock`. El objeto devuelto contendrá una propiedad llamada `stockData`.

```js
  const data = await fetch(
    code + '/api/stock-prices?stock=GOOG'
  );
  const parsed = await data.json();
  assert.property(parsed, 'stockData');
```

La propiedad `stockData` incluye el símbolo `stock` como una cadena, el `price` como un número, y `likes` como un número.

```js
  const data = await fetch(
    code + '/api/stock-prices?stock=GOOG'
  );
  const parsed = await data.json();
  const ticker = parsed.stockData;
  assert.typeOf(ticker.price, 'number');
  assert.typeOf(ticker.likes, 'number');
  assert.typeOf(ticker.stock, 'string');
```

También puedes pasar un campo `like` como `true` (booleano) para que se agregue tu like a la(s) acción(es). Solo se debe aceptar 1 like por IP.

```js

```

Si pasas 2 acciones, el valor devuelto será un arreglo con información sobre ambas acciones. En lugar de `likes`, mostrará `rel_likes` (la diferencia entre los likes de ambas acciones) para ambos objetos `stockData`.

```js
  const data = await fetch(
    code + '/api/stock-prices?stock=GOOG&stock=MSFT'
  );
  const parsed = await data.json();
  const ticker = parsed.stockData;
  assert.typeOf(ticker, 'array');
  assert.property(ticker[0], 'rel_likes');
  assert.property(ticker[1], 'rel_likes');
```

Las 5 pruebas funcionales están completas y aprobadas.

```js
  const tests = await fetch(code + '/_api/get-tests');
  const parsed = await tests.json();
  assert.isTrue(parsed.length >= 5);
  parsed.forEach((test) => {
    assert.equal(test.state, 'passed');
  });
```

