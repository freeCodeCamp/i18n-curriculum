---
id: 6882904fd7063f7258c0aef3
title: 你如何处理像 SSH 和 GPG 密钥这样的安全性需求？
challengeType: 19
dashedName: how-do-you-handle-security-requirements-like-ssh-and-gpg-keys
---

# --description--

在你将仓库推送到 GitHub 之前，你需要进行身份验证。SSH 和 GPG 密钥都使用公私密钥对。这意味着你在本地机器上保留一个私钥，用于验证你的身份。你将公钥分享给需要验证你身份的人或服务。换句话说，执行操作需要私钥，验证操作则使用公钥。

GPG，或称 Gnu Privacy Guard，密钥通常用于签署文件或提交。然后，其他人可以使用你的公用 GPG 密钥来验证文件签名是否来自你的密钥，以及文件内容是否未被修改或篡改。SSH，或称 Secure SHell，密钥通常用于通过 `ssh` 工具验证到服务器的远程连接。然而，正如你将在本课中学习的，你也可以使用 SSH 密钥来签署提交。

要生成 GPG 密钥，你需要运行：

```sh
gpg --full-generate-key
```

对于 SSH 密钥，你将运行：

```sh
ssh-keygen -t ed25519 -C "your_email@example.com"
```

确保提供你的真实邮箱。

这两个命令都应该请求一个密码短语来保护密钥。这些是可选的，但强烈推荐。

对于 SSH 密钥，你将获得两个文件——一个是你的私钥，另一个是你的公钥。公钥文件名将以 `.pub` 结尾，以防你意外共享你的私钥。这些文件将位于 `~/.ssh`。

GPG 密钥将位于一个隐藏且加密的目录中。相反，要列出你的公钥，你需要运行：

```sh
gpg --list-secret-keys --keyid-format=long
```

然后，要获取公钥，请使用：

```sh
gpg --armor --export "<key id>"
```

但是你可以用这些新建密钥做什么呢？我们已经讨论过为你的提交签名，这正是你可以使用任意一个密钥的用途。

为了使用你的 GPG 密钥对提交进行签名，你需要将你的公钥（而不是私钥）上传到你的 GitHub 账户。然后，使用之前列出密钥时获得的短 ID，运行此命令将其设置为你的 git 签名密钥：

```sh
git config --global user.signingkey <your_gpg_key_id>
```

然后，你可以将 `-S` 标记传递给你的 `git commit` 命令以签署特定的提交——你需要提供你的密码短语。备选地，如果你想自动签署每个提交，你可以将 autosign 配置设置为 `true`：

```sh
git config --global commit.gpgsign true
```

要使用 SSH 密钥进行签名，这是 GitHub 上一个相对新建的特色，你需要先将密钥上传到你的 GitHub 账户。然后你需要为 git 设置使用 SSH 的签名模式：

```sh
git config --global gpg.format ssh
```

然后，要设置签名密钥，你将传递文件路径而不是 ID：

```sh
git config --global user.signingkey <path_to_your_ssh_keys>
```

最后，你可以像为 GPG `key` 那样启用自动签名。

无论采用哪种方法设置，你现在都可以拥有经过验证的提交，这些提交将在 GitHub 上获得特殊徽章。

# --questions--

## --text--

SSH 和 GPG 密钥点对中私钥和公钥的根本区别是什么？

## --answers--

私钥比公钥长。

### --feedback--

考虑谁可以访问每个 `key` 以及它们存储的位置。

---

私钥保留在你的局部机器上，而公钥则被共享。

---

公钥用于加密 `data`，而私钥用于解密它。

### --feedback--

考虑谁可以访问每个 `key` 以及它们存储的位置。

---

私钥在一定时间段后过期。

### --feedback--

考虑谁可以访问每个 `key` 以及它们存储的位置。

## --video-solution--

2

## --text--

你会使用哪个命令来启用使用你的 GPG `key` 自动签署所有提交？

## --answers--

```sh
git config --global gpg.autosign true
```

### --feedback--

查看课程中提到的用于自动签署所有提交的配置命令。

---

```sh
git config --global commit.sign always
```

### --feedback--

查看课程中提到的用于自动签署所有提交的配置命令。

---

```sh
git config --global commit.gpgsign true
```

---

```sh
git --enable-auto-signing
```

### --feedback--

查看课程中提到的用于自动签署所有提交的配置命令。

## --video-solution--

3

## --text--

在 GitHub 上为 Git `commit` 设置 SSH `key` 签名需要什么？

## --answers--

只将你的公用 SSH 密钥上传到 GitHub。

### --feedback--

考虑为 SSH 签名提到的配置步骤。

---

将签名形式设置为 SSH 并配置你的签名密钥路径。

---

生成一个与常规 SSH 密钥分开的特殊 SSH 签名密钥。

### --feedback--

考虑为 SSH 签名提到的配置步骤。

---

在你的账户 `Settings` 中启用一个特殊的 GitHub 特色。

### --feedback--

考虑为 SSH 签名提到的配置步骤。

## --video-solution--

2
