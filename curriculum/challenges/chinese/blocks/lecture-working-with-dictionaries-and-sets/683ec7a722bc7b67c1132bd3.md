---
id: 683ec7a722bc7b67c1132bd3
title: 什么是字典，它们如何工作？
challengeType: 19
dashedName: what-are-dictionaries-and-how-do-they-work
---

# --description--

在 Python 中，字典是内置的数据结构，用于保存密钥-值点对的集合。它们的工作方式非常类似于真实的字典，你通过查找一个单词来找到其对应的含义。

使用 Python 字典时，你使用一个 `key` 来查找其对应的值。当你需要将值与唯一的 `key` 关联时，应使用字典。当你需要根据 `key` 快速查找值，以及当你需要表现结构化数据时，这非常有用。

这是 Python 字典的通用的语法：

```python
dictionary = {
    key1: value1,
    key2: value2
}
```

首先，我们查找保存字典的变量。你不一定需要将字典赋值给变量，但这样做非常常见，以便将其保存在内存中并在代码中稍后使用。

然后是括弧状的花括弧，有时也称为括弧状的方括弧。在括弧状的花括弧内，有密钥-值点对。

每个密钥都关联一个值，因此你可以使用密钥来访问该值。每个值之后（最后一个除外）都有一个逗号，用于分隔不同的键值点对。密钥在字典中必须是唯一的，并且必须是不可变的数据类型。然而，值可以重复，并且可以是任何数据类型。

这里有一个字典示例，用于保存关于 Margherita pizza 配方的信息：

```python
pizza = {
    'name': 'Margherita Pizza',
    'price': 8.9,
    'calories_per_slice': 250,
    'toppings': ['mozzarella', 'basil']
}
```

该字典被赋值给 `pizza` 变量。它有四个键值点对：`name`、`price`、`calories_per_slice` 和 `toppings`。

另一个备选是使用 `dict()` 构造函数，它从密钥-值点对的序列构建字典。

这将是我们披萨示例的等效语法。我们将一个元组列表作为参数传递给 `dict()` 构造函数。这些元组包含第一个元素作为密钥，第二个元素作为值。

```python
pizza = dict([('name', 'Margherita Pizza'), ('price', 8.9), ('calories_per_slice', 250), ('toppings', ['mozzarella', 'basil'])])
```

要访问键值对的值，你可以使用这种语法，称为方括弧表示法。它是保存字典的变量名，后跟方括弧，以及你想在方括弧内访问的键：

```python
dictionary[key]
```

在我们的披萨示例中，如果你想访问 `name` 的值，你需要写出变量名 `pizza`，后跟方括弧，和带有引用的密钥 `name`：

```python
pizza['name']
```

这将计算为：

```python
'Margherita Pizza'
```

要更新一个值，你只需添加赋值操作符，后跟新值。

如果字典中不存在该密钥，将创建一个新的键值点对。在较新版本的 Python 中，字典会保留插入顺序。当你需要迭代字典时，这非常有用：

```python
pizza['name'] = 'Margherita'
```

现在密钥 `name` 的值是 `'Margherita'`：

```python
print(pizza['name']) # 'Margherita'
```

字典也有有助于执行常见操作的帮助方法。

`.get()` 方法检索与密钥关联的值。它类似于我们刚才使用的方括弧表示法，但它的优点是你可以设置一个默认值，因此如果密钥不存在，你不会得到误差：

```python
dictionary.get(key, default)
```

在此示例中，如果 `toppings` 密钥不存在，它将返回一个空列表，这是我们作为第二个参数传递的默认值。但如果 `toppings` 存在，它将返回该值：

```python
pizza.get('toppings', []) # ['mozzarella', 'basil']
```

`.keys()` 和 `.values()` 方法分别返回包含字典中所有密钥和值的视图对象：

```python
pizza.keys()
# dict_keys(['name', 'price', 'calories_per_slice'])

pizza.values()
# dict_values(['Margherita Pizza', 8.9, 250])
```

视图对象只是查看字典内容的一种方式，而不会创建数据的单独拷贝。

`.items()` 方法返回一个包含字典中所有键值点对的视图对象，包括键和值：

```python
pizza.items()
# dict_items([('name', 'Margherita Pizza'), ('price', 8.9), ('calories_per_slice', 250)])
```

`.clear()` 方法会从字典中移除所有的键值对：

```python
pizza.clear()
```

`.pop()` 方法移除你作为第一个参数指定的密钥对应的点对，并返回其值。如果密钥不存在，则返回你作为第二个参数指定的默认值。如果密钥不存在且你未传入默认值，则引起 `KeyError`：

```python
pizza.pop('price', 10)
pizza.pop('total_price') # KeyError
```

在 Python 3.7 及更高版本中，`.popitem()` 方法会移除最后插入的项：

```python
pizza.popitem()
```

最后，`.update()` 方法使用另一个字典的密钥-值点对来更新密钥-值点对。如果它们有相同的密钥，则其值将被覆盖。

在此示例中，我们正在更新 `pizza` 字典。`price` 密钥在它们两个中都存在，因此其值将被替换为 `15`。

但是 `total_time` 是新建的，所以它将作为一个新的键值点对添加到 `pizza` 字典中：

```python
pizza.update({ 'price': 15, 'total_time': 25 })
```

这是带有更新的 `price` 和新建的 `total_time` 的新字典。注意现在 `price` 是 `15`，而 `total_time` 是一个新的密钥-值点对：

```python
{
    'name': 'Margherita Pizza', 
    'price': 15, 
    'calories_per_slice': 250, 
    'toppings': ['mozzarella', 'basil'], 
    'total_time': 25
}
```

这些是一些最常用的字典方法，但还有更多。选择合适的方法有助于高效地执行复杂操作。

# --questions--

## --text--

Python 字典中的元素主要如何组织和访问？

## --answers--

使用循序的索引，就像一个列表。

### --feedback--

考虑区分字典与列表和元组的核心特征。

---

使用密钥-值点对，其中密钥是唯一的。

---

使用类似于文件系统的树状结构。

### --feedback--

考虑区分字典与列表和元组的核心特征。

---

使用链表，其中元素指向下一个。

### --feedback--

考虑区分字典与列表和元组的核心特征。

## --video-solution--

2

## --text--

Python 字典的主要特征是什么，使其不同于列表或元组？

## --answers--

字典会创建所有密钥-值点对的副本。 

### --feedback--

考虑使字典在基于名称或标签检索数据时特别有用的特色。

---

字典是可变的。

### --feedback--

考虑使字典在基于名称或标签检索数据时特别有用的特色。

---

字典允许使用密钥进行快速查找。

---

字典可以保存副本值。

### --feedback--

考虑使字典在基于名称或标签检索数据时特别有用的特色。

## --video-solution--

3

## --text--

哪个字典 `method` 用于检索与 `key` 关联的值，并在未找到 `key` 时提供一个默认值？

## --answers--

`.keys()`

### --feedback--

考虑哪个方法是为安全获取值而设计的，不会抛出误差。

---

`.values()`

### --feedback--

考虑哪个方法是为安全获取值而设计的，不会抛出误差。

---

`.pop()`

### --feedback--

考虑哪个方法是为安全获取值而设计的，不会抛出误差。

---

`.get()`

## --video-solution--

4

