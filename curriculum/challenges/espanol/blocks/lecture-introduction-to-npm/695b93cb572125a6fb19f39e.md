---
id: 695b93cb572125a6fb19f39e
title: ¿Qué es el archivo package-lock.json?
challengeType: 19
dashedName: what-is-the-package-lock-json-file
---

# --description--

Cuando instalas dependencias con npm, especialmente en un proyecto existente, npm revisa tu archivo `package.json` para ver qué paquetes necesita tu proyecto.

Cada dependencia en `package.json` incluye un número de versión como este:

```bash
"lodash": "^4.17.21"
```

Como aprendiste antes, el **caret (^)** permite que npm instale versiones menores y parches más recientes como `4.18.0` o `4.17.22`. Esta flexibilidad es útil, pero también puede causar problemas.

Si dos desarrolladores ejecutan `npm install` en diferentes momentos, npm podría instalar versiones ligeramente diferentes del mismo paquete. Incluso pequeñas diferencias pueden causar errores o comportamientos inesperados.

El archivo `package-lock.json` resuelve esto. Se crea automáticamente la primera vez que ejecutas `npm install`, y bloquea las versiones exactas de cada dependencia que se instaló, incluyendo todas las dependencias secundarias, que son dependencias de dependencias.

Esto garantiza que todos los que trabajan en el proyecto obtengan las mismas versiones de los paquetes cada vez.

Aquí tienes un archivo simple `package.json` con `lodash` como dependencia:

```bash
{
  "name": "package-lock-json",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "type": "commonjs",
  "dependencies": {
    "lodash": "^4.17.21"
  }
}
```

Y aquí está la sección correspondiente del `package-lock.json`:

```bash
"node_modules/lodash": {
  "version": "4.17.21",
  "resolved": "https://registry.npmjs.org/lodash/-/lodash-4.17.21.tgz",
  "integrity": "sha512-v2kDEe57..."
}
```

Nota la diferencia:

* En `package.json`, `lodash` está listado como `^4.17.21` — una regla flexible.
    
* En `package-lock.json`, `lodash` está fijado a la versión `4.17.21`.
    

No importa cuándo alguien ejecute `npm install`, obtendrá esa versión exacta.

De esta manera, sin importar cuándo alguien ejecute `npm install`, obtendrá la misma versión exacta de Lodash cada vez.

Ten en cuenta que esto también se aplica a las dependencias secundarias, que son dependencias de cualquier dependencia que uses para tu proyecto.

Por ejemplo, aquí está parte del archivo `package-lock.json` para un proyecto que usa Express:

```json
{
  "name": "package-lock-json-file",
  "version": "1.0.0",
  "lockfileVersion": 3,
  "requires": true,
  "packages": {
    "": {
      "name": "package-lock-json-file",
      "version": "1.0.0",
      "license": "ISC",
      "dependencies": {
        "express": "^5.2.1"
      }
    },
    ...
    "node_modules/etag": {
      "version": "1.8.1",
      "resolved": "https://registry.npmjs.org/etag/-/etag-1.8.1.tgz",
      "integrity": "sha512-aIL5Fx7mawVa300al2BnEE4iNvo1qETxLrPI/o05L7z6go7fCw1J6EQmbK4FmJ2AS7kgVF/KEZWufBfdClMcPg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/express": {
      "version": "5.2.1",
      "resolved": "https://registry.npmjs.org/express/-/express-5.2.1.tgz",
      "integrity": "sha512-hIS4idWWai69NezIdRt2xFVofaF4j+6INOpJlVOLDO8zXGpUVEVzIYk12UUi2JzjEzWL3IOAxcTubgz9Po0yXw==",
      "license": "MIT",
      "dependencies": {
        "accepts": "^2.0.0",
        "body-parser": "^2.2.1",
        "content-disposition": "^1.0.0",
        "content-type": "^1.0.5",
        "cookie": "^0.7.1",
        "cookie-signature": "^1.2.1",
        "debug": "^4.4.0",
        "depd": "^2.0.0",
        "encodeurl": "^2.0.0",
        "escape-html": "^1.0.3",
        "etag": "^1.8.1",
        "finalhandler": "^2.1.0",
        "fresh": "^2.0.0",
        "http-errors": "^2.0.0",
        "merge-descriptors": "^2.0.0",
        "mime-types": "^3.0.0",
        "on-finished": "^2.4.1",
        "once": "^1.4.0",
        "parseurl": "^1.3.3",
        "proxy-addr": "^2.0.7",
        "qs": "^6.14.0",
        "range-parser": "^1.2.1",
        "router": "^2.2.0",
        "send": "^1.1.0",
        "serve-static": "^2.2.0",
        "statuses": "^2.0.1",
        "type-is": "^2.0.1",
        "vary": "^1.1.2"
      },
      "engines": {
        "node": ">= 18"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/express"
      }
    },
    ...others
  }
}
```

Puedes ver que además de Express en sí, hay otros paquetes como `accepts`, `mime-types` y `negotiator`. Estos son dependencias secundarias, que son paquetes de los que Express depende internamente para funcionar.

También nota que, aunque las `dependencies` en `node_modules/express` usan caracteres de intercalación para rangos, si encuentras la entrada para cada dependencia secundaria como `node_modules/etags`, están fijadas a una versión específica.

En resumen, el archivo `package-lock.json` mantiene a todos sincronizados y asegura la consistencia en las máquinas de los desarrolladores, servidores CI, despliegues y otros entornos.

Es importante siempre hacer commit de tu archivo `package-lock.json` con Git para que tu equipo comparta la misma configuración. Además, no edites el archivo `package-lock.json` manualmente—npm lo actualizará automáticamente cada vez que cambien las dependencias.

# --questions--

## --text--

¿Cómo resuelve el archivo `package-lock.json` los problemas de inconsistencia de versiones entre diferentes entornos?

## --answers--

Al actualizar automáticamente todas las dependencias a sus versiones más recientes.

### --feedback--

Piensa en cómo garantiza que todos instalen las mismas versiones de dependencias.

---

Eliminando dependencias antiguas antes de instalar nuevas.

### --feedback--

Piensa en cómo asegura que todos instalen las mismas versiones de dependencias.

---

Al congelar las versiones exactas de las dependencias que se instalaron.

---

Almacenar solo los números de versión mayor de cada dependencia.

### --feedback--

Piensa en cómo asegura que todos instalen las mismas versiones de dependencias.

## --video-solution--

3

## --text--

¿Por qué siempre deberías hacer commit de tu archivo `package-lock.json` en Git?

## --answers--

Para hacer que npm funcione más rápido en tu máquina.

### --feedback--

Piensa en mantener el entorno de cada desarrollador consistente.

---

Para que tu equipo comparta las mismas versiones de dependencias y configuración.

---

Para actualizar automáticamente las dependencias obsoletas.

### --feedback--

Piensa en mantener el entorno de cada desarrollador consistente.

---

Para reducir el tamaño de tu repositorio Git.

### --feedback--

Piensa en mantener el entorno de cada desarrollador consistente.

## --video-solution--

2

## --text--

¿Qué son las dependencias hijas?

## --answers--

Paquetes que están instalados pero nunca se usan en el proyecto.

### --feedback--

Piensa en las dependencias de las que dependen tus dependencias principales.

---

Paquetes que dependen de los archivos principales de tu proyecto para ejecutarse.

### --feedback--

Piensa en las dependencias de las que dependen tus dependencias principales.

---

Paquetes que solo se usan durante el desarrollo.

### --feedback--

Piensa en las dependencias de las que dependen tus dependencias principales.

---

Paquetes de los que dependen internamente tus dependencias para funcionar.

## --video-solution--

4
