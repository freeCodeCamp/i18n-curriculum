---
id: 5a24c314108439a4d4036150
title: 在 Store 中處理一個 Action
challengeType: 6
forumTopicId: 301444
dashedName: handle-an-action-in-the-store
---

# --description--

在動作被創建並分派之後，Redux 儲存庫需要知道如何回應該動作。這是 `reducer` 函式的工作。Redux 中的 reducer 負責根據動作進行狀態的修改。`reducer` 以 `state` 和 `action` 作為引數，並且它總是傳回新的 `state`。重要的是要了解這是 reducer 的**唯一**角色。它沒有副作用——它從不呼叫 API 端點，也從不有任何隱藏的驚喜。reducer 僅僅是一個純函式，接收 state 和 action，然後傳回新的 state。

Redux 的另一個關鍵原則是 `state` 是唯讀的。換句話說，`reducer` 函式（程式）必須**始終**傳回 `state` 的新副本，且絕不直接修改 state。Redux 並不強制 state 的不變性，然而，你有責任在你的 reducer 函式（程式）程式碼中強制執行它。你將在後續的挑戰中練習這點。

# --instructions--

程式碼編輯器中有先前的範例以及 `reducer` 函式的起始部分。請填寫 `reducer` 函式的主體，使其在接收到型別為 `'LOGIN'` 的 action 時，傳回一個 `login` 設為 `true` 的狀態物件。否則，傳回目前的 `state`。請注意，當前的 `state` 和分派的 `action` 會傳入 reducer，因此你可以直接使用 `action.type` 存取 action 的型別。

# --hints--

呼叫函式（程式）`loginAction`應該傳回一個屬性`type`設定為字串`LOGIN`的物件。

```js
assert(loginAction().type === 'LOGIN');
```

該 store 應該以一個 `login` 屬性設為 `false` 的物件初始化。

```js
assert(store.getState().login === false);
```

分派 `loginAction` 應該將商店狀態中的 `login` 屬性更新為 `true`。

```js
assert(
  (function () {
    const initialState = store.getState();
    store.dispatch(loginAction());
    const afterState = store.getState();
    return initialState.login === false && afterState.login === true;
  })()
);
```

如果動作不是 `LOGIN` 型別，store 應該傳回目前的狀態。

```js
assert(
  (function () {
    store.dispatch({ type: '__TEST__ACTION__' });
    let afterTest = store.getState();
    return typeof afterTest === 'object' && afterTest.hasOwnProperty('login');
  })()
);
```

# --seed--

## --seed-contents--

```js
const defaultState = {
  login: false
};

const reducer = (state = defaultState, action) => {
  // Change code below this line

  // Change code above this line
};

const store = Redux.createStore(reducer);

const loginAction = () => {
  return {
    type: 'LOGIN'
  }
};
```

# --solutions--

```js
const defaultState = {
  login: false
};

const reducer = (state = defaultState, action) => {

  if (action.type === 'LOGIN') {
    return {login: true}
  }

  else {
    return state
  }

};

const store = Redux.createStore(reducer);

const loginAction = () => {
  return {
    type: 'LOGIN'
  }
};
```
