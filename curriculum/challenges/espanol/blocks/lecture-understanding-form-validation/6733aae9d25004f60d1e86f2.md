---
id: 6733aae9d25004f60d1e86f2
title: ¿Cuáles son algunas formas de validar formularios usando JavaScript?
challengeType: 19
dashedName: what-are-some-ways-to-validate-forms-using-javascript
---

# --interactive--

In a previous lesson, you've learned how to use HTML to restrict the values your users can submit in your form. Pero a veces eso no es suficiente. Si deseas ser más específico, como mostrar tus propios mensajes de error al usuario, necesitarás usar JavaScript.

Ciertos elementos HTML, como `textarea` y elementos `input`, exponen una API de Validación de Restricciones. Esta API te permite afirmar que el valor proporcionado por el usuario para ese elemento cumpla con cualquier validación a nivel HTML que hayas escrito, como longitud mínima o coincidencia de patrones.

Pero, ¿cómo puedes usarlo realmente? Digamos que quisieras que los empleados de una empresa envíen mensajes de comentarios a través de un formulario como este:

:::interactive_editor

```html
<link rel="stylesheet" href="styles.css" />
<form>
  <label>Enter your email: </label>
  <input required type="email" />

  <label>Enter your feedback: </label>
  <textarea required placeholder="Your feedback here..."></textarea>

  <button type="submit">Submit Feedback</button>
</form>
```

```css
form {
  max-width: 400px;
  margin: 20px auto;
  display: flex;
  flex-direction: column;
  gap: 12px;
  font-family: Arial, sans-serif;
}

label {
  font-weight: 600;
  margin-bottom: 4px;
  color: #333;
}

input,
textarea {
  padding: 8px 12px;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: 14px;
  width: 100%;
  box-sizing: border-box;
  transition: border-color 0.2s, box-shadow 0.2s;
}

input:focus,
textarea:focus {
  border-color: #0078d4;
  box-shadow: 0 0 3px rgba(0, 120, 212, 0.5);
  outline: none;
}

textarea {
  resize: vertical;
  min-height: 100px;
}

button[type="submit"] {
  background-color: #0078d4;
  color: #fff;
  border: none;
  padding: 10px 16px;
  font-size: 14px;
  border-radius: 4px;
  cursor: pointer;
  transition: background-color 0.2s;
}

button[type="submit"]:hover {
  background-color: #005ea2;
}

```

:::

Estamos usando el input de correo electrónico que viene con una validación incorporada para verificar validación básica como si la entrada incluye el signo @.

Pero ¿qué pasa si el usuario proporciona una dirección de correo electrónico como `example@email.com`? Esto pasaría la validación básica, pero queremos ser más específicos al aceptar correos electrónicos de quienes tienen una dirección de correo electrónico de la empresa.

Aquí es donde podemos usar el atributo `pattern` para especificar que la dirección de correo electrónico debe terminar en una dirección de correo electrónico de la empresa. Aquí está lo que el ejemplo actualizado parecerá:

:::interactive_editor

```html
<link rel="stylesheet" href="styles.css" />
<form>
  <label>Enter your email: </label>
  <input required placeholder="username@sampleCompany.com" type="email" pattern=".+@sampleCompany\.com" />

  <label>Enter your feedback: </label>
  <textarea required placeholder="Your feedback here..."></textarea>

  <button type="submit">Submit Feedback</button>
</form>
```

```css
form {
  max-width: 400px;
  margin: 20px auto;
  display: flex;
  flex-direction: column;
  gap: 12px;
  font-family: Arial, sans-serif;
}

label {
  font-weight: 600;
  margin-bottom: 4px;
  color: #333;
}

input,
textarea {
  padding: 8px 12px;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: 14px;
  width: 100%;
  box-sizing: border-box;
  transition: border-color 0.2s, box-shadow 0.2s;
}

input:focus,
textarea:focus {
  border-color: #0078d4;
  box-shadow: 0 0 3px rgba(0, 120, 212, 0.5);
  outline: none;
}

textarea {
  resize: vertical;
  min-height: 100px;
}

button[type="submit"] {
  background-color: #0078d4;
  color: #fff;
  border: none;
  padding: 10px 16px;
  font-size: 14px;
  border-radius: 4px;
  cursor: pointer;
  transition: background-color 0.2s;
}

button[type="submit"]:hover {
  background-color: #005ea2;
}

```

:::

Ahora, si intentas enviar el comentario, verás un mensaje que dice "Por favor, ajusta al formato solicitado."

Aunque el `input` tiene texto de marcador de posición mostrando el formato deseado, sería mejor incluir un mensaje de error personalizado usando JavaScript.

Primero, echemos un vistazo al método `checkValidity()`:

:::interactive_editor

```html
<link rel="stylesheet" href="styles.css" />
<form>
  <label>Enter your email: </label>
  <input required placeholder="username@sampleCompany.com" type="email" pattern=".+@sampleCompany\.com" />

  <label>Enter your feedback: </label>
  <textarea required placeholder="Your feedback here..."></textarea>

  <button type="submit">Submit Feedback</button>
</form>
<script src="index.js"></script>
```

```css
form {
  max-width: 400px;
  margin: 20px auto;
  display: flex;
  flex-direction: column;
  gap: 12px;
  font-family: Arial, sans-serif;
}

label {
  font-weight: 600;
  margin-bottom: 4px;
  color: #333;
}

input,
textarea {
  padding: 8px 12px;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: 14px;
  width: 100%;
  box-sizing: border-box;
  transition: border-color 0.2s, box-shadow 0.2s;
}

input:focus,
textarea:focus {
  border-color: #0078d4;
  box-shadow: 0 0 3px rgba(0, 120, 212, 0.5);
  outline: none;
}

textarea {
  resize: vertical;
  min-height: 100px;
}

button[type="submit"] {
  background-color: #0078d4;
  color: #fff;
  border: none;
  padding: 10px 16px;
  font-size: 14px;
  border-radius: 4px;
  cursor: pointer;
  transition: background-color 0.2s;
}

button[type="submit"]:hover {
  background-color: #005ea2;
}

```

```js
const input = document.querySelector("input");

input.addEventListener("input", (e) => {
  console.log(e.target.checkValidity())
})
```

:::

En el ejemplo anterior, hemos consultado nuestro input del DOM y hemos agregado un evento input.

Sabemos que `e.target` se refiere al elemento que activó el evento. En este caso, nuestro `input`. Pero, ¿qué es el método `checkValidity()`?

Este es parte de la API de Validación de Restricciones. El método `checkValidity()` devuelve `true` si el elemento coincide con toda la validación de HTML (basado en sus atributos) y `false` si falla.

Cuando probamos con una entrada inválida, vemos que `false` se registra en la consola. Ahora que sabemos que la entrada es inválida, reportemos la invalidez:

:::interactive_editor

```html
<link rel="stylesheet" href="styles.css" />
<form>
  <label>Enter your email: </label>
  <input required placeholder="username@sampleCompany.com" type="email" pattern=".+@sampleCompany\.com" />

  <label>Enter your feedback: </label>
  <textarea required placeholder="Your feedback here..."></textarea>

  <button type="submit">Submit Feedback</button>
</form>
<script src="index.js"></script>
```

```css
form {
  max-width: 400px;
  margin: 20px auto;
  display: flex;
  flex-direction: column;
  gap: 12px;
  font-family: Arial, sans-serif;
}

label {
  font-weight: 600;
  margin-bottom: 4px;
  color: #333;
}

input,
textarea {
  padding: 8px 12px;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: 14px;
  width: 100%;
  box-sizing: border-box;
  transition: border-color 0.2s, box-shadow 0.2s;
}

input:focus,
textarea:focus {
  border-color: #0078d4;
  box-shadow: 0 0 3px rgba(0, 120, 212, 0.5);
  outline: none;
}

textarea {
  resize: vertical;
  min-height: 100px;
}

button[type="submit"] {
  background-color: #0078d4;
  color: #fff;
  border: none;
  padding: 10px 16px;
  font-size: 14px;
  border-radius: 4px;
  cursor: pointer;
  transition: background-color 0.2s;
}

button[type="submit"]:hover {
  background-color: #005ea2;
}

```

```js
const input = document.querySelector("input");

input.addEventListener("input", (e) => {
  if (!e.target.checkValidity()) {
    e.target.reportValidity();
  }
})
```

:::

Y como resultado, verás el mensaje de error del navegador "Por favor, ajusta al formato solicitado."

Informa del estado inválido inmediatamente, en lugar de esperar a que enviemos el formulario. Pero todavía está usando el mensaje predeterminado. Esto se debe a que el método `reportValidity` solo le indica al navegador que la entrada no es válida. El navegador aún elige cómo mostrar por qué no es válida. Ahí es donde entra el método `setCustomValidity`.

:::interactive_editor

```html
<link rel="stylesheet" href="styles.css" />
<form>
  <label>Enter your email: </label>
  <input required placeholder="username@sampleCompany.com" type="email" pattern=".+@sampleCompany\.com" />

  <label>Enter your feedback: </label>
  <textarea required placeholder="Your feedback here..."></textarea>

  <button type="submit">Submit Feedback</button>
</form>
<script src="index.js"></script>
```

```css
form {
  max-width: 400px;
  margin: 20px auto;
  display: flex;
  flex-direction: column;
  gap: 12px;
  font-family: Arial, sans-serif;
}

label {
  font-weight: 600;
  margin-bottom: 4px;
  color: #333;
}

input,
textarea {
  padding: 8px 12px;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: 14px;
  width: 100%;
  box-sizing: border-box;
  transition: border-color 0.2s, box-shadow 0.2s;
}

input:focus,
textarea:focus {
  border-color: #0078d4;
  box-shadow: 0 0 3px rgba(0, 120, 212, 0.5);
  outline: none;
}

textarea {
  resize: vertical;
  min-height: 100px;
}

button[type="submit"] {
  background-color: #0078d4;
  color: #fff;
  border: none;
  padding: 10px 16px;
  font-size: 14px;
  border-radius: 4px;
  cursor: pointer;
  transition: background-color 0.2s;
}

button[type="submit"]:hover {
  background-color: #005ea2;
}

```

```js
const input = document.querySelector("input");

input.addEventListener("input", (e) => {
  if (!e.target.checkValidity()) {
    e.target.setCustomValidity(
      "You must use a company email address that ends in @sampleCompany.com"
    );
  }
});
```

:::

Este método acepta un mensaje de error personalizado, que se muestra al usuario. Como resultado, verás el mensaje de error personalizado `Debes usar una dirección de correo electrónico de la empresa que termine en @sampleCompany.com`.

Si estás interesado en explorar más sobre los diferentes tipos de estados de validez y por qué falló una validación particular, puedes registrar la propiedad `validity` así:

:::interactive_editor

```html
<link rel="stylesheet" href="styles.css" />
<form>
  <label>Enter your email: </label>
  <input required placeholder="username@sampleCompany.com" type="email" pattern=".+@sampleCompany\.com" />

  <label>Enter your feedback: </label>
  <textarea required placeholder="Your feedback here..."></textarea>

  <button type="submit">Submit Feedback</button>
</form>
<script src="index.js"></script>
```

```css
form {
  max-width: 400px;
  margin: 20px auto;
  display: flex;
  flex-direction: column;
  gap: 12px;
  font-family: Arial, sans-serif;
}

label {
  font-weight: 600;
  margin-bottom: 4px;
  color: #333;
}

input,
textarea {
  padding: 8px 12px;
  border: 1px solid #ccc;
  border-radius: 4px;
  font-size: 14px;
  width: 100%;
  box-sizing: border-box;
  transition: border-color 0.2s, box-shadow 0.2s;
}

input:focus,
textarea:focus {
  border-color: #0078d4;
  box-shadow: 0 0 3px rgba(0, 120, 212, 0.5);
  outline: none;
}

textarea {
  resize: vertical;
  min-height: 100px;
}

button[type="submit"] {
  background-color: #0078d4;
  color: #fff;
  border: none;
  padding: 10px 16px;
  font-size: 14px;
  border-radius: 4px;
  cursor: pointer;
  transition: background-color 0.2s;
}

button[type="submit"]:hover {
  background-color: #005ea2;
}

```

```js
const input = document.querySelector("input");

input.addEventListener("input", (e) => {
  console.log(e.target.validity);
})
```

:::

La propiedad `validity` es una instancia del objeto `ValidityState`. Aquí hay un ejemplo de cómo podría verse el objeto en el navegador:

```js
ValidityState {
  badInput: false,
  customError: false,
  patternMismatch: true,
  rangeOverflow: false,
  rangeUnderflow: false,
  stepMismatch: false,
  tooLong: false,
  tooShort: false,
  typeMismatch: true,
  valueMissing: false,
  valid: true
}
```

Existen varias propiedades útiles que todas contienen el valor de un booleano de `true` o `false`.

Algunas de estas propiedades útiles que puedes explorar más por tu cuenta serían la propiedad `valueMissing`, que es `true` cuando se deja vacío un campo de entrada requerido. O el `patternMismatch` que es `true` si el valor no coincide con el patrón de expresión regular especificado.

Después de esta lección, te animo a que experimentes con los ejemplos dados en esta lección y explores más sobre las diferentes propiedades de validez.

# --questions--

## --text--

¿Qué método de la API de Validación de Restricciones se usa para verificar si un elemento de entrada cumple con todas sus restricciones de validación?

## --answers--

`validateInput()`

### --feedback--

La lección demuestra este método al agregar un event listener al elemento input.

---

`checkValidity()`

---

`isValid()`

### --feedback--

La lección demuestra este método al agregar un event listener al elemento input.

---

`testConstraints()`

### --feedback--

La lección demuestra este método al agregar un event listener al elemento input.

## --video-solution--

2

## --text--

¿Cuál es el propósito del método `setCustomValidity()` en la validación de formularios?

## --answers--

Para establecer estilos CSS personalizados para las entradas no válidas.

### --feedback--

La lección explica cómo se usa este método para proporcionar retroalimentación más informativa a los usuarios.

---

Para crear reglas de validación personalizadas.

### --feedback--

La lección explica cómo se usa este método para proporcionar retroalimentación más informativa a los usuarios.

---

Para mostrar un mensaje de error personalizado para entradas no válidas.

---

Para anular la validación predeterminada de HTML.

### --feedback--

La lección explica cómo se usa este método para proporcionar retroalimentación más informativa a los usuarios.

## --video-solution--

3

## --text--

¿Qué propiedad del objeto `validity` se vuelve verdadera cuando un campo de entrada requerido se deja vacío?

## --answers--

`isEmpty`

### --feedback--

La lección muestra esta propiedad al registrar el objeto `validity` para un campo obligatorio vacío.

---

`required`

### --feedback--

La lección muestra esta propiedad al registrar el objeto `validity` para un campo obligatorio vacío.

---

`valueMissing`

---

`invalidValue`

### --feedback--

La lección muestra esta propiedad al registrar el objeto `validity` para un campo obligatorio vacío.

## --video-solution--

3
