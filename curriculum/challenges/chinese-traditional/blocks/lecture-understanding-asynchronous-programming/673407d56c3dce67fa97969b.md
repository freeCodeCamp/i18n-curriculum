---
id: 673407d56c3dce67fa97969b
title: 什麼是 Async/Await，及其如何運作？
challengeType: 19
dashedName: what-is-async-await-and-how-does-it-work
---

# --interactive--

在之前的課程中，你學習了非同步程式設計，這讓其他程式碼能在我們等待某些耗時任務完成時繼續執行，例如從伺服器擷取資料、從檔案讀取資料等等。

`async`/`await` 建構於 promises 之上，使撰寫和閱讀非同步程式碼更容易。當你在函式前加上 `async` 關鍵字，表示該函式將永遠傳回一個 `Promise`。只有在 `async` 函式內，你才能使用 `await` 關鍵字，這讓你可以在繼續執行下一行程式碼之前，等待一個 `Promise` 被決議。以下是一個範例來說明 `async`/`await` 的運作方式：

:::interactive_editor

```js
async function delayedGreeting(name) {
  console.log("A Messenger entered the chat...");
  await new Promise(resolve => setTimeout(resolve, 2000));
  console.log(`Hello, ${name}!`);
}

delayedGreeting("Alice");
console.log("First Printed Message!");
```

:::

在這段程式碼中，我們定義了一個名為 `delayedGreeting` 的 `async` 函式。在這個函式內，我們使用 `await` 暫停執行 2 秒。延遲之後，它會列印一個問候語。 

當我們呼叫這個函式時，你會看到 `First Printed Message!` 在問候語之前出現。這是因為該函式是非同步的－它不會阻塞其餘程式碼的執行。

`async`/`await` 最大的優點之一是錯誤處理。使用 promises 時，我們經常必須使用 `.catch()` 方法來處理錯誤。使用 `async`/`await`，我們可以使用 `try`/`catch` 區塊。以下是一個範例：

```js
async function fetchUserData() {
  try {
    let response = await fetch(`https://api.example.com/users`);
    let userData = await response.json();
    console.log(userData);
  } catch (error) {
    console.log("Error fetching user data:", error);
  }
}

fetchUserData();
```

在此範例中，我們使用 `async`/`await` 從 API 取得使用者資料。`await` 關鍵字使用了兩次：一次用來等待 fetch 操作完成，另一次用來等待 JSON 解析結束。如果在此過程中發生任何錯誤，將會在 `catch` 區塊中捕捉。

# --questions--

## --text--

`async` 關鍵字在 JavaScript 中的主要用途是什麼？

## --answers--

讓函式（程式）執行得更快。

### --feedback--

思考 `async` 對函式的返回值所造成的影響。

---

用以顯示函式（程式）將永遠傳回 `Promise`。

---

為函式（程式）執行創建新的執行緒。

### --feedback--

思考 `async` 對函式的返回值所造成的影響。

---

為了防止函式（程式）被非同步呼叫。

### --feedback--

思考 `async` 對函式的返回值所造成的影響。

## --video-solution--

2

## --text--

`await` 關鍵字可以在哪裡使用於 JavaScript？

## --answers--

在程式碼中的任何地方。

### --feedback--

考慮 `await` 可以放置的位置限制。

---

在你的程式碼一開始。

### --feedback--

考慮 `await` 可以放置的位置限制。

---

在 `async` 函式中。

---

僅在 `try...catch` 區塊中。

### --feedback--

考慮 `await` 可以放置的位置限制。

## --video-solution--

3

## --text--

當在等待的 Promise 中發生錯誤時會發生什麼？

## --answers--

程式當機。

### --feedback--

思考錯誤處理如何與 `async`/`await` 一起運作。

---

錯誤會自動記錄到主控台。

### --feedback--

思考錯誤處理如何與 `async`/`await` 一起運作。

---

沒有任何東西，Promises 中的錯誤會被忽略。

### --feedback--

思考錯誤處理如何與 `async`/`await` 一起運作。

---

該錯誤可以使用 `try...catch` 區塊捕捉。

## --video-solution--

4
