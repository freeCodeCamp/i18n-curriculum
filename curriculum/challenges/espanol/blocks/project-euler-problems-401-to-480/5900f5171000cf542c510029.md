---
id: 5900f5171000cf542c510029
title: 'Problema 426: Sistema de caja-bola'
challengeType: 1
forumTopicId: 302096
dashedName: problem-426-box-ball-system
---

# --description--

Considera una fila infinita de cajas. Algunas de las cajas contienen una bola. Por ejemplo, una configuración inicial de 2 cajas ocupadas consecutivas seguidas de 2 cajas vacías, 2 cajas ocupadas, 1 caja vacía y 2 cajas ocupadas puede ser denotada por la secuencia (2, 2, 2, 1, 2), en la que el número de cajas ocupadas y vacías consecutivas aparece de forma alterna.

Un turno consiste en mover cada bola exactamente una vez según la siguiente regla: Transfiere la bola más a la izquierda que no haya sido movida a la caja vacía más cercana a su derecha.

Después de un turno, la secuencia (2, 2, 2, 1, 2) se convierte en (2, 2, 1, 2, 3) como se puede ver a continuación; nota que comenzamos la nueva secuencia empezando en la primera casilla ocupada.

<img alt="animation showing one complete turn from (2, 2, 2, 1, 2) to (2, 2, 1, 2, 3)" src="https://cdn.freecodecamp.org/curriculum/project-euler/box-ball-system-1.gif" style="background-color: white; padding: 10px; display: block; margin-right: auto; margin-left: auto; margin-bottom: 1.2rem;">

Un sistema como este se llama Box-Ball System o BBS para abreviar.

Se puede demostrar que después de un número suficiente de turnos, el sistema evoluciona a un estado donde el número consecutivo de cajas ocupadas es invariante. En el siguiente ejemplo, el número consecutivo de cajas ocupadas evoluciona a [1, 2, 3]; llamaremos a esto el estado final.

<img alt="four turns from occupied boxes [2, 2, 2] to final state [1, 2, 3]" src="https://cdn.freecodecamp.org/curriculum/project-euler/box-ball-system-2.gif" style="background-color: white; padding: 10px; display: block; margin-right: auto; margin-left: auto; margin-bottom: 1.2rem;">

Definimos la secuencia $\\{t_i\\}$:

$$\begin{align}
  & s_0 = 290\\,797 \\\\
  & s_{k + 1} = {s_k}^2\bmod 50\\,515\\,093 \\\\
  & t_k = (s_k\bmod 64) + 1
\end{align}$$

Partiendo de la configuración inicial $(t_0, t_1, \ldots, t_{10})$, el estado final se convierte en [1, 3, 10, 24, 51, 75].

Partiendo de la configuración inicial $(t_0, t_1, \ldots, t_{10\\,000\\,000})$, encuentra el estado final.

Da como respuesta la suma de los cuadrados de los elementos del estado final. Por ejemplo, si el estado final es [1, 2, 3], entonces $14 (= 1^2 + 2^2 + 3^2)$ es tu respuesta.

# --hints--

`boxBallSystem()` debería devolver `31591886008`.

```js
assert.strictEqual(boxBallSystem(), 31591886008);
```

# --seed--

## --seed-contents--

```js
function boxBallSystem() {

  return true;
}

boxBallSystem();
```

# --solutions--

```js
// solution required
```
