---
id: 687ea8bb2b781b19c790d00e
title: O que são Primary e Foreign Keys em SQL e como elas funcionam?
challengeType: 19
dashedName: what-are-primary-and-foreign-keys-in-sql-and-how-do-they-work
---

# --description--

Em SQL, chaves primárias e chaves estrangeiras são usadas para estabelecer relacionamentos entre tabelas.

Vamos começar com as chaves primárias.

Uma chave primária é uma coluna ou conjunto de colunas que identifica exclusivamente cada registro (linha) em uma tabela. Essa restrição garante que nenhum registro na tabela terá o mesmo valor para a chave primária.

É por isso que uma tabela só pode ter uma chave primária.

Os valores na coluna da chave primária também não podem ser `NULL`, então eles sempre terão um valor válido.

No PostgreSQL, para tornar uma coluna a chave primária da sua tabela, você só precisa adicionar `PRIMARY KEY` após o tipo de dado:

```sql
column_name data_type PRIMARY KEY
```

Este é um exemplo da tabela `students`:

```sql
CREATE TABLE students (
  student_id SERIAL PRIMARY KEY,
  name VARCHAR(100)
);
```

Cada estudante terá seu próprio `student_id` e esse ID será a chave primária da tabela. O tipo `SERIAL` é útil aqui porque garante que o `student_id` sempre terá um valor único.

Uma chave primária composta é usada quando uma tabela não possui uma única coluna única para identificar a linha. Neste caso, você pode usar uma combinação de duas ou mais colunas como a chave primária que, juntas, são únicas.

Para fazer isso, indique quais colunas são a chave primária composta quando você criar a tabela assim:

```sql
CREATE TABLE table_name (
  column1 data_type column_constraint,
  column2 data_type column_constraint,
  column3 data_type column_constraint,
  ...
  PRIMARY KEY (column1, column2)
);
```

Imagine que você tem uma tabela com as colunas `student_id` e `course_id` que informa em quais aulas os alunos estão matriculados.

Cada aluno será matriculado em várias aulas e cada aula terá vários alunos matriculados nela. Então nenhuma das colunas é única - mas você nunca terá o mesmo aluno matriculado na mesma turma mais de uma vez. Para que você possa usar a combinação das duas colunas como a chave primária:

```sql
CREATE TABLE course_enrollments (
  student_id INT,
  course_id INT,
  ...
  PRIMARY KEY (student_id, course_id),
);
```

Chaves primárias são essenciais para garantir a unicidade e integridade dos dados, para otimizar a recuperação de dados e para estabelecer relacionamentos com outras tabelas em um banco de dados relacional.

Isso nos leva ao próximo tipo de chave que abordaremos nesta lição: foreign keys.

Uma chave estrangeira é uma coluna (ou conjunto de colunas) em uma tabela que referencia a chave primária de outra tabela. Uma tabela pode ter várias chaves estrangeiras.

Neste exemplo, temos duas tabelas, `customers` e `orders`:

```sql
CREATE TABLE customers (
  customer_id SERIAL PRIMARY KEY,
  first_name VARCHAR(100) NOT NULL,
  ...
);

CREATE TABLE orders (
  order_id SERIAL PRIMARY KEY,
  customer_id INTEGER,
  ...
  FOREIGN KEY (customer_id) REFERENCES customers(customer_id)
);
```

A chave primária da tabela `customers` é `customer_id` e a chave primária da tabela `orders` é `order_id`.

Mas note que também há uma coluna `customer_id` na tabela `orders`.

Por que estamos armazenando informações do cliente na tabela `orders`?

Fazemos isso para criar uma relação entre as tabelas `customers` e `orders`. Cada pedido armazenará o ID do cliente que o enviou.

Para criar o relacionamento entre as tabelas, faremos a coluna `customer_id` na tabela `orders` uma chave estrangeira que referencia a coluna `customer_id` na tabela `customers`:

```sql
FOREIGN KEY (customer_id) REFERENCES customers(customer_id)
```

Os valores em uma coluna de chave estrangeira devem corresponder aos valores da chave primária na tabela referenciada ou ser `NULL` (se a chave estrangeira permitir `NULL`s).

Por que isso é útil?

Garantindo que essas colunas em ambas as tabelas correspondam exatamente, as chaves estrangeiras e primárias evitam a criação de registros "órfãos", registros que se referem a um registro inexistente em outra tabela.

Chaves primárias e estrangeiras são fundamentais para bancos de dados relacionais. Eles alimentam o aspecto "relacional" desses bancos de dados, permitindo que você modele dados do mundo real de forma precisa.

# --questions--

## --text--

Qual é o propósito principal de uma chave primária em uma tabela de banco de dados relacional?

## --answers--

Para vincular a tabela a outras tabelas.

### --feedback--

Pense no que torna cada linha em uma tabela distinta.

---

Para identificar exclusivamente cada registro na tabela.

---

Para definir o tipo de dado de uma coluna.

### --feedback--

Pense no que torna cada linha em uma tabela distinta.

---

Para impor relacionamentos com chaves estrangeiras na mesma tabela.

### --feedback--

Pense no que torna cada linha em uma tabela distinta.

## --video-solution--

2

## --text--

Uma chave estrangeira em uma tabela normalmente referencia qual chave em outra tabela?

## --answers--

Outra chave estrangeira

### --feedback--

Pense em qual chave na tabela referenciada garante a integridade e validade da relação criada pela chave estrangeira.

---

Um índice único

### --feedback--

Pense em qual chave na tabela referenciada garante a integridade e validade da relação criada pela chave estrangeira.

---

Uma chave primária

---

Qualquer coluna com o mesmo tipo de dado

### --feedback--

Pense em qual chave na tabela referenciada garante a integridade e validade da relação criada pela chave estrangeira.

## --video-solution--

3

## --text--

Qual das seguintes é uma característica de uma chave primária?

## --answers--

Pode conter valores NULL.

### --feedback--

Lembre-se do requisito fundamental para identificar cada linha distintamente.

---

Pode ser repetido na mesma tabela.

### --feedback--

Lembre-se do requisito fundamental para identificar cada linha distintamente.

---

Uma tabela pode ter várias chaves primárias.

### --feedback--

Lembre-se do requisito fundamental para identificar cada linha distintamente.

---

Deve conter valores únicos.

## --video-solution--

4
