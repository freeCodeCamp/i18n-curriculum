---
id: 6839b3295323f563efc68f5c
title: 扩充赋值是如何工作的？
challengeType: 19
dashedName: how-do-augmented-assignments-work
---

# --description--

扩充赋值将二元操作与赋值合并为一步。它获取一个变量，对其与另一个值执行操作，然后将结果保存回同一个变量。

如果你熟悉像 JavaScript 这样的语言，你可能听说过加法赋值操作符（`+=`）或减法赋值操作符（`-=`），以及其他操作符。它们在 Python 中也存在。唯一的区别是它们被称为**扩充赋值**。

扩充赋值的基本语法如下所示：

```python
variable <operator>= value
```

哪种方法更高效地完成此操作：

```python
variable = variable <operator> value
```

例如，下面是使用扩充赋值将 `5` 添加到现有变量的示例：

```python
my_var = 10
my_var += 5

print(my_var) # 15
```

这里是相同的内容，但没有使用扩充赋值：

```python
my_var = 10
my_var = my_var + 5

print(my_var) # 15
```

扩充赋值的优点是它提供了一种简洁且易读的方式来更新变量值，而无需重复变量名。反过来，这减少了冗余和可能因拼写错误或类似原因引起的潜在误差。

每个操作符都可以使用扩充赋值。我们已经看过了加法赋值操作符（`+=`），现在让我们看看其他的。

- 减法赋值操作符（`-=`）将右操作对象从左变量中减去，并将差值保存到左变量中：

```python
count = 14
count -= 3

print(count) # 11
```

- 乘法赋值操作符（`*=`）将左侧变量乘以右侧操作对象，并将乘积保存回左侧变量：
    

```python
product = 65
product *= 7

print(product) # 455
```

- 除法赋值操作符（`/=`）将左侧变量除以右侧变量，并将结果保存回左侧变量：
    

```python
price = 100
price /= 4

print(price) # 25.0
```

- 地板除操作符（`//=`）将左侧变量除以右侧变量并向下取整，然后将结果保存回左侧变量：
    

```python
total_pages = 23
total_pages //= 5

print(total_pages) # 4
```

- 模除赋值操作符（`%=`）计算左侧变量除以右侧的余数，并将结果保存回左侧变量：
    

```python
bits = 35
bits %= 2

print(bits) # 1
```

- 指数赋值操作符（`**=`）将左侧变量提升到右侧的幂，并将结果保存回左侧变量：
    

```python
power = 2
power **= 3

print(power) # 8
```

你也可以对字串使用一些扩充赋值操作符。例如，赋值加法操作符使连接字串变得简单：

```python
greet = 'Hello'
greet += ' World'

print(greet) # Hello World
```

乘法赋值操作符可用于重复字串：

```python
greet = 'Hello'
greet *= 3

print(greet) # HelloHelloHello
```

当你将其他扩充赋值用于字串时，会抛出 `TypeError`。

```python
greet = 'Hello'
greet -= ' World'

print(greet) # TypeError: unsupported operand type(s) for -=: 'str' and 'str'


greet = 'Hello'
greet /= 'World'

print(greet) # TypeError: unsupported operand type(s) for /=: 'str' and 'str' 
```

如果你想知道递增和递减操作符（`++` 和 `--`）是否在 Python 中有效，答案是否定的。那是因为 Python 有意避免了 C 风格的递增和递减快捷方式，以保持语言的清晰和显式。

你可以不用写 `x++`，直接写 `x += 1`，这样更明显地表示你正在将 `x` 的值增加 `1`。

在 Python 中写 `++x` 只是对一元的加号应用两次，并不会增加任何值：

```python
my_var = 5

print(+my_var)   # 5
print(++my_var)  # 5
print(+++my_var) # 5

my_var += 1

print(my_var) # 6
```

# --questions--

## --text--

使用扩充赋值操作符的主要优势是什么？

## --answers--

它们会自动转换数据类型。

### --feedback--

考虑扩充赋值如何帮助避免冗余并减少类型指派错误。

---

它们防止所有可能的语法错误。

### --feedback--

考虑扩充赋值如何帮助避免冗余并减少类型指派错误。

---

它们提供了一种简洁的方式来更新变量，而无需重复变量名。

---

它们使数学操作更快。

### --feedback--

考虑扩充赋值如何帮助避免冗余并减少类型指派错误。

## --video-solution--

3

## --text--

当你在 Python 中使用递增（`++`）和递减（`--`）操作符时会发生什么？

## --answers--

它们的工作方式与 C/C++ 中完全相同。

### --feedback--

思考 Python 如何避免使用 C 风格的递增和递减操作符。

---

它们会导致语法误差并使程序崩溃。

### --feedback--

思考 Python 如何避免使用 C 风格的递增和递减操作符。

---

它们被解释为双一元操作符，没有实际的递增/递减。

---

它们只在 Python 2 中有效，但在 Python 3 中被移除。

### --feedback--

思考 Python 如何避免使用 C 风格的递增和递减操作符。

## --video-solution--

3

## --text--

哪个扩充赋值操作符将变量提升到幂并将结果保存回该变量？

## --answers--

`^=`

### --feedback--

考虑使用与指数操作符相同符号的操作符。

---

`**=`

---

`*=`

### --feedback--

考虑使用与指数操作符相同符号的操作符。

---

`^^=`

### --feedback--

考虑使用与指数操作符相同符号的操作符。

## --video-solution--

2
