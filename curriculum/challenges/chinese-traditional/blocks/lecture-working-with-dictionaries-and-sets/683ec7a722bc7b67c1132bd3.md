---
id: 683ec7a722bc7b67c1132bd3
title: 什麼是字典，它們如何運作？
challengeType: 19
dashedName: what-are-dictionaries-and-how-do-they-work
---

# --description--

在 Python 中，字典是內建的資料結構，用來儲存鍵值配對的群集。它們的運作方式非常類似於真實的字典，你可以搜尋一個字來找到其對應的意義。

使用 Python 字典時，你會使用鍵來尋找對應的值。當你需要將值與唯一鍵關聯時，應該使用字典。當你需要根據鍵快速找到值，並且需要表述結構化資料時，這非常有用。

這是 Python 字典的一般語法：

```python
dictionary = {
    key1: value1,
    key2: value2
}
```

首先，我們找到持有字典的變數。你不一定需要將字典指定給變數，但這樣做非常常見，以便將它保存在記憶體中並在程式碼中稍後使用。

接著是大括號，有時也稱為花括號。在大括號內，有鍵值對組。

每個鍵都與一個值相關，所以你可以使用該鍵來存取該值。每個值之後（最後一個除外）都有一個逗號，用來分隔不同的鍵值配對。鍵在字典中必須是唯一的，且必須是不可變的資料型別。然而，值可以重複，且可以是任何資料型別。

這裡有一個字典範例，用來儲存關於瑪格麗塔披薩食譜的資訊：

```python
pizza = {
    'name': 'Margherita Pizza',
    'price': 8.9,
    'calories_per_slice': 250,
    'toppings': ['mozzarella', 'basil']
}
```

該字典被指定到 `pizza` 變數。它有四個鍵值對組：`name`、`price`、`calories_per_slice` 和 `toppings`。

另一個替代方案是使用 `dict()` 建構式，該建構式從一組鍵值配對中建置字典。

這將是我們披薩範例的等價語法。我們將一個包含多個元組的列表作為引數傳遞給 `dict()` 建構式。這些元組的第一個元素是鍵，第二個元素是值。

```python
pizza = dict([('name', 'Margherita Pizza'), ('price', 8.9), ('calories_per_slice', 250), ('toppings', ['mozzarella', 'basil'])])
```

要存取鍵值對的值，你可以使用這種語法，稱為括號表示法。它是包含字典的變數名稱，後面接著方括號，以及你想在方括號中存取的鍵：

```python
dictionary[key]
```

在我們的披薩範例中，如果你想存取 `name` 的值，你會寫出變數名稱 `pizza`，後面接方括號，並在引號中放入鍵 `name`：

```python
pizza['name']
```

這將會計算為：

```python
'Margherita Pizza'
```

要更新一個值，你只需要添加指定運算子，接著是新值。

如果鍵不存在於字典中，將會創建一個新的鍵值對組。在較新的 Python 版本中，字典會保留插入的順序。當你需要迭代字典時，這非常有用：

```python
pizza['name'] = 'Margherita'
```

現在鍵 `name` 的值是 `'Margherita'`：

```python
print(pizza['name']) # 'Margherita'
```

字典也有有用的方法來執行常見的操作。

`.get()` 方法會取得與鍵相關的值。它類似於我們剛剛使用的括號表示法，但它的優點是你可以設定預設值，因此如果鍵不存在，你不會收到錯誤：

```python
dictionary.get(key, default)
```

在此範例中，如果 `toppings` 鍵不存在，它將傳回一個空列表，這是我們作為第二個引數傳遞的預設值。但如果 `toppings` 存在，它將傳回該值：

```python
pizza.get('toppings', []) # ['mozzarella', 'basil']
```

`.keys()` 和 `.values()` 方法分別傳回包含字典中所有鍵和值的檢視物件：

```python
pizza.keys()
# dict_keys(['name', 'price', 'calories_per_slice'])

pizza.values()
# dict_values(['Margherita Pizza', 8.9, 250])
```

檢視物件只是查看字典內容的一種方式，並不會建立資料的獨立複本。

`.items()` 方法會傳回一個檢視物件，包含字典中所有的鍵值配對，包括鍵和值：

```python
pizza.items()
# dict_items([('name', 'Margherita Pizza'), ('price', 8.9), ('calories_per_slice', 250)])
```

`.clear()` 方法會從字典中移除所有的鍵值對組：

```python
pizza.clear()
```

`.pop()` 方法會移除你作為第一個引數指定的鍵所對應的鍵值配對，並傳回其值。如果該鍵不存在，則會傳回你作為第二個引數指定的預設值。如果該鍵不存在且你沒有傳入預設值，則會引發 `KeyError`：

```python
pizza.pop('price', 10)
pizza.pop('total_price') # KeyError
```

在 Python 3.7 及更新版本中，`.popitem()` 方法會移除最後插入的項目：

```python
pizza.popitem()
```

最後，`.update()` 方法會使用另一個字典的鍵值對來更新鍵值對。如果它們有共同的鍵，則會覆寫其值。

在這個範例中，我們正在更新 `pizza` 字典。`price` 鍵在兩者中皆存在，所以它的值將被取代為 `15`。

但是 `total_time` 是新的，因此它將作為新的鍵值配對添加到 `pizza` 字典中：

```python
pizza.update({ 'price': 15, 'total_time': 25 })
```

這是包含更新後 `price` 和新的 `total_time` 的新字典。注意現在 `price` 是 `15`，而 `total_time` 是一個新的鍵值對：

```python
{
    'name': 'Margherita Pizza', 
    'price': 15, 
    'calories_per_slice': 250, 
    'toppings': ['mozzarella', 'basil'], 
    'total_time': 25
}
```

這些是一些最常用的字典方法，但還有更多。選擇正確的方法有助於高效地執行複雜的操作。

# --questions--

## --text--

Python 字典中的元素主要如何組織和存取？

## --answers--

使用像列表一樣的連續索引。

### --feedback--

思考區別字典與列表和元組的核心特性。

---

使用鍵值配對，其中鍵是唯一的。

---

使用類似檔案系統的樹狀結構。

### --feedback--

思考區別字典與列表和元組的核心特性。

---

使用鏈結串列，其中元素指向下一個。

### --feedback--

思考區別字典與列表和元組的核心特性。

## --video-solution--

2

## --text--

Python 字典的主要特性是什麼，使它不同於列表或元組？

## --answers--

字典會創建所有鍵值對的複本。 

### --feedback--

思考使字典在根據名稱或標籤檢索資料時特別有用的特性。

---

字典是可變的。

### --feedback--

思考使字典在根據名稱或標籤檢索資料時特別有用的特性。

---

字典允許使用鍵快速查找。

---

字典可以儲存重複的值。

### --feedback--

思考使字典在根據名稱或標籤檢索資料時特別有用的特性。

## --video-solution--

3

## --text--

哪一個字典方法用於取得與鍵相關的值，並在找不到該鍵時提供預設值？

## --answers--

`.keys()`

### --feedback--

思考哪個方法是為了安全取得值而設計，且不會發出錯誤。

---

`.values()`

### --feedback--

思考哪個方法是為了安全取得值而設計，且不會發出錯誤。

---

`.pop()`

### --feedback--

思考哪個方法是為了安全取得值而設計，且不會發出錯誤。

---

`.get()`

## --video-solution--

4

