---
id: 692aba0a78ca391f10455b4c
title: ES 模块中的导入和导出如何工作？
challengeType: 19
dashedName: how-do-imports-and-exports-work-with-es-modules
---

# --description--

既然你已经了解了 CommonJS 模块系统，现在让我们来看一下 ES 模块系统。

ES 模块，或称 ECMAScript 模块，是由 ECMAScript 规格说明定义的 JavaScript 官方标准化模块形式。它们使用 `import` 和 `export` 语句，并且在 Node.js 中，它们是异步的装载，这更加高效。

Node.js 在以下分支中将文件视为 ES 模块：

* 具有 `.mjs` 扩展名的文件。
    
* 当最近的父级 `package.json` 文件包含顶层 `"type"` 字段且值为 `"module"` 时，且文件具有 `.js` 扩展名。
    

这里我们有你之前见过的相同的 `multiply` 函数，但现在我们将使用 ESM 系统。为此，我们为两个模块赋值 `.mjs` 扩展名。

要从 `math.mjs` 模块导出 `multiply` 函数，请使用 `export` 关键字，后跟你想要导出的函数、变量或对象的名称，放在括弧状的方括弧内：

```javascript
function multiply(a, b) {
  return a * b;
}

export { multiply };
```

你也可以通过在 `function` 关键字前使用 `export` 关键字直接导出函数。这称为命名导出。每个模块可以有多个命名导出：

```javascript
export function multiply(a, b) {
  return a * b;
}
```

然后，要导入此模块，使用 `import` 关键字，后跟括弧状的花括弧。注意我们使用的是 `import` 而不是 `require()`。这是 CommonJS 和 ES 模块之间的一个关键区别。

在花括弧内，我们写下想要导入的函数、变量或对象的名称。在这个例子中，是 `multiply`。然后，使用 `from` 关键字和模块的相对路径。此代码将成功运行，输出将是 `42`。

```javascript
import { multiply } from './math.mjs';

console.log(multiply(6, 7)); // 42
```

在 ES 系统中，你可以为每个模块设置一个默认导出。这样，你就不需要使用花括弧来导入它。

这是一个示例，我们将 `multiply` 函数设置为整个 `math.mjs` 模块的默认导出：

```javascript
export default function multiply(a, b) {
  return a * b;
}
```

现在我们不需要花括弧，因为函数将被默认导入和赋值：

```javascript
import multiply from './math.mjs';
```

如果你不使用文件扩展名或 `package.json` 文件来显式告诉 Node.js 你想使用哪种模块系统，它将检查源代码以查找 ES 模块语法。如果找到该语法，它将以 ES 模块方式运行代码；否则，它将以 CommonJS 模块方式运行。

虽然 CommonJS 曾作为 Node.js 早期的默认标准，但随着开发者越来越多地采用 ESM 以提高效率并增强与现代 JavaScript 的兼容性，了解它们的区别以及如何同时使用两者变得非常重要。

# --questions--

## --text--

在 ES Modules 中，哪个关键字用于装载模块？

## --answers--

`require()`

### --feedback--

考虑在现代 JavaScript 环境中使用哪个关键字来引入外部代码。

---

`module.exports`

### --feedback--

考虑在现代 JavaScript 环境中使用哪个关键字来引入外部代码。

---

`import`

---

`include()`

### --feedback--

考虑在现代 JavaScript 环境中使用哪个关键字来引入外部代码。

## --video-solution--

3

## --text--

以下哪种方式是在 ES 中将单个值作为主要导出的方法？

## --answers--

`module.exports`

### --feedback--

考虑使用哪种导出方法从模块提供单一的主要值。

---

`exports.add`

### --feedback--

考虑使用哪种导出方法从模块提供单一的主要值。

---

`export default`

---

`export const`

### --feedback--

考虑使用哪种导出方法从模块提供单一的主要值。

## --video-solution--

3

## --text--

ECMAScript 模块（ES）主要使用什么类型的装载？

## --answers--

同步的装载

### --feedback--

考虑现代浏览器如何导入外部 JavaScript 文件。

---

惰性装载

### --feedback--

考虑现代浏览器如何导入外部 JavaScript 文件。

---

异步的装载

---

条件式装载

### --feedback--

考虑现代浏览器如何导入外部 JavaScript 文件。

## --video-solution--

3
