---
id: 67329ffd75010f5ddeb4ea13
title: 什么是回调函数，以及它如何与 `forEach` 方法配合使用？
challengeType: 19
dashedName: what-is-a-callback-function-and-how-does-it-work-with-the-foreach-method
---

# --interactive--

在 JavaScript 中，回调函数是作为参数传递给另一个函数的函数，以便外部函数可以在特定点调用它。

这个概念是理解 JavaScript 许多方面的基础，包括 `forEach` 方法的工作原理。

让我们先从简单的上下文中理解什么是回调函数。

假设你有一个函数，并且在函数内部你想多次执行某些操作。你可以传递第二个函数（回调），在需要执行该特定操作时调用它，而不是将所有代码写在一个大函数中。这使代码更加灵活和模块化。

现在，让我们介绍 `forEach` 方法。`forEach` 是 JavaScript 中数组的内置方法。它允许你迭代数组中的每个元素，并对每个元素执行操作。你想执行的操作是在你提供给 `forEach` 的回调函数中定义的。

下面是 `forEach` 如何与回调函数一起工作的示例：

:::interactive_editor

```js
let numbers = [1, 2, 3, 4, 5];

numbers.forEach(function(number) {
  console.log(number * 2);
});
```

:::

在这个示例中，我们有一个数字数组。我们在这个数组上使用 `forEach` 方法，并将一个回调函数作为参数传递给 `forEach`。

此回调函数接受一个参数，该参数表现数组中的每个元素。`forEach` 方法将为数组中的每个元素调用此回调函数一次。

在这个分支中，回调函数将每个数字乘以 `2` 并记录结果日志。所以，当这段代码运行时，它将输出：

```md
2
4
6
8
10
```

理解回调函数会按顺序对数组中的每个元素调用一次非常重要。`forEach` 为你处理了循环，因此你不必自己编写 `for` 循环。

你也可以使用箭头函数作为回调，这可以使你的代码更加简洁：

:::interactive_editor

```js
let numbers = [1, 2, 3, 4, 5];
numbers.forEach(number => console.log(number * 2));
```

:::

这与前面的示例完全相同，但代码更少。

`forEach` 中的回调函数实际上可以接受最多三个参数：当前元素、当前元素的索引以及调用 `forEach` 的数组。

这是一个使用全部三者的示例：

:::interactive_editor

```js
let numbers = [1, 2, 3, 4, 5];
numbers.forEach((number, index, array) => {
  console.log(`Element ${number} is at index ${index} in array ${array}`);
});
```

:::

这将记录有关每个元素、其索引和原始数组的信息。

理解回调函数和像 `forEach` 这样的方法对于你在 JavaScript 中的进步非常重要。它们构成了语言中许多更高级的概念的基础，特别是在你将来课程中会学习的异步的编程。

# --questions--

## --text--

JavaScript 中回调函数的主要目的是什么？

## --answers--

创建一个新数组。

### --feedback--

思考为什么我们可能想将一个函数作为参数传递给另一个函数。

---

允许一个函数在稍后运行另一段代码。

---

定义一个新建变量。

### --feedback--

思考为什么我们可能想将一个函数作为参数传递给另一个函数。

---

替换 `for` 循环。

### --feedback--

思考为什么我们可能想将一个函数作为参数传递给另一个函数。

## --video-solution--

2

## --text--

`forEach` 中的回调函数会被调用多少次？

## --answers--

一次。

### --feedback--

考虑 `forEach` 如何迭代一个数组。

---

两次。

### --feedback--

考虑 `forEach` 如何迭代一个数组。

---

对数组中的每个元素执行一次。

---

这取决于数组的大小。

### --feedback--

考虑 `forEach` 如何迭代一个数组。

## --video-solution--

3

## --text--

以下哪项不是可以传递给 `forEach` 中回调函数的参数？

## --answers--

当前元素。

### --feedback--

记住我们提到的 `forEach` 可以提供给其回调的三个参数。

---

当前元素的索引。

### --feedback--

记住我们提到的 `forEach` 可以提供给其回调的三个参数。

---

调用了数组的 `forEach`。

### --feedback--

记住我们提到的 `forEach` 可以提供给其回调的三个参数。

---

数组的长度。

## --video-solution--

4
