---
id: 587d7fa7367417b2b2512bc4
title: 在 D3 中處理資料
challengeType: 6
forumTopicId: 301497
dashedName: work-with-data-in-d3
---

# --description--

D3 函式庫專注於資料驅動的方法。當你有一組資料時，你可以套用 D3 方法將它顯示在頁面上。資料有許多格式，但這個挑戰使用簡單的數字陣列。

第一步是讓 D3 知道這些資料。`data()` 方法用於一組 DOM 元素的選取，將資料附加到這些元素上。資料集作為引數傳遞給該方法。

一個常見的工作流程樣式是為集合中的每一筆資料在文件中創建一個新元素。D3 有用於此目的的 `enter()` 方法。

當 `enter()` 與 `data()` 方法結合時，它會檢視頁面中選取的元素，並將它們與集合中的資料條款數量進行比較。如果元素少於資料條款，則會創建缺少的元素。

這是一個範例，選取一個 `ul` 元素並根據陣列中的條款數量創建一個新的列表項目：

```html
<body>
  <ul></ul>
  <script>
    const dataset = ['a', 'b', 'c'];
    d3.select('ul')
      .selectAll('li')
      .data(dataset)
      .enter()
      .append('li')
      .text('New item');
  </script>
</body>
```

選擇尚未存在的元素可能會讓人感到困惑。這段程式碼告訴 D3 先選擇頁面上的 `ul`。接著，選擇所有列表項目，這會傳回一個空的選擇。然後 `data()` 方法檢視資料集並執行以下程式碼三次，每次對陣列中的一個條款。`enter()` 方法看到頁面上沒有 `li` 元素，但它需要 3 個（每個 `dataset` 中的資料各一個）。新的 `li` 元素會被附加到 `ul`，並且文字為 `New item`。

# --instructions--

選取 `body` 節點，然後選取所有 `h2` 元素。讓 D3 為 `dataset` 陣列中的每個條款創建並附加一個 `h2` 頁籤。`h2` 中的文字應該是 `New Title`。你的程式碼應該使用 `data()` 和 `enter()` 方法。

# --hints--

你的文件應該有 9 個 `h2` 元素。

```js
assert.lengthOf(document.querySelectorAll('h2'), 9);
```

`h2` 元素中的文字應該顯示為 `New Title`。大小寫和間距必須完全相符。

```js
const h2Elements = document.querySelectorAll('h2');
for (let i = 0; i < h2Elements.length; i++) {
  assert.match(h2Elements[i]?.textContent, /New Title/g);
}
```

你的程式碼應該使用 `data()` 方法。

```js
assert.match(code, /\.data/g);
```

你的程式碼應該使用 `enter()` 方法。

```js
assert.match(code, /\.enter/g);
```

# --seed--

## --seed-contents--

```html
<body>
  <script>
    const dataset = [12, 31, 22, 17, 25, 18, 29, 14, 9];

    // Add your code below this line



    // Add your code above this line
  </script>
</body>
```

# --solutions--

```html
<body>
  <script>
    const dataset = [12, 31, 22, 17, 25, 18, 29, 14, 9];

    d3.select('body')
      .selectAll('h2')
      .data(dataset)
      .enter()
      .append('h2')
      .text('New Title');
  </script>
</body>
```
