---
id: 673407be6af21d6766ed4b96
title: Fetch API 如何与常见的超文本传输协议方法和 res.json() 一起工作？
challengeType: 19
dashedName: how-does-the-fetch-api-work-with-common-http-methods-and-res-json
---

# --description--

在上一课中，我们了解了 Fetch API 是什么以及如何使用它。在本课中，我们将讨论 Fetch API 的 `GET`、`POST`、`PUT` 和 `DELETE` 超文本传输协议方法。

让我们从最常见的超文本传输协议方法开始，即 `GET` 方法。它用于从服务器检索数据。当你使用 `fetch()` 而不指定方法时，默认使用 `GET`。

```js
fetch('https://api.example.com/data')
```

在这段代码中，我们正在向 `https://api.example.com/data` 发起一个 `GET` 请求。现在，请注意你不能直接使用这些数据，你必须将响应转换为 JSON 形式。只有这样你才能在你的项目中任何地方使用它。以下是如何操作的示例：

```js
fetch('https://api.example.com/data')
  .then(response => response.json())
  .then(data => console.log(data))
```

在这段代码中，来自 Fetch API 的响应是一个 promise，我们使用 `.then` 处理器将响应转换为 JSON 格式。在之前的课程中，你已经学习过 `Promise` 是一个表现异步进程最终完成（或失败）及其值的对象。

Promise 的值在创建时未知。只有当异步进程完成时才知道。当我们将两个 `.then` 处理器链接到 fetch 调用时，这称为 promise 链式调用，将在下一课中讲解。

到目前为止，我们一直在从服务器检索资源。但是，你知道我们也可以向服务器发送数据吗？`POST` 方法用于向服务器发送数据以创建资源。以下是一个使用 `POST` 方法将数据创建到服务器的示例： 

```js
fetch('https://api.example.com/users', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
  },
  body: JSON.stringify({
    name: 'John Doe',
    email: 'john@example.com'
  })
})
```

在此示例中，我们发送一个 `POST` 请求以创建一个新用户。我们将方法指定为 `POST`，设置适当的头部，并包含带有我们想要发送的数据的 `body`。body 需要是一个字串，因此我们使用 `JSON.stringify()` 将我们的对象转换为 JSON 字串。

`PUT` 方法用于更新服务器的现有资源。以下是一个示例： 

```js
fetch('https://api.example.com/users/45', {
  method: 'PUT',
  headers: {
    'Content-Type': 'application/json',
  },
  body: JSON.stringify({
    name: 'John Smith',
    email: 'john@example.com'
  })
})
```

在这个例子中，仔细观察 URL，你可以看到末尾有一个 `45`。这通常用作唯一 ID 来识别我们试图更新的数据。我们在代码中使用了 `PUT` 方法，并且还将数据指定为 `body`，它将用于更新被识别的数据。 

`DELETE` 方法用于从服务器删除资源。以下是一个示例：

```js
fetch('https://api.example.com/users/45', {
  method: 'DELETE',
})
```

在这段代码中，我们包含了 `DELETE` 方法和 url 末尾的 ID 来标识需要删除的数据。 

# --questions--

## --text--

如果未指定，`fetch()` 使用的默认超文本传输协议方法是什么？

## --answers--

`POST`

### --feedback--

考虑从服务器检索数据时最常见的操作。

---

`GET`

---

`PUT`

### --feedback--

考虑从服务器检索数据时最常见的操作。

---

`DELETE`

### --feedback--

考虑从服务器检索数据时最常见的操作。

## --video-solution--

2

## --text--

使用 `fetch()` 通过 `POST` 请求发送数据时，你需要在将数据包含到体中之前对数据做什么？

## --answers--

加密它。

### --feedback--

考虑在将数据发送到请求体时需要如何格式化。

---

压缩它。

### --feedback--

考虑在将数据发送到请求体时需要如何格式化。

---

将其转换为 JSON 字串。

---

将其进行 Base64 编码。

### --feedback--

考虑在将数据发送到请求体时需要如何格式化。

## --video-solution--

3

## --text--

`response.json()` 方法的作用是什么？

## --answers--

将 JSON 数据发送到服务器。

### --feedback--

考虑服务器中的数据如何需要被处理才能在 JavaScript 中可用。

---

创建一个新的 JSON 对象。

### --feedback--

考虑服务器中的数据如何需要被处理才能在 JavaScript 中可用。

---

将响应正文解析为 JSON。

---

验证响应是否为 JSON 格式。

### --feedback--

考虑服务器中的数据如何需要被处理才能在 JavaScript 中可用。

## --video-solution--

3
