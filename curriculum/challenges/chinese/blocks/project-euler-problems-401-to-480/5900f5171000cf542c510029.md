---
id: 5900f5171000cf542c510029
title: '问题426：箱式球系统'
challengeType: 1
forumTopicId: 302096
dashedName: problem-426-box-ball-system
---

# --description--

考虑一排无限的盒子。其中一些盒子里有球。例如，初始配置为 2 个连续占用的盒子，后跟 2 个空盒子，2 个占用盒子，1 个空盒子，和 2 个占用盒子，可以用序列 (2, 2, 2, 1, 2) 表示，其中连续占用和空盒子的数量交替出现。

一次回合包括根据以下规则移动每个球一次：将最左边尚未移动的球转移到其右侧最近的空盒子中。

经过一轮后，序列 (2, 2, 2, 1, 2) 变为 (2, 2, 1, 2, 3)，如下所示；注意我们从第一个被占用的格子开始新建序列。

<img alt="animation showing one complete turn from (2, 2, 2, 1, 2) to (2, 2, 1, 2, 3)" src="https://cdn.freecodecamp.org/curriculum/project-euler/box-ball-system-1.gif" style="background-color: white; padding: 10px; display: block; margin-right: auto; margin-left: auto; margin-bottom: 1.2rem;">

这样的系统称为盒球系统，简称 BBS。

可以证明，在足够多的回合后，系统演变到一个连续占用盒子数量不变的状态。在下面的例子中，连续占用盒子数量演变为 [1, 2, 3]；我们称之为最终状态。

<img alt="four turns from occupied boxes [2, 2, 2] to final state [1, 2, 3]" src="https://cdn.freecodecamp.org/curriculum/project-euler/box-ball-system-2.gif" style="background-color: white; padding: 10px; display: block; margin-right: auto; margin-left: auto; margin-bottom: 1.2rem;">

我们定义序列 $\\{t_i\\}$：

$$\begin{align}
  & s_0 = 290\\,797 \\\\
  & s_{k + 1} = {s_k}^2\bmod 50\\,515\\,093 \\\\
  & t_k = (s_k\bmod 64) + 1
\end{align}$$

从初始配置 $(t_0, t_1, \ldots, t_{10})$ 开始，最终状态变为 [1, 3, 10, 24, 51, 75]。

从初始配置 $(t_0, t_1, \ldots, t_{10\\,000\\,000})$ 开始，查找最终状态。

将最终状态的元素的平方和作为你的答案。例如，如果最终状态是 [1, 2, 3]，那么你的答案是 $14 (= 1^2 + 2^2 + 3^2)$。

# --hints--

`boxBallSystem()` 应该返回 `31591886008`。

```js
assert.strictEqual(boxBallSystem(), 31591886008);
```

# --seed--

## --seed-contents--

```js
function boxBallSystem() {

  return true;
}

boxBallSystem();
```

# --solutions--

```js
// solution required
```
