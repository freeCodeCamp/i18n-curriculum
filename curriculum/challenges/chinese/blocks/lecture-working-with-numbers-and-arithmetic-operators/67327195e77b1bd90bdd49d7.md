---
id: 67327195e77b1bd90bdd49d7
title: 用数字和字符串进行计算会发生什么？
challengeType: 19
dashedName: what-happens-when-you-try-to-do-calculations-with-numbers-and-strings
---

# --interactive--

JavaScript 是一种有时会以令人惊讶甚至奇怪的方式工作的语言。 在计算中混合使用数字和字符串时，就会出现这样的意外。 你首先可能会尝试将一个数字和一个字符串相加。 在 JavaScript 中，`+` 运算符具有双重作用。 它既能处理加法，也能处理字符串连接，这是一种将两个字符串连接在一起的方法。

在使用 `+` 时，JavaScript 会将数字和字符串都视为字符串，并将它们连接在一起。 如果使用 `typeof` 操作符检查结果的类型，就会发现它确实是一个字符串：

:::interactive_editor

```js
const result = 5 + '10';

console.log(result); // 510
console.log(typeof result); // string
```

:::

如果调换 `5` 和 `'10'` 的顺序，你认为会发生什么？

:::interactive_editor

```js
const result = '10' + 5;

console.log(result); // 105
console.log(typeof result); // string
```

:::

你可以看到发生了同样的事情。 JavaScript 在 `'10'` 中看到了一个字符串，在 `5` 中看到了一个数字，因此它将数字转换为字符串，然后将它们连接起来。 这就是所谓的类型强制。 类型强制是指将一种数据类型的值转换成另一种数据类型。

当你尝试用字符串和数字进行其他算术运算，如减法、乘法或除法时，会变得更加有趣。 在这种情况下，JavaScript 会尝试先将字符串转换成数字，然后再进行数学运算，这也是另一种类型强制！ 具体如下：

:::interactive_editor

```js
const subtractionResult = '10' - 5;
console.log(subtractionResult); // 5
console.log(typeof subtractionResult); // number

const multiplicationResult = '10' * 2;
console.log(multiplicationResult); // 20
console.log(typeof multiplicationResult); // number

const divisionResult = '20' / 2;
console.log(divisionResult); // 10
console.log(typeof divisionResult); // number
```

:::

在上面的示例中，JavaScript 成功地将字符串 `'10'` 或 `'20'` 转换为数字，然后执行计算。 结果是，`'10' - 5` 等于 `5`、`'10' * 2` 等于 `20`、`'20' / 2` 等于 `10`。

但如果是非数字的字符串呢？ 让我们看看在这种情况下会发生什么：

:::interactive_editor

```js
const subtractionResult = 'abc' - 5;
console.log(subtractionResult); // NaN
console.log(typeof subtractionResult); // number

const multiplicationResult = 'abc' * 2;
console.log(multiplicationResult); // NaN
console.log(typeof multiplicationResult); // number

const divisionResult = 'abc' / 2;
console.log(divisionResult); // NaN
console.log(typeof divisionResult); // number
```

:::

在上面的示例中，字串 `'abc'` 不表现为有效的数字值，因此 JavaScript 无法将其转换为有意义的数字。当此类转换失败时，JavaScript 会返回 `NaN`，它代表“不是数字”。`NaN` 是 `Number` 类型的一个特殊值，表现为无效或不可表现的数字。

如果你对布尔值（`true` 或 `false`）执行算术操作会怎样？让我们看看会发生什么。JavaScript 在数学操作中将布尔值视为数字：`true` 变为 `1`，`false` 变为 `0`。

:::interactive_editor

```js
const result1 = true + 1;
console.log(result1); // 2
console.log(typeof result1); // number

const result2 = false + 1;
console.log(result2); // 1
console.log(typeof result2); // number

const result3 = 'Hello' + true;
console.log(result3); // "Hellotrue"
console.log(typeof result3); // string
```

:::

在前两个例子中，`true + 1` 等于 `2`，`false + 1` 等于 `1`。 在第三个例子的 `'Hello' + true` 中，JavaScript 将 `true` 转换成字符串，并与 `'Hello'` 连接，得到字符串 `'Hellotrue'`。

对于 `null` 和 `undefined`，进行数学运算时，JavaScript 将 `null` 视为 `0`、`undefined` 视为 `NaN`：

:::interactive_editor

```js
const result1 = null + 5;
console.log(result1); // 5
console.log(typeof result1); // number

const result2 = undefined + 5;
console.log(result2); // NaN
console.log(typeof result2); // number
```

:::

JavaScript 经常执行类型强制，自动转换数字、字符串和布尔值等数据类型，有时会以意想不到的方式进行转换。 了解这些转换对于在项目中避免错误和编写健壮的代码至关重要。

# --questions--

## --text--

运行下面的代码会发生什么？

```js
const result = 3 + "19";
```

## --answers--

JavaScript 会忽略字符串，只对数字执行操作。

### --feedback--

回想一下类型强制如何用于加法运算，以及如何使用相同的符号来组合字符串。

---

当你尝试在算术中混合使用字符串和数字时，JavaScript 会报错。

### --feedback--

回想一下类型强制如何用于加法运算，以及如何使用相同的符号来组合字符串。

---

JavaScript 将数字 `3` 转换为字符串 `"3"`，连接两个字符串，并将 `"319"` 赋值给 `result`。

---

JavaScript 将字符串 `"19"` 转换为数字 `19`，执行运算，并将 `22` 赋值给 `result` 。

### --feedback--

回想一下类型强制如何用于加法运算，以及如何使用相同的符号来组合字符串。

## --video-solution--

3

## --text--

运行下面的代码会发生什么？

```js
const result = "6" - 4;
```

## --answers--

转换失败，JavaScript 返回 `NaN`。

### --feedback--

回想一下类型强制在减法、乘法、除法和其他运算中是如何工作的。

---

JavaScript 将数字 `4` 转换为字符串 `"4"`，连接两个字符串，并将 `"64"` 赋值给 `result`。

### --feedback--

回想一下类型强制在减法、乘法、除法和其他运算中是如何工作的。

---

将 `Infinity` 赋值给 `result`。

### --feedback--

回想一下类型强制在减法、乘法、除法和其他运算中是如何工作的。

---

JavaScript 将字符串 `"6"` 转换为数字 `6`，执行运算，并将 `2` 赋值给 `result`。

## --video-solution--

4

## --text--

在 JavaScript 中对布尔值（`true` 或 `false`）进行算术运算时会发生什么？

## --answers--

JavaScript 会报错。

### --feedback--

考虑一下 JavaScript 在数字上下文中是如何解释 `true` 和 `false` 的。

---

JavaScript 会忽略布尔值，只对数字执行运算。

### --feedback--

考虑一下 JavaScript 在数字上下文中是如何解释 `true` 和 `false` 的。

---

在数学运算中，JavaScript 将 `true` 视为 `1`、`false` 视为 `0`。

---

JavaScript 在执行运算前会将布尔值转换为字符串。

### --feedback--

考虑一下 JavaScript 在数字上下文中是如何解释 `true` 和 `false` 的。

## --video-solution--

3
