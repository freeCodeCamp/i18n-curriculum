---
id: 6882913b2b58c2738eaaa2d1
title: 什麼是 `.gitignore` 檔案，以及應該包含哪些項目？
challengeType: 19
dashedName: what-is-a-gitignore-file-and-what-are-some-items-that-should-be-included-inside-it
---

# --description--

我們在之前的課程中簡要提到過 `.gitignore` 檔案。但這個檔案到底是什麼，以及你應該放入什麼內容？

`.gitignore` 檔案是一種與 Git 操作相關的特殊型別檔案。名稱暗示這個檔案用來告訴 Git 忽略某些東西，而這也是常見的使用情境。但它實際上是告訴 Git 停止追蹤某個檔案。這個區別很重要，稍後會進一步說明。

你實際上應該在這個檔案中放什麼？嗯，你應該列出你不想提交的項目。

第一個會是你的 secrets 檔案。這可能是像 `.env` 檔案，裡面儲存了你的應用程式要使用的 API 金鑰。也可能是你的應用程式需要用來驗證的私人 GPG 金鑰檔案。任何包含你不希望外洩給大眾的敏感資訊，都應該用 `.gitignore` 忽略。即使你的程式庫是私有的，你也應該假設它是公開的——當作任何人都能看到，並且小心不要提交 secrets。

讓我們來看看我們的檔案現在可能長什麼樣子：

```sh
# Secrets
.env
github.key
```

我們已告訴 Git 忽略 `.env` 檔案，該檔案中存放著我們的機密。我們也告訴 Git 忽略一個包含私密 GPG 金鑰的 `github.key` 檔案。

接下來要考慮的是你的專案所使用的軟體包或相依性。舉例來說，當你在處理 Node.js 專案時，你可能會從 npm 安裝軟體包。這些軟體包會放入你的專案中的 `node_modules` 資料夾，讓你的程式碼可以匯入並使用它們。

但是 `node_modules` 資料夾會變得非常龐大，而且你絕對不想提交所有那些軟體包並在每次更新時追蹤變更。相反地，你提交你的 `package.json` 檔案，以及相關的鎖檔（例如 `package-lock.json`、`pnpm-lock.yaml`）。這些檔案告訴 npm 要安裝哪些軟體包和版本，因此貢獻者可以安裝與你相同的相依性，而不必將它們提交到版本庫中。

讓我們繼續將 `node_modules` 添加到我們的 `.gitignore` 檔案：

```sh
# Secrets
.env
github.key

# Packages
node_modules
```

現在，讓我們談談 `.gitignore` 檔案中一個重要的語法事項。當你添加像 `node_modules` 這樣的條目時，Git 會忽略任何符合該樣式的項目。這表示它會忽略你專案根目錄中的 `node_modules` 目錄，但也會忽略你專案中 `client` 目錄裡的 `node_modules`。

如果你只想忽略根目錄的某些項目，可以在該行前置式一個斜線。`node_modules` 會變成 `/node_modules`。這會忽略根目錄的 `node_modules` 目錄，但不會忽略 `client/node_modules` 目錄。我們不想這樣，所以讓我們保持條目為 `node_modules`。

接下來你想要考慮忽略的是你的建置輸出。 例如，編譯一個 TypeScript 專案可能會產生一個用於 JavaScript 輸出的 `dist` 資料夾。你不想提交該輸出，因為它會膨脹 Git 紀錄。相反地，你想要忽略該輸出－貢獻者可以透過執行相同的建置指令自行重現它。

我們先忽略 `dist` 資料夾：

```sh
# Secrets
.env
github.key

# Packages
node_modules

# Outputs
dist
```

有時候，錯放的檔案會導致 TypeScript 編譯器崩潰，進而使我們的 JavaScript 輸出變得混亂。既然我們專門撰寫 TypeScript，就讓我們使用 glob 語法來忽略所有 JavaScript 檔案：

```sh
# Secrets
.env
github.key

# Packages
node_modules

# Outputs
dist
*.js
```

你可能會忽略的一些其他常見輸出包括 `coverage` 目錄（用於單元測試涵蓋結果）、如果你使用 Angular 則有 `.angular` 目錄、如果你使用 NextJS 則有 `.next` 目錄，等等。

目前，我們可以先維持現有的內容。如果你使用會產生檔案的框架，你應該在他們的文件中確認你需要為 `.gitignore` 添加什麼。

第四批要忽略的項目是 IDE 檔案。Jetbrains 產品，例如，可能會使用 `.idea` 資料夾來存放 IDE 專用的設定。Visual Studio Code 使用 `.vscode` 資料夾。

這些通常可以忽略，因為它們會包含你區域環境特有的檔案，其他貢獻者不需要（因為他們使用自己的設定）。讓我們繼續將 Visual Studio Code 目錄添加到你的專案中，因為那是我們用作整合開發環境的工具。

```sh
# Secrets
.env
github.key

# Packages
node_modules

# Outputs
dist
*.js

# IDE
.vscode
```

但我們的 `.vscode` 資料夾確實包含一個 `settings.json` 檔案，其中包含一些可能對我們的貢獻者有用的工作區特定內容－這個檔案允許他們組態他們的擴充套件和環境，以更好地反映我們自己的設定。

那麼我們就繼續使用否定語法來「取消忽略」那個檔案：

```sh
# Secrets
.env
github.key

# Packages
node_modules

# Outputs
dist
*.js

# IDE
.vscode
!.vscode/settings.json
```

如果你使用 MacOS，你可能熟悉 `.DS_STORE` 檔案。這個檔案包含 Finder 用來判斷如何呈現目錄（例如以縮圖或列表方式）的詮釋資料。同樣地，Windows 使用者可能會看到隱藏的 `Thumbs.db` 檔案，該檔案會為目錄快取縮圖。

通常建議忽略這些檔案，因為它們是個人設定，對專案沒有影響。讓我們將它們兩個都添加進去：

```sh
# Secrets
.env
github.key

# Packages
node_modules

# Outputs
dist
*.js

# IDE
.vscode
!.vscode/settings.json

# System Files
.DS_STORE
Thumbs.db
```

關於忽略先前已提交的檔案的一個快速說明。假設你之前不小心提交了你的 `dist` 目錄，但現在你想要移除並忽略它。你不能只是將它添加到你的 `.gitignore` 檔案中－這不會讓先前提交的內容消失，它只是告訴 Git 停止追蹤該檔案。因此，如果你忽略一個已經提交的檔案，Git 不會追蹤任何變更，但也不會追蹤該檔案的刪除。

相反地，你首先需要刪除該檔案。建立一個包含該刪除的 commit。然後你可以將該項目添加到你的 `.gitignore`，並建立第二個包含該更新的 commit。往後，當該檔案再次被生成時，Git 將會忽略它，且它不會出現在你的 commit 中。

最後，如果你正在使用不同語言（例如 Python）進行專案，則你需要忽略的條款將會與我們這裡涵蓋的不同。GitHub 維護了一個非常有用的 `.gitignore` 範本庫，適用於各種語言和框架。你可以在 <a href="https://github.com/github/gitignore" target="_blank">https://github.com/github/gitignore</a> 找到該列表。

這樣，你現在已經準備好避免提交你不想要的檔案到你的儲存庫了！

# --questions--

## --text--

`.gitignore` 檔案的主要用途是什麼？

## --answers--

從你的儲存庫中刪除檔案。

### --feedback--

思考 `.gitignore` 檔案防止在 Git 操作行為期間發生的情況。

---

告訴 Git 停止追蹤特定的檔案。

---

為你的儲存庫中的敏感資料加密。

### --feedback--

思考 `.gitignore` 檔案防止在 Git 操作行為期間發生的情況。

---

在提交之前壓縮大型檔案。

### --feedback--

思考 `.gitignore` 檔案防止在 Git 操作行為期間發生的情況。

## --video-solution--

2

## --text--

如果你已經將一個檔案提交到 Git，然後再將它添加到 `.gitignore`，會發生什麼？

## --answers--

該檔案將自動從儲存庫中刪除。

### --feedback--

考慮課程中關於忽略先前提交的檔案所說的內容。

---

該檔案將保留在儲存庫中，但未來的變更將不會被追蹤。

---

Git 會丟出錯誤直到你決議衝突。

### --feedback--

考慮課程中關於忽略先前提交的檔案所說的內容。

---

該檔案將被隱藏但仍由 Git 追蹤。

### --feedback--

考慮課程中關於忽略先前提交的檔案所說的內容。

## --video-solution--

2

## --text--

在 `.gitignore` 檔案中，你會使用什麼語法來忽略目錄中的所有檔案，但接著為一個特定檔案設置例外？

## --answers--

使用 glob 萬用字元（`*`），然後否定（`!`）特定的檔案。

---

使用註解（`#`）手動指定例外。

### --feedback--

請記住帶有 `.vscode` 目錄和 `settings.json` 檔案的範例。

---

使用斜線（`/`）來顯示目錄結構。

### --feedback--

請記住帶有 `.vscode` 目錄和 `settings.json` 檔案的範例。

---

使用括號（`[]`）來創建樣式排除。

### --feedback--

請記住帶有 `.vscode` 目錄和 `settings.json` 檔案的範例。

## --video-solution--

1
