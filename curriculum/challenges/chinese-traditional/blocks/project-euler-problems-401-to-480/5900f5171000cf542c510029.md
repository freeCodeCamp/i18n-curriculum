---
id: 5900f5171000cf542c510029
title: '問題 426：盒球系統'
challengeType: 1
forumTopicId: 302096
dashedName: problem-426-box-ball-system
---

# --description--

考慮一列無限的盒子。其中一些盒子裡有球。<dfn>例如</dfn>，初始設定為 2 個連續有球的盒子，接著 2 個空盒子，2 個有球的盒子，1 個空盒子，以及 2 個有球的盒子，可以用序列 (2, 2, 2, 1, 2) 表示，其中連續有球和空盒子的數量交替出現。

一回合包括根據以下規則將每個球精確移動一次：將最左邊尚未移動的球移到其右側最近的空盒子。

經過一回合後，序列 (2, 2, 2, 1, 2) 變成 (2, 2, 1, 2, 3)，如下所示；請注意，我們從第一個被佔用的方格開始新的序列。

<img alt="animation showing one complete turn from (2, 2, 2, 1, 2) to (2, 2, 1, 2, 3)" src="https://cdn.freecodecamp.org/curriculum/project-euler/box-ball-system-1.gif" style="background-color: white; padding: 10px; display: block; margin-right: auto; margin-left: auto; margin-bottom: 1.2rem;">

這樣的系統稱為 Box-Ball System，簡稱 BBS。

可以顯示，在足夠多的回合之後，系統會演變到一個連續佔用盒子數量不變的狀態。在以下範例中，連續佔用盒子數量演變為 [1, 2, 3]；我們將此稱為最終狀態。

<img alt="four turns from occupied boxes [2, 2, 2] to final state [1, 2, 3]" src="https://cdn.freecodecamp.org/curriculum/project-euler/box-ball-system-2.gif" style="background-color: white; padding: 10px; display: block; margin-right: auto; margin-left: auto; margin-bottom: 1.2rem;">

我們定義序列 $\\{t_i\\}$：

$$\begin{align}
  & s_0 = 290\\,797 \\\\
  & s_{k + 1} = {s_k}^2\bmod 50\\,515\\,093 \\\\
  & t_k = (s_k\bmod 64) + 1
\end{align}$$

從初始設定 $(t_0, t_1, \ldots, t_{10})$ 開始，最終狀態變為 [1, 3, 10, 24, 51, 75]。

從初始設定 $(t_0, t_1, \ldots, t_{10\\,000\\,000})$ 開始，找到最終狀態。

將最終狀態中元素的平方和作為你的答案。 例如，如果最終狀態是 [1, 2, 3]，那麼 $14 (= 1^2 + 2^2 + 3^2)$ 就是你的答案。

# --hints--

`boxBallSystem()` 應該傳回 `31591886008`。

```js
assert.strictEqual(boxBallSystem(), 31591886008);
```

# --seed--

## --seed-contents--

```js
function boxBallSystem() {

  return true;
}

boxBallSystem();
```

# --solutions--

```js
// solution required
```
