---
id: 673362d7f94d551edb532d24
title: 排序方法是如何工作的？
challengeType: 19
dashedName: how-does-the-sort-method-work
---

# --interactive--

在编程中，有许多不同的方法对你的数据进行排序。在本课中，我们将重点介绍 JavaScript 中的内置 `sort` 方法。

`sort` 方法用于排列数组的元素，并返回已排序数组的引用。不会进行拷贝，因为元素是在原地排序的。

这是 `sort` 方法的基本语法：

```js
array.sort(compareFunction);
```

`compareFunction` 是一个可选的参数，用于指定定义排序顺序的函数。稍后我们将查看如何在排序数字时使用比较函数。

在这个第一个示例中，我们有一个随机顺序的字符串数组。

```js
const fruits = ["Banana", "Orange", "Apple", "Mango"];
```

我们的目标是按字母顺序对数组进行排序。我们可以通过对 `fruits` 数组调用 `sort` 方法来实现。

:::interactive_editor

```js
const fruits = ["Banana", "Orange", "Apple", "Mango"];
fruits.sort();

console.log(fruits); // ["Apple", "Banana", "Mango", "Orange"]
```

:::

结果将是一个按字母顺序排序的水果数组，起始水果为 `Apple`。

在下一个示例中，我们想对以下数字数组进行排序：

```js
const numbers = [414, 200, 5, 10, 3];
```

如果我们尝试对这个 `numbers` 数组使用 `sort` 方法，会得到意想不到的结果。

:::interactive_editor

```js
const numbers = [414, 200, 5, 10, 3];
numbers.sort();

console.log(numbers); // [10, 200, 3, 414, 5]
```

:::

我们预期看到结果 `[3, 5, 10, 200, 414]`，但实际上得到的是 `[10, 200, 3, 414, 5]`。

这是因为 `sort` 方法将元素转换为字串，然后比较它们的 UTF-16 码元序列值。

UTF-16 代码单元是表现字串中字符的数值。UTF-16 代码单元的例子是数字 `65`、`66` 和 `67`，它们分别表现字符 `A`、`B` 和 `C`。

所以，数字 `200` 出现在数字 `3` 之前的数组中，因为在比较它们的 UTF-16 码元时，字串 `200` 出现在字串 `3` 之前。

解决此问题的方案是为 `sort` 方法提供一个比较函数。

下面是如何使用比较函数对 `numbers` 数组进行排序的示例：

:::interactive_editor

```js
const numbers = [414, 200, 5, 10, 3];

numbers.sort((a, b) => a - b);

console.log(numbers); // [3, 5, 10, 200, 414]
```

:::

参数 `a` 和 `b` 是被比较的两个元素。如果 `a` 应该排在 `b` 之前，比较函数应返回负值；如果 `a` 应该排在 `b` 之后，比较函数应返回正值；如果 `a` 和 `b` 相等，比较函数应返回零。

第一次比较是在数字 `414` 和 `200` 之间。`414 - 200` 的结果是 `214`，这是一个正值。这意味着 `414` 应该排在排序后的数组中 `200` 之后。

下一个比较是在数字 `200` 和 `5` 之间。`200 - 5` 的结果是 `195`，这是一个正值。这意味着 `200` 应该排在排序后的数组中 `5` 的后面。

我们对数组中的所有元素重复此过程，结果是一个排序后的数字数组。

尽管在编程中有许多排序数据的方法，但当你需要对一个元素数组进行排序时，JavaScript 中的 `sort` 方法在许多情况下都非常有用且高效。

# --questions--

## --text--

JavaScript 中的 `sort` 方法是做什么的？

## --answers--

它创建了数组的拷贝并对拷贝进行排序。

### --feedback--

该方法直接修改原始数组。

---

它就地排序数组的元素。

---

它只对数字进行排序。

### --feedback--

该方法直接修改原始数组。

---

默认按降序排列元素。

### --feedback--

该方法直接修改原始数组。

## --video-solution--

2

## --text--

当使用 `sort` 方法且不带比较函数时，为什么数字排序结果不符合预期？

## --answers--

`sort` 方法不能排序数字。

### --feedback--

考虑 JavaScript 在比较时如何处理不同的数据类型。

---

这些元素作为基于 UTF-16 代码单元的字串进行比较。

---

`sort` 方法区分分支。

### --feedback--

考虑 JavaScript 在比较时如何处理不同的数据类型。

---

该方法仅适用于字串。

### --feedback--

考虑 JavaScript 在比较时如何处理不同的数据类型。

## --video-solution--

2

## --text--

如果 `a` 应该排在 `b` 之后，比较函数应返回什么？

## --answers--

负值。

### --feedback--

考虑元素的顺序。

---

零。

### --feedback--

考虑元素的顺序。

---

正值。

---

`undefined`

### --feedback--

考虑元素的顺序。

## --video-solution--

3
