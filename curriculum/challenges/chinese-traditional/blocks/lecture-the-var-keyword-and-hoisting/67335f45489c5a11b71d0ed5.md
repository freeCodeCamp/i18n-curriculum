---
id: 67335f45489c5a11b71d0ed5
title: 什麼是 Hoisting？
challengeType: 19
dashedName: what-is-hoisting
---

# --interactive--

Hoisting 是 JavaScript 中一種常讓初學者感到困惑的行為，但理解它可以幫助你避免程式碼中細微的錯誤。簡單來說，hoisting 是 JavaScript 在編譯階段於程式碼執行前，將宣告式移動到其各自作用域頂端的預設行為。

要理解提升（hoisting），重要的是要知道 JavaScript 在兩個階段執行：編譯階段和執行階段。在編譯階段，JavaScript 引擎會瀏覽你的程式碼並為變數和函式設定記憶體空間。這就是提升發揮作用的地方。

讓我們從變數提升開始，當你使用 `var` 關鍵字宣告變數時，JavaScript 會將宣告提升到其作用域的頂端。然而，重要的是要注意只有宣告會被提升，而不是初始化。這表示你可以在宣告變數之前在程式碼中使用它，但在你實際為它指定值之前，其值會是 `undefined`。

:::interactive_editor

```js
console.log(x); // undefined
var x = 5;
console.log(x); // 5
```

:::

在這段程式碼中，即使我們在宣告 `x` 之前使用它，也不會得到錯誤，而是得到 `undefined`。這是因為 JavaScript 將宣告 `var x` 提升到其作用域的頂端，但不會提升初始化 `x = 5`。就好像程式碼被重寫成這樣：

:::interactive_editor

```js
var x;
console.log(x); // undefined
x = 5;
console.log(x); // 5
```

:::

函式（程式）提升的運作方式有些不同。當你使用 `function` 宣告式宣告一個函式時，函式名稱和函式本體都會被提升。這表示你可以在程式碼中宣告函式之前就呼叫該函式。以下是函式提升的範例：

:::interactive_editor

```js
sayHello(); // "Hello, World!"

function sayHello(){
  console.log("Hello, World!");
}
```

:::

在這種情況下，我們可以在 `sayHello()` 的宣告式之前呼叫它，因為整個函式已被提升到其作用域的頂端。

重要的是要注意，ES6 中所介紹的 `let` 和 `const` 宣告的提升行為有所不同。

```js
console.log(y); // Throws a ReferenceError
let y = 10;
```

這些宣告式會被提升，但不會被初始化，且你無法在程式碼中實際宣告之前存取它們。這通常被稱為暫時性死區。

理解提升（hoisting）可以幫助你撰寫更乾淨、更可預測的程式碼。然而，依賴提升會使你的程式碼更難閱讀和維護。作為最佳實踐，建議你在變數的作用域頂端宣告變數，並在使用函式之前宣告函式，不論是否有提升。這會讓你的程式碼行為更明確，也更容易讓其他人包括未來的你理解。

# --questions--

## --text--

當使用 `var` 宣告的變數被提升時會發生什麼？

## --answers--

宣告和初始化都被移動到頂部。

### --feedback--

在明確指定值之前，思考被提升的變數擁有什麼值。

---

只有宣告被移動到最上方。

---

該變數完全不會被提升。

### --feedback--

在明確指定值之前，思考被提升的變數擁有什麼值。

---

該變數已從程式碼中刪除。

### --feedback--

在明確指定值之前，思考被提升的變數擁有什麼值。

## --video-solution--

2

## --text--

函式（程式）提升與變數提升有何不同？

## --answers--

函式（程式）、函數（數學）不會被提升。

### --feedback--

考慮你是否可以在程式碼中函式宣告之前呼叫該函式。

---

只有函式名稱會被提升。

### --feedback--

考慮你是否可以在程式碼中函式宣告之前呼叫該函式。

---

函式名稱和主體都會被提升。

---

函式提升只適用於箭頭函式。

### --feedback--

考慮你是否可以在程式碼中函式宣告之前呼叫該函式。

## --video-solution--

3

## --text--

嘗試在程式碼中 `let` 宣告的變數宣告式之前存取該變數會得到什麼結果？

## --answers--

它會傳回 `undefined`。

### --feedback--

思考課程中提到的「temporal dead zone」概念。

---

它會丟出 `ReferenceError`。

---

它會傳回 `null`。

### --feedback--

思考課程中提到的「temporal dead zone」概念。

---

它運作時沒有任何問題

### --feedback--

思考課程中提到的「temporal dead zone」概念。

## --video-solution--

2
