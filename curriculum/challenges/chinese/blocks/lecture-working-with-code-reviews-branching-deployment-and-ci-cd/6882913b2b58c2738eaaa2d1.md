---
id: 6882913b2b58c2738eaaa2d1
title: 什么是 `.gitignore` 文件，以及应包含哪些项？
challengeType: 19
dashedName: what-is-a-gitignore-file-and-what-are-some-items-that-should-be-included-inside-it
---

# --description--

我们在之前的课程中简要提到了 `.gitignore` 文件。但这个文件到底是什么，你应该在里面放些什么？

`.gitignore` 文件是一种与 Git 操作相关的特殊类型文件。其名称表明该文件用于告诉 Git 忽略某些内容，这也是常见的用法。但它实际上是告诉 Git 停止跟踪某个文件。这个区别很重要，稍后会进行说明。

你实际上应该在这个文件中放什么？你应该列出那些你不想提交的内容。

第一个是你的 secrets 文件。这可能是类似 `.env` 的文件，你在其中保存了你的应用要使用的 API 密钥。它也可能是你的应用需要用于认证的私有 GPG 密钥文件。任何包含你不希望泄露给公众的敏感信息的内容都应该在 `.gitignore` 中忽略。即使你的仓库是私有的，你也应该假设它是公开的——把它当作任何人都能看到，并且注意不要提交 secrets。

让我们看看我们的文件现在可能是什么样子：

```sh
# Secrets
.env
github.key
```

我们已经告诉 Git 忽略 `.env` 文件，那里保存着我们的秘密。我们还告诉 Git 忽略一个包含私有 GPG 密钥的 `github.key` 文件。

接下来要考虑的是你的项目使用的包或依赖项。举例来说，当你在处理一个 Node.js 项目时，你可能会从 npm 安装包。这些包会放入你项目中的 `node_modules` 文件夹，这样你的代码就可以导入并使用它们。

但是 `node_modules` 文件夹会变得非常庞大，你绝对不想提交所有那些包并在每次更新时跟踪更改。相反，你提交你的 `package.json` 文件和相关的锁定文件（例如 `package-lock.json`、`pnpm-lock.yaml`）。这些文件告诉 npm 安装哪些包和版本，因此贡献者可以安装与你使用的相同依赖，而无需将它们提交到仓库中。

让我们继续将 `node_modules` 添加到我们的 `.gitignore` 文件中：

```sh
# Secrets
.env
github.key

# Packages
node_modules
```

现在，让我们谈谈 `.gitignore` 文件中的一个重要语法。当你添加像 `node_modules` 这样的条目时，Git 会忽略任何匹配该模式的内容。这意味着它会忽略你项目根目录下的 `node_modules` 目录，但也会忽略你项目中 `client` 目录下的 `node_modules`。

如果你只想忽略根目录下的某些内容，可以在该行前加一个斜线。`node_modules` 会变成 `/node_modules`。这将忽略根目录下的 `node_modules` 目录，但不会忽略 `client/node_modules` 目录。我们不想这样，所以保持我们的条目为 `node_modules`。

接下来你想要考虑忽略的是你的构建输出。例如，编译一个 TypeScript 项目可能会生成一个用于 JavaScript 输出的 `dist` 文件夹。你不想提交该输出，因为它会膨胀 Git 历史。相反，你想要忽略该输出——贡献者可以通过运行相同的构建命令自行重现它。

我们继续忽略 `dist` 文件夹：

```sh
# Secrets
.env
github.key

# Packages
node_modules

# Outputs
dist
```

有时，错误放置的文件会导致 TypeScript 编译器崩溃，从而使我们的 JavaScript 输出变得混乱。既然我们专门编写 TypeScript，就使用 glob 语法来忽略所有 JavaScript 文件吧：

```sh
# Secrets
.env
github.key

# Packages
node_modules

# Outputs
dist
*.js
```

你可能忽略的其他一些常见输出包括用于单元测试覆盖率结果的 `coverage` 目录，如果你使用 Angular，则是 `.angular` 目录，如果你使用 NextJS，则是 `.next` 目录，等等。

目前，我们可以坚持使用这里已有的内容。如果你使用的框架会生成文件，你应该在他们的文档中确认你需要为 `.gitignore` 添加什么。

第四批需要忽略的内容是 IDE 文件。例如，Jetbrains 产品可能会使用 `.idea` 文件夹来存放 IDE 特定的配置。Visual Studio Code 使用 `.vscode` 文件夹。

这些通常可以忽略，因为它们将包含特定于你局部环境的文件，其他贡献者不需要这些文件（因为他们使用自己的配置）。我们继续添加 Visual Studio Code 目录，因为那是我们用作 IDE 的工具。

```sh
# Secrets
.env
github.key

# Packages
node_modules

# Outputs
dist
*.js

# IDE
.vscode
```

但是我们的 `.vscode` 文件夹确实包含一个 `settings.json` 文件，其中包括一些可能对我们的贡献者有用的工作区特定内容——该文件允许他们配置他们的扩展和环境，以更好地镜射我们自己的环境。

那么让我们继续使用否定语法来“unignore”那个文件：

```sh
# Secrets
.env
github.key

# Packages
node_modules

# Outputs
dist
*.js

# IDE
.vscode
!.vscode/settings.json
```

如果你使用的是 MacOS，你可能熟悉 `.DS_STORE` 文件。该文件包含 Finder 用于确定如何渲染目录（例如，使用缩略图或以列表形式）的元数据。类似地，Windows 用户可能会看到一个隐藏的 `Thumbs.db` 文件，该文件缓存目录的缩略图。

通常忽略这些文件是个好主意，因为它们是个人设置，对项目没有影响。让我们将它们都添加进去：

```sh
# Secrets
.env
github.key

# Packages
node_modules

# Outputs
dist
*.js

# IDE
.vscode
!.vscode/settings.json

# System Files
.DS_STORE
Thumbs.db
```

关于忽略之前提交的文件的快速说明。假设你之前不小心提交了你的 `dist` 目录，但现在你想删除它并忽略它。你不能只是将它添加到你的 `.gitignore` 文件中——这不会让之前提交的内容消失，它只是告诉 Git 停止跟踪该文件。所以如果你忽略一个已经提交的文件，Git 不会跟踪任何更改，但也不会跟踪该文件的删除。

相反，你首先需要删除该文件。创建一个包含该删除操作的提交。然后你可以将该项添加到你的 `.gitignore` 中，并创建第二个包含该更新的提交。以后，当该文件再次被创建时，Git 会忽略它，并且它不会出现在你的提交中。

最后，如果你正在使用不同语言（例如 Python）进行项目开发，你需要忽略的项将与我们这里介绍的不同。GitHub 维护了一个非常有用的 `.gitignore` 模板仓库，涵盖了各种语言和框架。你可以在 <a href="https://github.com/github/gitignore" target="_blank">https://github.com/github/gitignore</a> 查找该列表。

这样，你现在已经准备好避免提交你不想要的文件到你的仓库中了！

# --questions--

## --text--

`.gitignore` 文件的主要用途是什么？

## --answers--

从你的仓库中删除文件。

### --feedback--

考虑 `.gitignore` 文件在 Git 操作期间防止发生的情况。

---

告诉 Git 停止跟踪特定的文件。

---

加密你仓库中的敏感数据。

### --feedback--

考虑 `.gitignore` 文件在 Git 操作期间防止发生的情况。

---

在提交之前压缩大文件。

### --feedback--

考虑 `.gitignore` 文件在 Git 操作期间防止发生的情况。

## --video-solution--

2

## --text--

如果你已经将一个文件提交到 Git，然后又将它添加到 `.gitignore`，会发生什么？

## --answers--

该文件将自动从仓库中删除。

### --feedback--

考虑课程中关于忽略之前提交的文件的内容。

---

该文件将保留在仓库中，但未来的更改将不会被跟踪。

---

Git 会抛出 `Error`，直到你解析冲突。

### --feedback--

考虑课程中关于忽略之前提交的文件的内容。

---

该文件将被隐藏但仍由 Git 跟踪。

### --feedback--

考虑课程中关于忽略之前提交的文件的内容。

## --video-solution--

2

## --text--

在 `.gitignore` 文件中，你会使用什么语法来忽略目录中的所有文件，但随后为一个特定文件创建一个异常？

## --answers--

使用通配符 (`*`) 然后排除 (`!`) 特定的文件。

---

使用评论（`#`）手动指定异常。

### --feedback--

记住带有 `.vscode` 目录和 `settings.json` 文件的示例。

---

使用斜线（`/`）表示目录结构。

### --feedback--

记住带有 `.vscode` 目录和 `settings.json` 文件的示例。

---

使用方括弧（`[]`）来创建模式排除。

### --feedback--

记住带有 `.vscode` 目录和 `settings.json` 文件的示例。

## --video-solution--

1
