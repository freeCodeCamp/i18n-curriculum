---
id: 5900f4da1000cf542c50ffed
title: '問題 366：石頭遊戲 III'
challengeType: 1
forumTopicId: 302027
dashedName: problem-366-stone-game-iii
---

# --description--

兩位玩家，Anton 和 Bernhard，正在玩以下遊戲。

有一堆包含 n 個石頭。

第一位玩家可以移除任意正數量的石頭，但不能移除整堆。

之後，每位玩家最多可移除相當於對手上一次移動所取石頭數量兩倍的石頭。

移除最後一顆石頭的玩家獲勝。

例如 $n = 5$

如果第一個玩家拿走超過一顆石頭，下一個玩家將能夠拿走所有剩餘的石頭。

如果第一個玩家拿走一顆石頭，剩下四顆，他的對手也會拿走一顆石頭，剩下三顆石頭。

第一個玩家不能拿走全部三顆，因為他最多只能拿走 $2 \times 1 = 2$ 顆石頭。所以假設他也拿走一顆，剩下 2 顆。

第二位玩家可以拿走剩下的兩顆石頭並獲勝。

所以 5 是第一位玩家的輸敗局面。

對於某些必勝局面，先手玩家有多於一個可能的走法。

例如，當 $n = 17$ 時，第一個玩家可以移除一顆或四顆石頭。

設 $M(n)$ 為第一位玩家在其第一次回合中，從必勝局面中能拿取的最大石子數，且對於任何其他局面，$M(n) = 0$。

當 $n ≤ 100$ 時，$\sum M(n)$ 為 728。

求 $\sum M(n)$，其中 $n ≤ {10}^{18}$。請將你的答案對 ${10}^8$ 取模。

# --hints--

`stoneGameThree()` 應該傳回 `88351299`。

```js
assert.strictEqual(stoneGameThree(), 88351299);
```

# --seed--

## --seed-contents--

```js
function stoneGameThree() {

  return true;
}

stoneGameThree();
```

# --solutions--

```js
// solution required
```
