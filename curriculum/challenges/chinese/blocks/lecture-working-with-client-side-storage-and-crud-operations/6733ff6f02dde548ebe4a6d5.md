---
id: 6733ff6f02dde548ebe4a6d5
title: 什么是 Cookies，它们如何工作？
challengeType: 19
dashedName: what-are-cookies-and-how-do-they-work
---

# --description--

Cookies，也称为网页 Cookies 或浏览器 Cookies，是服务器发送到用户网页浏览器的小块数据。这些 Cookies 存储在用户设备上，并随后续的 `request` 一起发送回服务器。 

Cookie 对于帮助网页应用维护状态和记住用户信息至关重要，这一点尤其重要，因为超文本传输协议是无状态协议。

Cookies 可以保存各种信息，例如用户偏好、会话数据或跟踪信息。

Cookie 总是以名称-值点对的形式保存。这意味着每个 cookie 都有一个名称（密钥）和一个关联的值。 

例如，cookie 可能会这样保存用户的会话 ID：`sessionId=abc123`。密钥是 `sessionId`，值是 `abc123`。每次浏览器与服务器通信时，浏览器都会以名值点对的形式发送这些 cookie。

当用户访问网站时，服务器可以通过在 HTTP 响应中包含 `Set-Cookie` 头部向用户的浏览器发送一个或多个 cookie。头部是一个提供有关 HTTP 请求或响应的附加信息的键值点对。你将在后续课程中学习更多关于 HTTP 请求和响应的内容。

一旦设置了 cookie，浏览器会保存它们，并在每次对同一域的后续请求中自动将它们包含在 Cookie 头部中。这允许服务器访问保存的 cookie，并将其用于维护用户会话或跟踪偏好等用途。

以下是如何在超文本传输协议响应中设置 cookie 的示例：

```http
Set-Cookie: sessionId=abc123; Expires=Wed, 21 Oct 2021 07:28:00 GMT; Secure; HttpOnly
```

浏览器会保存 cookie，并且在以后对同一服务器的请求中，会在 `Cookie` 头部中包含该 cookie：

```http
Cookie: sessionId=abc123
```

服务器随后可以读取 cookie 并使用保存的会话 ID 来检索有关用户的信息，例如他们是否已登录。

以下是不同类型 cookie 的详细说明。

- 会话 Cookie 仅在用户在网站上的会话期间有效。一旦用户关闭浏览器或标签（页），会话 Cookie 就会被删除。这些 Cookie 通常用于在用户访问期间保持登录状态等任务。

- 持久性 Cookie 有一个过期日期，并且会一直保存在用户设备上，直到达到该日期。持久性 Cookie 通常用于跨会话记住用户偏好或登录信息。

- 安全 Cookie 仅通过 `HTTPS` 发送，确保它们在传输过程中不会被攻击者拦截。

- HttpOnly Cookie 无法被浏览器中运行的 JavaScript 访问或修改，使其在防范跨站脚本（XSS）攻击方面更为安全。跨站脚本（XSS）攻击发生在攻击者将恶意脚本注入到其他用户查看的网页时。这些脚本随后可以在受害者浏览器的上下文中执行，可能窃取 Cookie、会话数据，或在用户不知情或未同意的情况下执行其他恶意操作。通过将 Cookie 标记为 HttpOnly，可以防止其被 JavaScript 访问，从而降低此类攻击的风险。

你可以通过使用 `Set-Cookie` 头部的服务器响应或通过 JavaScript 使用 `document.cookie` 来创建 cookies。

下面是使用 JavaScript 设置 cookie 的示例：

```js
document.cookie = "username=JohnDoe; expires=Fri, 31 Dec 2021 23:59:59 GMT; path=/";
```

此命令设置一个名为 `username` 的 cookie，值为 `"JohnDoe"`，将在 2021 年底过期。你可以通过再次设置新值来更新现有的 cookie。

要删除 cookie，你需要将其过期日期设置为过去时间：

```js
document.cookie = "username=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/";
```

这将从浏览器中移除 `username` cookie。

# --questions--

## --text--

cookies 在网页应用中的主要用途是什么？

## --answers--

永久保存大量 `data`。

### --feedback--

思考一下 cookie 如何帮助网页应用在请求之间记住用户特定的 `data`。

---

保存有助于维护状态并记住用户信息的 `data`，以跨越多个 `request`。

---

替换服务器端数据库。

### --feedback--

思考一下 cookie 如何帮助网页应用在请求之间记住用户特定的 `data`。

---

为了提升浏览器中 JavaScript 的性能。

### --feedback--

思考一下 cookie 如何帮助网页应用在请求之间记住用户特定的 `data`。

## --video-solution--

2

## --text--

以下哪个属性确保 cookie 仅通过 HTTPS 发送？

## --answers--

`Secure`

---

`HttpOnly`

### --feedback--

此属性保护 cookie 不通过不安全的超文本传输协议连接发送。

---

`SameSite`

### --feedback--

此属性保护 cookie 不通过不安全的超文本传输协议连接发送。

---

`Expires`

### --feedback--

此属性保护 cookie 不通过不安全的超文本传输协议连接发送。

## --video-solution--

1

## --text--

如何使用 JavaScript 删除 cookie？

## --answers--

通过将其值设置为 `null`。

### --feedback--

考虑设置过期日期如何影响 cookie 的生命周期。

---

通过将其过期日期设置为过去的日期。

---

通过使用 `document.cookie.remove()` 方法。

### --feedback--

考虑设置过期日期如何影响 cookie 的生命周期。

---

通过重新装载页面。

### --feedback--

考虑设置过期日期如何影响 cookie 的生命周期。

## --video-solution--

2
