---
id: 6733c5e54e3a154c8078ed48
title: 什么是正则表达式量词，它们如何工作？
challengeType: 19
dashedName: what-are-regex-quantifiers-and-how-do-they-work
---

# --interactive--

让我们学习正则表达式中的量词。

考虑一种场景，你想匹配一个四位数字的识别码。你知道可以使用 `\d` 字符类，所以你可能会写四次。为了避免任何多余的字符，你会同时包含起始和结束锚点：

```js
const regex = /^\d\d\d\d$/;
```

这确实有效——它将匹配四个数字字符。但你不必多次写出相同的类，可以为它指定一个量词。

量词由包含一个或两个数字的括弧状的花括弧定义。让我们在我们的模式中使用一个量词：

```js
const regex = /^\d{4}$/;
```

注意我们的量词只包含数字 `4`。这种语法表示“精确匹配前一个字符 4 次”。让我们看看它的表现：

:::interactive_editor

```js
const regex = /^\d{4}$/;
console.log(regex.test("123")); // false
console.log(regex.test("1234")); // true
console.log(regex.test("12345")); // false
console.log(regex.test("123456")); // false
console.log(regex.test("1234567")); // false
```

:::

该模式仅匹配恰好四位数字的字串，因为我们使用了锚点且量词只允许恰好四位数字。但识别码可能只需要至少四位数字。

为了允许四位或更多数字，在你的量词数字后添加逗号：

```js
const regex = /^\d{4,}$/;
```

现在，我们的语法允许模式匹配四个或更多数字。让我们测试一下：

:::interactive_editor

```js
const regex = /^\d{4,}$/;
console.log(regex.test("123")); // false
console.log(regex.test("1234")); // true
console.log(regex.test("12345")); // true
console.log(regex.test("123456")); // true
console.log(regex.test("1234567")); // true
```

:::

七位数的标识符相当长。这些标识符的最大位数应为 6 位，最小位数应为 4 位。为实现此目的，你可以在逗号后为你的量词添加第二个数字：

```js
const regex = /^\d{4,6}$/;
```

现在我们的模式不再匹配七位数的标识符，因为它大于我们的六位数最大值。

:::interactive_editor

```js
const regex = /^\d{4,6}$/;
console.log(regex.test("123")); // false
console.log(regex.test("1234")); // true
console.log(regex.test("12345")); // true
console.log(regex.test("123456")); // true
console.log(regex.test("1234567")); // false
```

:::

请注意，你不能单独使用此语法来设置最大值——你必须始终设置最小值。但如果你将最小值设置为 `1`，你可以有效地达到相同的效果。

我们已收到来自用户的更新需求。标识符现在可以可选地以字母开头。我们已经知道对应的字符类，所以让我们将其添加到我们的正则表达式中：

```js
const regex = /^[a-zA-Z]\d{4,6}$/;
```

但现在我们强制要求必须有一个字母。我们如何才能使它变成可选的？

你可以使用量词语法，将 `0` 作为最小值，`1` 作为最大值：

```js
const regex = /^[a-zA-Z]{0,1}\d{4,6}$/;
```

但实际上有一个针对单个可选字符的特殊简写量词——问号（`?`）。让我们用问号替换我们的量词：

```js
const regex = /^[a-zA-Z]?\d{4,6}$/;
```

我们应该验证结果：

:::interactive_editor

```js
const regex = /^[a-zA-Z]?\d{4,6}$/;
console.log(regex.test("123")); // false
console.log(regex.test("a1234")); // true
console.log(regex.test("12345")); // true
console.log(regex.test("az12345")); // false
console.log(regex.test("X123456")); // true
console.log(regex.test("1234567")); // false
```

:::

我们的模式现在允许一个可选的字母，后跟四到六个数字。

不幸的是，我们刚刚意识到我们错误地读取了需求。我们需要允许数字前有任意数量的字母。我们可以使用最小为 `0` 且没有定义最大值的量词：

```js
const regex = /^[a-zA-Z]{0,}\d{4,6}$/;
```

但是我们的模式又变长了。幸运的是，还有另一种简写表示“匹配前一个字符零次或多次”——星号（`*`）符号。让我们用它替换模式中的量词，并进行测试：

:::interactive_editor

```js
const regex = /^[a-zA-Z]*\d{4,6}$/;
console.log(regex.test("123")); // false
console.log(regex.test("a1234")); // true
console.log(regex.test("12345")); // true
console.log(regex.test("az12345")); // true
console.log(regex.test("X123456")); // true
console.log(regex.test("1234567")); // false
```

:::

现在我们成功地匹配了任何由零个或多个字母后跟四到六个数字组成的标识符。但事实证明这导致我们的系统崩溃——我们实际上必须至少要求一个字母。

同样，我们可以使用一个最小值为 1 且没有定义最大值的量词，或者我们可以使用另一个特殊语法——加号（`+`）符号：

:::interactive_editor

```js
const regex = /^[a-zA-Z]+\d{4,6}$/;
console.log(regex.test("123")); // false
console.log(regex.test("a1234")); // true
console.log(regex.test("12345")); // false
console.log(regex.test("az12345")); // true
console.log(regex.test("X123456")); // true
console.log(regex.test("1234567")); // false
```

:::

现在，任何不以至少一个字母开头的标识符都会失败，无论后面有多少数字。

你可以使用量词大大增强你的正则表达式的简洁性和可读性。

# --questions--

## --text--

正则表达式中量词 `{4,6}` 表示什么？

## --answers--

精确匹配 4 次或 6 次。

### --feedback--

考虑量词中指定的最小值和最大值。

---

匹配至少 4 次，但不超过 6 次。

---

匹配总共四到六个字符。

### --feedback--

考虑量词中指定的最小值和最大值。

---

匹配四位或六位数字。

### --feedback--

考虑量词中指定的最小值和最大值。

## --video-solution--

2

## --text--

在正则表达式中，哪个量词符号等价于 `{0,1}`？

## --answers--

`*`

### --feedback--

课程提到一个“单个可选字符的特殊简写量词”。

---

`+`

### --feedback--

课程提到一个“单个可选字符的特殊简写量词”。

---

`?`

---

`^`

### --feedback--

课程提到一个“单个可选字符的特殊简写量词”。

## --video-solution--

3

## --text--

在正则表达式中，`+` 量词是什么意思？

## --answers--

匹配零次或多次。

### --feedback--

本课将此量词描述为要求“至少一个”前述的元素。

---

匹配恰好 1 次。

### --feedback--

本课将此量词描述为要求“至少一个”前述的元素。

---

匹配一次或多次。

---

匹配零次或一次。

### --feedback--

本课将此量词描述为要求“至少一个”前述的元素。

## --video-solution--

3
