---
id: 6733697661182d357fc643d2
title: 什麼是 Canvas API，以及它如何運作？
challengeType: 19
dashedName: what-is-the-canvas-api-and-how-does-it-work
---

# --interactive--

`Canvas` API 是一個強大的工具，讓你能夠直接在你的 JavaScript 檔案中操作圖形。一切都從 HTML 中的 `canvas` 元素開始。這個元素作為一個繪圖表面，你可以使用 `Canvas` API 的實體方法和屬性來操作它。

`Canvas` API 提供你創建驚人視覺效果所需的一切，包括形狀、文字、動畫，甚至複雜的遊戲。它具有像 `HTMLCanvasElement`、`CanvasRenderingContext2D`、`CanvasGradient`、`CanvasPattern`、`TextMetrics` 這樣的介面，這些介面提供你可以用來在你的 JavaScript 檔案中創建圖形的方法和屬性。

讓我們來看看 `Canvas` API 如何運作，這樣你就可以開始使用 JavaScript 創建圖形。

首先，你需要在你的 HTML 檔案中創建一個 `canvas` 元素：

```html
<canvas id="my-canvas"></canvas>
```

`canvas` 元素由 `HTMLCanvasElement` 介面表述，該介面提供操作它的方法和屬性。此外，你可以使用 `Canvas` API 中其他介面的方法和屬性。

你可以在 HTML 中為你的 `canvas` 設定 `width` 和 `height`：

```html
<canvas id="my-canvas" width="400" height="400"></canvas>
```

或者你可以使用 `HTMLCanvasElement` 介面的 `width` 和 `height` 屬性：

```js
const canvas = document.getElementById("my-canvas");
canvas.width = 400;
canvas.height = 400;
```

目前，你還看不到螢幕上的任何東西。在建立你的 `canvas` 元素之後，接下來要做的是使用 `HTMLCanvasElement` 介面的 `getContext()` 方法來存取畫布的繪圖背景關係。 

最常見的背景關係是 `2d`，它允許你在二維空間中繪圖：

```js
const canvas = document.getElementById("my-canvas");
const ctx = canvas.getContext('2d');
```

如果你將 `ctx` 變數記錄到主控台，你會看到 `CanvasRenderingContext2D` 的方法和屬性，這些方法和屬性可用來創建形狀、顏色、線條等，並附帶它們的預設值：

```js
console.log(ctx);
```

一旦你擁有 2D `context`，你就可以開始在畫布上繪圖。

`Canvas` API 提供多種用於繪製形狀、線條和文字的行為與屬性。其中一個是 `fillStyle` 屬性，你可以將它與 `fillRect()` 方法結合使用來繪製矩形或正方形：

:::interactive_editor

```html
<html>
  <head>
  </head>
  <body>
    <canvas id="my-canvas" width="400" height="400"></canvas>
    <script src="index.js"></script>
  </body>
</html>
```

```js
const canvas = document.getElementById("my-canvas");

const ctx = canvas.getContext("2d");

// Set the background color
ctx.fillStyle = "crimson";

// Draw a rectangle
ctx.fillRect(1, 1, 150, 100);
```

:::

`fillRect` 接受 4 個數值，分別表述 x 軸、y 軸、寬度和高度。

現在螢幕上有東西。你也可以繪製文字，甚至創建動畫。這裡有一個用來表述文字的畫布：

```html
<canvas id="my-text-canvas" width="300" height="70"></canvas>
```

最後要繪製文字時，將文字作為第一個引數傳入 `fillText()` 方法，接著傳入 x 軸和 y 軸的數值：

:::interactive_editor

```html
<html>
  <head>
  </head>
  <body>
    <canvas id="my-text-canvas" width="300" height="70"></canvas>
    <script src="index.js"></script>
  </body>
</html>
```

```js
const textCanvas = document.getElementById("my-text-canvas");

const textCanvasCtx = textCanvas.getContext("2d");

// Set font family and size
textCanvasCtx.font = "30px Arial";

// Set text color
textCanvasCtx.fillStyle = "crimson";

// Draw the text
textCanvasCtx.fillText("Hello HTML Canvas!", 1, 50);
```

:::

瀏覽器中的結果將會是紅色的文字 `Hello HTML Canvas!`。

你可以用 `Canvas` API 做更多事情。訂製動畫、視覺化、遊戲等等，都是將它與 `requestAnimationFrame` 結合使用的好例子。

# --questions--

## --text--

哪個方法和屬性讓你在 `Canvas` API 中繪製和填滿矩形或正方形？

## --answers--

`strokeRect()` 和 `lineWidth`。

### --feedback--

思考同時繪製形狀的方法和填充顏色的屬性。

---

`fillRect()` 和 `fillStyle`。

---

`clearRect()` 和 `strokeStyle`。

### --feedback--

思考同時繪製形狀的方法和填充顏色的屬性。

---

`beginPath()` 和 `shadowColor`。

### --feedback--

思考同時繪製形狀的方法和填充顏色的屬性。

## --video-solution--

2

## --text--

以下哪一項不是 `Canvas` API 中 `CanvasRenderingContext2D` 介面的屬性或方法？

## --answers--

`fillStyle`

### --feedback--

思考在 canvas 呈現中常用的屬性和方法。

---

`shadowColor`

### --feedback--

思考在 canvas 呈現中常用的屬性和方法。

---

`drawImage`

### --feedback--

思考在 canvas 呈現中常用的屬性和方法。

---

`backgroundColor`

## --video-solution--

4

## --text--

如何使用 JavaScript 中的 `fillText()` 方法在畫布上繪製文字？

## --answers--

傳遞文字，接著是寬度和高度的數值。

### --feedback--

思考文字應該出現的座標。

---

傳遞文字，接著是 x 軸和 y 軸的值。

---

傳遞 `text` 和 `font size`。

### --feedback--

思考文字應該出現的座標。

---

傳遞文字和值。

### --feedback--

思考文字應該出現的座標。

## --video-solution--

2
