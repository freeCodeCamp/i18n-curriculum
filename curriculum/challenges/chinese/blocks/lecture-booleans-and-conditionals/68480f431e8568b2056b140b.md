---
id: 68480f431e8568b2056b140b
title: 什么是 Truthy 和 Falsy 值，布尔操作符和短路是如何工作的？
challengeType: 19
dashedName: what-are-truthy-and-falsy-values-and-how-do-boolean-operators-and-short-circuiting-work
---

# --description--

在上一课中，你学习了如何使用比较操作符和条件式来控制你的程序流程。

虽然这些非常强大，但你经常会遇到需要同时比较多值的情况。这可能导致嵌套条件式语句，例如：

```python
is_citizen = True
age = 25

if is_citizen:
    if age >= 18:
        print('You are eligible to vote') # You are eligible to vote
else:
    print('You are not eligible to vote')
```

上述示例将首先查看 `is_citizen` 是否为 `True`。如果是，它将进入嵌套的 `if` 语句并查看 `age` 是否大于或相等于 `18`。由于 `age` 大于或相等于 `18`，终端打印的消息将是 `You are eligible to vote`。如果 `is_citizen` 是 `False`，则终端打印的消息将是 `You are not eligible to vote`。

如果你正在处理更复杂的条件式语句，那么你可以使用 Python 的 `and`、`or` 和 `not` 操作符。

但在我们深入了解那些操作符之前，先来看看什么是真值和假值。

在 Python 中，每个值都有固有的布尔值，或者说在逻辑上下文中应被视为 `True` 或 `False` 的内置含义。许多值被认为是**真值**，即它们在逻辑上下文中计算为 `True`。其他值是**假值**，意味着它们计算为 `False`。

下面是一些假值：

- `None`
- `False`
- 整数 `0`
- 浮点数 `0.0`
- 空字串 `""`

其他值如非零数字和非空字串都是真值。

如果你想查看一个值是真值还是假值，可以使用内置的 `bool()` 函数。它显式地将一个值转换为其布尔等价物，并为真值返回 `True`，为假值返回 `False`。以下是一些示例：

```py
print(bool(False)) # False
print(bool(0))  # False
print(bool('')) # False

print(bool(True)) # True
print(bool(1)) # True
print(bool('Hello')) # True
```

既然你已经理解了 truthy 和 falsy 值，我们可以来看一下布尔操作符，也称为逻辑操作符或布尔操作符。这些是特殊的操作符，允许你组合多个表达式，以在你的代码中创建更复杂的决策逻辑。

Python 中有三个布尔操作符：`and`、`or` 和 `not`。

我们先来看一下 `and` 操作符。

`and` 操作符接受两个操作对象，如果第一个操作对象是假值，则返回第一个操作对象，否则返回第二个操作对象。两个操作对象都必须为真值，表达式才会返回真值。

这是一个示例：

```python
is_citizen = True
age = 25

print(is_citizen and age) # 25
```

在上述示例中，数字 25 被打印到终端，因为 `and` 操作符如果第一个操作对象为 `True`，则会计算第二个操作对象。`and` 操作符被称为短路操作符。短路意味着 Python 从左到右检查值，并在确定最终结果后立即停止。

你经常会在 `if` 语句中使用 `and` 来查看是否满足多个条件。下面是如何重构之前的示例，使用 `and` 操作符代替嵌套的 `if` 语句：

```python
is_citizen = True
age = 25

if is_citizen and age >= 18:
    print('You are eligible to vote') # You are eligible to vote
else:
    print('You are not eligible to vote')
```

在上面的例子中，`is_citizen` 是 `True`，且 `age >= 18` 计算结果为 `True`。由于 `and` 操作符的两个操作对象都为真，该条件 `is_citizen and age >= 18` 计算结果为 `True`，并且执行 `if` 块中的 `print` 调用。

现在让我们来看一下 `or` 操作符。该操作符如果第一个操作对象为真值，则返回第一个操作对象，否则返回第二个操作对象。如果至少有一个操作对象为真值，`or` 表达式将返回真值。`or` 操作符也被称为短路操作符。下面是一个示例：

```python
age = 19
is_employed = False

print(age or is_employed) # 19
```

以下代码将打印数字 19，因为第一个操作对象 `age` 为 `True`。

如果你需要查看一个或多个表达式是否为 `True`，那么你可以在条件式中使用 `or` 操作符，像这样：

```python
age = 19
is_student = True

if age < 18 or is_student:
    print('You are eligible for a student discount') # You are eligible for a student discount
else:
    print('You are not eligible for a student discount')
```

在这个分支中，`age < 18` 是 `False`，但 `is_student` 是 `True`。由于至少有一个条件为真，整个 `or` 表达式的值为 `True`，并且 `if` 块中的折扣消息被打印。

我们将要看的最后一个操作符是 `not` 操作符，它接受一个操作对象并反转其布尔值。它将真值转换为 `False`，将假值转换为 `True`。与我们之前看到的操作符不同，`not` 总是返回 `True` 或 `False`。

以下是一些示例：

```python
print(not '') # True, because empty string is falsy
print(not 'Hello') # False, because non-empty string is truthy
print(not 0) # True, because 0 is falsy
print(not 1) # False, because 1 is truthy
print(not False) # True, because False is falsy
print(not True) # False, because True is truthy
```

在条件式中使用 `not` 操作符来检查某事是否不是 `True` 或 `False` 是很常见的，像这样：

```python
is_admin = False

if not is_admin:
    print('Access denied for non-administrators.') # Access denied for non-administrators.
else:
    print('Welcome, Administrator!')
```

由于 `is_admin` 是 `False`，所以 `not is_admin` 表示非 `False`，即 `True`。因此将打印消息 `Access denied for non-administrators.`。

既然你已经理解了真值和假值、`and`、`or` 和 `not` 操作符以及短路运算的工作原理，你就可以编写更灵活且更易读的条件式逻辑。

# --questions--

## --text--

下面的代码会输出什么？

```python
age = 20
has_ticket = True

if age >= 18 and has_ticket:
    print("You can watch the movie.")
else:
    print("You can't watch the movie.")
```

## --answers--

`You can watch the movie.`

---

`SyntaxError`

### --feedback--

记住当两个条件都为 `True` 时会发生什么。

---

`TypeError`

### --feedback--

记住当两个条件都为 `True` 时会发生什么。

---

`You can't watch the movie.`

### --feedback--

记住当两个条件都为 `True` 时会发生什么。

## --video-solution--

1

## --text--

以下哪项不被认为是 Python 中的假值？

## --answers--

`""`

### --feedback--

请记住，非空字串被视为真值。

---

`0.0`

### --feedback--

请记住，非空字串被视为真值。

---

`"False"`

---

`0`

### --feedback--

请记住，非空字串被视为真值。

## --video-solution--

3

## --text--

当 Python 计算表达式 `x or y` 时会发生什么？

## --answers--

只有当 `x` 和 `y` 都计算为 `True` 时才返回 `x`

### --feedback--

考虑“短路”以及 Python 何时可能不需要查看第二个值。

---

如果 `x` 计算结果为 `True`，则返回 `x`，否则跳过计算 `y`

---

它总是计算 `x` 和 `y`，无论它们的值如何。

### --feedback--

考虑“短路”以及 Python 何时可能不需要查看第二个值。

---

如果 `x` 或 `y` 为 `False`，则返回 `False`

### --feedback--

考虑“短路”以及 Python 何时可能不需要查看第二个值。

## --video-solution--

2
