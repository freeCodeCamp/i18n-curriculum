---
id: 6732b284901f8c1539e20bcb
title: 如何从数组中间添加和删除元素？
challengeType: 19
dashedName: how-do-you-add-remove-elements-from-the-middle-of-an-array
---

# --interactive--

JavaScript 中的 `splice()` 方法是一种强大的数组修改方法。 它允许你从数组的任何位置（包括中间位置）添加或删除元素。 `splice()` 方法的返回值将是从数组中移除项的数组。 如果没有删除任何内容，则返回空数组。

需要注意的是，该方法将会改变原始数组，在原处对其进行修改，而不是创建一个新数组。 在使用 `splice()` 时需要注意这一点。 这是基本语法：

```js
array.splice(startIndex, itemsToRemove, item1, item2)
```

`startIndex` 指定开始修改数组的索引，而 `itemsToRemove` 是一个可选参数，表示要删除多少个元素。 如果省略 `itemsToRemove`，`splice()` 将删除从 `startIndex` 开始到数组末尾的所有元素。 随后的参数（`item1`、`item2`等）是要添加到数组中的元素，从起始索引开始。

我们先来看一个从数组中间删除元素的例子：

:::interactive_editor

```js
let fruits = ["apple", "banana", "orange", "mango", "kiwi"];
let removed = fruits.splice(2, 2);

console.log(fruits);  // ["apple", "banana", "kiwi"]
console.log(removed); // ["orange", "mango"]
```

:::

在此示例中，`splice(2, 2)` 从索引 `2` 开始，删除 `2` 个元素。 修改后的数组只剩下 `apple`、`banana` 和 `kiwi`。 现在，我们来看看如何在数组中间添加元素：

:::interactive_editor

```js
let colors = ["red", "green", "blue"];
colors.splice(1, 0, "yellow", "purple");

console.log(colors); // ["red", "yellow", "purple", "green", "blue"]
```

:::

这里，`splice(1, 0, "yellow", "purple")` 从索引 `1` 开始，删除 `0` 个元素，并插入 `yellow` 和 `purple`。 第二个参数 （`0`） 表示在插入前不删除任何元素。 你还可以使用 `splice()` 同时删除和添加元素：

:::interactive_editor

```js
let numbers = [1, 2, 3, 4, 5];
numbers.splice(1, 2, 6, 7, 8);

console.log(numbers); // [1, 6, 7, 8, 4, 5]
```

:::

在这里，`splice(1, 2, 6, 7, 8)` 从索引 `1` 开始，删除 `2` 个元素（`2` 和 `3`），并插入 `6`、`7` 和 `8`。 如果需要保持原始数组不变，则应在使用 `splice()` 之前创建一个副本：

:::interactive_editor

```js
let original = [1, 2, 3, 4, 5];
let copy = [...original];
copy.splice(2, 1, 6);

console.log(original); // [1, 2, 3, 4, 5]
console.log(copy);     // [1, 2, 6, 4, 5]
```

:::

在此示例中，为了创建 `original` 数组的拷贝而不修改它，我们使用展开操作符（`...`）。展开操作符将把 `original` 数组的元素浅拷贝到一个新数组中。你将在后续课程中学习更多内容。

当我们使用 `copy.splice(2, 1, 6)` 时，它会修改 copy 数组：删除索引 `2` 处的元素（即 `3`），并在该位置插入新元素 `6`。

`splice()` 的一个常见用例是在知道数组索引的情况下从数组中移除一个元素：

:::interactive_editor

```js
let fruits = ["apple", "banana", "orange", "mango"];
let indexToRemove = fruits.indexOf("orange");
if (indexToRemove !== -1) {
    fruits.splice(indexToRemove, 1);
}

console.log(fruits); // ["apple", "banana", "mango"]
```

:::

在这个示例中，我们首先使用 `indexOf()` 方法查找 `orange` 在 `fruits` 数组中的索引。 `indexOf()` 方法会返回给定元素在数组中首次出现的索引，如果未找到则返回 `-1`。 

然后，我们将 `indexToRemove` 与 `-1` 进行比较，以确保元素存在于数组中，然后再尝试删除。 如果 `indexToRemove` 不等于 `-1` （表示找到该元素），我们使用 `splice()` 从 `indexToRemove` 位置开始移除一个元素。

你还可以使用 `splice()` 删除所有元素，从而清除数组：

:::interactive_editor

```js
let array = [1, 2, 3, 4, 5];
array.splice(0);

console.log(array); // []
```

:::

虽然 `splice()` 功能强大，但值得注意的是，对于非常大的数组，它的效率可能不如其他方法，尤其是在修改数组的开头时。 这是因为 `splice()` 可能需要移动所有后续元素。 在这种情况下，如果你只需要在数组末尾添加或删除元素，方法 `push()`、`pop()`、`unshift()` 和 `shift()` 可能更合适。

总之，`splice()` 方法是 JavaScript 中修改数组的通用方法。 它允许精确控制从数组的任何位置添加和删除元素。 了解如何有效使用 `splice()` 可以大大提高你在 JavaScript 代码中操作数组的能力。

# --questions--

## --text--

下面代码的输出是什么？

```js
let arr = [1, 2, 3, 4, 5];
arr.splice(2, 0, 6, 7);
console.log(arr);
```

## --answers--

`[1, 2, 6, 7, 3, 4, 5]`

---

`[1, 2, 3, 4, 5, 6, 7]`

### --feedback--

考虑一下 `splice()` 方法中第二个参数（`0`）的含义。

---

`[1, 2, 3, 6, 7, 4, 5]`

### --feedback--

考虑一下 `splice()` 方法中第二个参数（`0`）的含义。

---

`[1, 2, 6, 7, 4, 5]`

### --feedback--

考虑一下 `splice()` 方法中第二个参数（`0`）的含义。

## --video-solution--

1

## --text--

下面哪个 `splice()` 调用会从数组中删除数字 3？

```js
let arr = [1, 2, 3, 4, 5];
```

## --answers--

`arr.splice(3, 1)`

### --feedback--

记住，数组索引从 0 开始。

---

`arr.splice(3, 0)`

### --feedback--

记住，数组索引从 0 开始。 

---

`arr.splice(2, 1)`

---

`arr.splice(arr.length - 2, 1)`

### --feedback--

记住，数组索引从 0 开始。

## --video-solution--

3

## --text--

`splice()` 方法返回什么？

## --answers--

修改后的数组。

### --feedback--

考虑从数组中删除元素后，哪些信息可能有用。

---

删除元素的数量。

### --feedback--

考虑从数组中删除元素后，哪些信息可能有用。

---

包含被删除元素的数组。

---

`undefined`

### --feedback--

考虑从数组中删除元素后，哪些信息可能有用。

## --video-solution--

3
