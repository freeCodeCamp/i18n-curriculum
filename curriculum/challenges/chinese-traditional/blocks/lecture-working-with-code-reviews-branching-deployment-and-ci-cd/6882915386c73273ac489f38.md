---
id: 6882915386c73273ac489f38
title: 開發 Git 分支策略的一些最佳實踐是什麼？
challengeType: 19
dashedName: what-are-some-best-practices-for-developing-a-git-branching-strategy
---

# --description--

我們在之前的課程中稍微談過分支。你已經學會如何創建分支、為什麼不應該直接提交到 `main`，以及類似的內容。但你到底應該在什麼時候以及為什麼要創建分支？

首先，讓我們談談為什麼你不應該只是將一堆提交推送到 `main`。你的預設分支應該是可靠且穩定的－也就是說，在任何時間點，我都應該能夠拉取你目前的 `main` 分支並建置、執行及測試你的應用程式。如果你推送部分完成的功能或進行中的提交，那麼這可能不會永遠成立。

此外，同時處理多個特性是非常常見的。如果你同時將多個特性的部分工作推送到 `main`，偵錯潛在問題會變得更加困難，因為你沒有獨立的變更。除此之外，切換上下文（或改變你正在處理的任務）也遠不如單純。

那麼你應該在什麼時候創建分支？一個通用的經驗法則是，為每個獨立的工作單元創建分支。也就是說，如果你正在開發一個新的 OAuth 功能，該工作應該在專用的分支上進行。如果你接著需要修正密碼驗證的錯誤，該工作應該在其自己的專用分支上進行。需要重新設計使用者評測頁面？那就是另一個分支。

請注意，你應該總是從 `main` 創建你的分支。因此，如果你正在為你的 OAuth 功能工作，你會在為你的密碼驗證修正創建新分支之前先切換到 `main`。否則，如果你直接從你的 OAuth 分支創建密碼修正分支，你將會帶入 OAuth 工作的提交，並且歷史紀錄會變得混亂。

但是你應該如何命名你的分支？這完全取決於你（或你正在貢獻的專案），但這裡有一些常見的慣例：

`scope/description`－其中 `scope` 是像 `feat` 或 `fix` 這樣的東西，而 `description` 是對分支變更的非常簡短說明。例如：`feat/oauth-support`。

`scope/issue/description` - 類似先前的慣例，但包含與相關問題相關的編號。例如：`fix/25/password-auth`。

`username/scope/description` - 對於你們都在原始儲存庫的分支上工作而非分叉它的專案（這在私有內部儲存庫中很常見），在分支開頭加入你的使用者名稱會很有幫助。舉例來說：`naomi-lgbt/feat/profile-redesign`。

讓我們涵蓋一些關於分支策略的其他說明。

對於長期存在的功能開發工作，例如需要大量開發人力的測試版功能，你可能想使用功能旗標來選擇性地啟用邏輯，而不是使用分支。分支存在的時間越長，發生衝突的可能性就越大。

不過，你可能希望為部署環境或發行版本維護專用分支。 例如，freeCodeCamp 儲存庫使用 `prod-staging` 和 `prod-current` 分別觸發部署到測試和生產伺服端。 這可以讓團隊更快地迭代，當事情準備好且獲得批准時合併，而不必為每次合併觸發部署。 相反，部署是透過將最新的 `main` 合併到那些生產分支來產生的。

你也可能想要維護「release branches」，或是表述你產品主要版本的分支。這讓你可以為每個主要版本保持乾淨的狀態，因此如果你需要將關鍵安全修補程式回移到較早的版本，就可以在不包含任何新版本變更的情況下進行。

最後，你應該避免使用區域的 CLI 將分支合併到 `main`。相反地，請為你的變更創建一個 pull request，並透過該流程進行合併。這樣你就有機會確保任何測試都能通過你的 CI（你會在未來的課程中學習到），並且可以再次檢查差異檢視，確保你只包含想要合併的變更。

有了這些技巧，你就可以開始透過分支邁向成功！

# --questions--

## --text--

為什麼你應該避免直接提交到 `main` 分支？

## --answers--

因為 Git 不允許直接提交到 `main`。

### --feedback--

請考慮預設分支的穩定性和可靠性需求。

---

因為 `main` 分支應該始終保持可靠且穩定。

---

因為對 `main` 的提交會被永久鎖定且無法更改。

### --feedback--

請考慮預設分支的穩定性和可靠性需求。

---

因為 `main` 分支的效率比特性分支慢。

### --feedback--

請考慮預設分支的穩定性和可靠性需求。

## --video-solution--

2

## --text--

在建立新分支時，以下哪一項是最佳實務？

## --answers--

從你目前的功能分支創建新的分支。

### --feedback--

請考慮保持分支歷史清晰並避免意外包含程式碼。

---

始終從 `main` 創建新分支。

---

只為主要特性創建分支。

### --feedback--

請考慮保持分支歷史清晰並避免意外包含程式碼。

---

每週限制自己只能有一個分支。

### --feedback--

請考慮保持分支歷史清晰並避免意外包含程式碼。

## --video-solution--

2

## --text--

處理長期存在的特性工作的建議方法是什麼？

## --answers--

創建一個包含所有相關工作的巨大分支。

### --feedback--

考慮長時間未合併的分支可能產生的合併衝突風險。

---

使用特性旗標，而非長期存在的分支。

---

始終使用區域的 CLI 直接合併到 `main`。

### --feedback--

考慮長時間未合併的分支可能產生的合併衝突風險。

---

為你的每個主要特性創建一個新的儲存庫。

### --feedback--

考慮長時間未合併的分支可能產生的合併衝突風險。

## --video-solution--

2
