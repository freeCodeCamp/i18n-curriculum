---
id: 5900f4111000cf542c50ff24
title: '問題 165：交集'
challengeType: 1
forumTopicId: 301799
dashedName: problem-165-intersections
---

# --description--

線段由其兩個端點唯一定義。在平面幾何中考慮兩條線段時，有三種可能性：線段沒有共同點、只有一個共同點，或有無限多個共同點。

此外，當兩個線段恰好有一個共同點時，該共同點可能是其中一個線段或兩個線段的端點。如果兩個線段的共同點不是任一線段的端點，則該點是兩個線段的內部點。

如果 $T$ 是兩線段 $L_1$ 和 $L_2$ 唯一的共同點，且 $T$ 是兩線段的內部點，我們將稱 $T$ 為 $L_1$ 和 $L_2$ 的真正交點。

考慮三個線段 $L_1$、$L_2$ 和 $L_3$：

$$\begin{align}
  & L_1: (27, 44) \\;\text{到}\\; (12, 32) \\\\
  & L_2: (46, 53) \\;\text{到}\\; (17, 62) \\\\
  & L_3: (46, 70) \\;\text{到}\\; (22, 40) \\\\
\end{align}$$

可以驗證線段 $L_2$ 和 $L_3$ 有一個真正的交點。我們注意到，因為 $L_3$ 的一個端點 (22, 40) 位於 $L_1$ 上，這不被視為真正的交點。$L_1$ 和 $L_2$ 沒有共同點。因此，在這三條線段中，我們找到一個真正的交點。

現在讓我們對 5000 條線段做同樣的處理。為此，我們使用所謂的「Blum Blum Shub」偽隨機數產生器產生 20000 個數字。

$$\begin{align}
  & s_0 = 290797 \\\\
  & s_{n + 1} = s_n × s_n (\text{取模}\\; 50515093) \\\\
  & t_n = s_n (\text{取模}\\; 500) \\\\
\end{align}$$

為了創建每條線段，我們使用四個連續的數字 $t_n$。也就是說，第一條線段由以下給出：

($_t$1、$t_2$) 到 ($t_3$、$t_4$)

根據上述產生器計算出的前四個數字應該是：27、144、12 和 232。第一個區段因此為 (27, 144) 到 (12, 232)。

在 5000 條線段中找到多少個不同的真正交點？

# --hints--

`distinctIntersections()` 應該傳回 `2868868`。

```js
assert.strictEqual(distinctIntersections(), 2868868);
```

# --seed--

## --seed-contents--

```js
function distinctIntersections() {

  return true;
}

distinctIntersections();
```

# --solutions--

```js
// solution required
```
