---
id: 67338e93b75977a344cf6d40
title: 事件冒泡和事件委派如何運作？
challengeType: 19
dashedName: how-do-event-bubbling-and-event-delegation-work
---

# --description--

事件冒泡，或稱為傳播，指的是當事件被觸發時，事件如何「向上冒泡」到父物件。<dfn>例如</dfn>，請考慮這段 `code`：

```html
<p>
  <span>Click me~!</span>
</p>
```

這裡的 `p` 元素會被視為 `span` 元素的父元素。 

當你按下 `span` 元素時，就像指示的那樣，`span` 元素會成為 `click` 事件的標的。然而，該事件也會向上冒泡到父元素－`p` 元素可以根據需要接收並處理該事件。

但這到底意味著什麼？你可以將事件監聽器附加到 `p` 元素：

```js
const p = document.querySelector("p");
p.addEventListener("click", (event) => {
  console.log(event.target);
});
```

然後，當你點擊 `span` 元素時，你會看到文字 `Click me~!` 被記錄到主控台。

該事件向父元素 `p` 傳播，該元素在事件監聽器中消耗該事件以顯示事件的標的。 

注意標的仍然是 `span` 元素。這是因為 `span` 元素接收了最初的點擊。

為了確定事情的運作方式，讓我們展開程式碼：

```js
const p = document.querySelector("p");
const span = document.querySelector("span");
p.addEventListener("click", (event) => {
  console.log("P listener: ");
  console.log(event.target);
});
span.addEventListener("click", (event) => {
  console.log("Span listener: ");
  console.log(event.target);
});
```

為了讓你了解事件如何冒泡，點擊 `span` 元素後你會在主控台看到以下內容：

```html
"Span listener: "
<span>Click me~!</span>
"P listener: "
<span>Click me~!</span>
```

現在讓我們看看當你使用 `stopPropagation()` 防止事件傳播時會發生什麼。我們會在 `span` 的事件監聽器中呼叫它：

```js
const p = document.querySelector("p");
const span = document.querySelector("span");
p.addEventListener("click", (event) => {
  console.log("P listener: ");
  console.log(event.target);
});
span.addEventListener("click", (event) => {
  console.log("Span listener: ");
  console.log(event.target);
  event.stopPropagation();
});
```

然後再次點擊我們的 `span`：

```html
"Span listener: "
<span>Click me~!</span>
```
 
這次，我們沒有看到 `p` 監聽器被觸發。因為我們告訴它在處理子元素 `span` 的時候停止傳播，所以該事件從未在 `p` 元素上觸發。

事件委派可以被視為相反的概念。它是將捕捉到的 `event` 委派給另一個元素的處理程序。 

回到我們的程式碼，讓我們更新它，使點擊 `span` 元素時會將其變成紅色：

```js
const p = document.querySelector("p");
const span = document.querySelector("span");
p.addEventListener("click", (event) => {});
span.addEventListener("click", (event) => {
  event.target.style.color = "red";
});
```

但是如果你有二十個 `span` 元素呢？或者你使用 JavaScript 即時創建更多的 `span` 元素？

與其必須為每個 `span` 元素附加監聽器，你其實可以在 `p` 元素上使用監聽器來處理所有的 `span`。換句話說，你可以將 `span` 點擊的處理委派給父層的 `p` 元素。

我們的程式碼現在可能看起來像這樣：

```js
const p = document.querySelector("p");
p.addEventListener("click", (event) => {
  event.target.style.color = "red";
});
```

注意我們現在完全沒有任何監聽器附加在 `span` 元素上。你已經正確地將事件處理委派給 `p` 元素。但它有用嗎？

讓我們產生幾個額外的 `span` 元素並查看：

```html
<p>
  <span>Click me~!</span>
  <span>Click me~!</span>
  <span>Click me~!</span>
  <span>Click me~!</span>
</p>
```

現在，每次我們點擊 `span`，該元素的文字將變成紅色。 

就這樣，透過單一個 `event listener`，我們已正確允許 `click` 事件從 `span` 元素冒泡到父元素 `p`，並將該 `click` 事件的邏輯委派給 `p` 元素。

事件傳播和委派可能是一個複雜的主題，特別是當你進入像表格這樣深度巢狀的元素時。建議你進一步探索並嘗試我們在這裡撰寫的一些程式碼。


# --questions--

## --text--

什麼是 JavaScript 中的事件冒泡？

## --answers--

建立新 `event` 的處理程序。

### --feedback--

思考課程如何描述事件傳播的「方向」。

---

事件從子元素傳遞到父元素的方式。

---

一種防止事件預設行為的方法。

### --feedback--

思考課程如何描述事件傳播的「方向」。

---

將多個事件監聽器附加到單一元素的處理程序。

### --feedback--

思考課程如何描述事件傳播的「方向」。

## --video-solution--

2

## --text--

`stopPropagation()` 方法的目的為何？

## --answers--

為了防止 `event` 的預設行為。

### --feedback--

本課程示範此方法對事件冒泡的影響。

---

從元素中移除所有事件監聽器。

### --feedback--

本課程示範此方法對事件冒泡的影響。

---

阻止 `事件` 冒泡到父元素。

---

將 `event` 處理委派給子元素。

### --feedback--

本課程示範此方法對事件冒泡的影響。

## --video-solution--

3

## --text--

使用事件委派的主要優點是什麼？

## --answers--

它允許事件向父元素冒泡。

### --feedback--

考慮包含多個 `span` 元素的範例，以及事件處理如何被簡化。

---

它會阻止 `event` 的預設行為。

### --feedback--

考慮包含多個 `span` 元素的範例，以及事件處理如何被簡化。

---

它減少了多個元素所需的事件監聽器數量。

---

它會自動停止事件傳播。

### --feedback--

考慮包含多個 `span` 元素的範例，以及事件處理如何被簡化。

## --video-solution--

3
