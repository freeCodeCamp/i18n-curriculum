---
id: 6733693bfce9a43489a355db
title: 什么是 `DOMContentLoaded` 事件，它是如何工作的？
challengeType: 19
dashedName: what-is-the-domcontentloaded-event-and-how-does-it-work
---

# --interactive--

当 HTML 文档中的所有内容都已装载并解析时，会触发 `DOMContentLoaded` 事件。如果你有外部样式表或图像，`DOMContentLoaded` 事件不会等待它们装载。它只会等待 HTML 装载完成。

这与 `load` 事件不同，后者等待所有内容装载完成，包括外部样式表、图像等。

以下是使用 `DOMContentLoaded` 事件的示例语法：

```js
document.addEventListener("DOMContentLoaded", function () {
  console.log("DOM is loaded.");
});
```

一旦 DOM 装载完成，函数将被执行，并且消息 `DOM is loaded.` 会被记录到控制台。

现在，让我们来看另一个使用 `DOMContentLoaded` 事件的示例。在这个示例中，我们在超文本标记语言中有一个图像。要更新图像，我们可以创建一个函数来更改图像的 `src` 和 `alt` 属性：

:::interactive_editor

```html
<h1>Image Change on DOM Loaded</h1>
<img
  id="example-img"
  src="https://cdn.freecodecamp.org/curriculum/cat-photo-app/relaxing-cat.jpg"
  alt="Cat relaxing"
/>

<script src="index.js"></script>
```

```js
function changeImg() {
  const img = document.getElementById("example-img");
  img.src =
    "https://cdn.freecodecamp.org/curriculum/responsive-web-design-principles/FCCStickers-CamperBot200x200.jpg";
  img.alt = "CamperBot sticker";
  console.log("image was just changed");
}

changeImg();
```

:::

然后我们可以查看 DOM 是否仍在装载，并为 `DOMContentLoaded` 事件添加监听器。如果 `DOMContentLoaded` 事件已经触发，我们可以直接调用 `changeImg` 函数：

```js
if (document.readyState === "loading") {
  document.addEventListener("DOMContentLoaded", changeImg);
} else {
  console.log("DOMContentLoaded has already fired");
  changeImg();
}
```

如果你运行这段代码，并刷新页面，你会看到在 DOM 装载后图像变为新建图像。这个过程非常快，但你会看到图像更换时有轻微的闪烁。

当你想在 DOM 装载完成后立即运行一些 JavaScript 代码，但在所有外部资源如图像和样式表装载之前，`DOMContentLoaded` 事件非常有用。

# --questions--

## --text--

`DOMContentLoaded` 事件表示什么？

## --answers--

所有外部资源均已完全装载。

### --feedback--

此事件不会等待图像或样式表。

---

超文本标记语言 `document` 已完全装载并解析。

---

浏览器已完成页面的渲染。

### --feedback--

此事件不会等待图像或样式表。

---

页面上的所有图像均已完全装载。

### --feedback--

此事件不会等待图像或样式表。

## --video-solution--

2

## --text--

`DOMContentLoaded` 事件与 `load` 事件有何不同？

## --answers--

`DOMContentLoaded` 等待图像装载，而 load 不等待。

### --feedback--

考虑每个 `event` 等待的资源。

---

`DOMContentLoaded` 在所有资源装载完成之前触发，而 `load` 则等待所有内容完成。

---

`DOMContentLoaded` 只能与外部脚本一起使用。

### --feedback--

考虑每个 `event` 等待的资源。

---

没有区别；它们是同一个事件。

### --feedback--

考虑每个 `event` 等待的资源。

## --video-solution--

2

## --text--

在提供的示例中，如果在 `Script` 运行时 `DOMContentLoaded` 事件已经触发，会发生什么？

## --answers--

图像完全不会改变。

### --feedback--

考虑代码中的条件式查看。

---

会报错。

### --feedback--

考虑代码中的条件式查看。

---

`changeImg` 函数将被直接调用。

---

事件监听器将被再次添加。

### --feedback--

考虑代码中的条件式查看。

## --video-solution--

3
