---
id: 6733697661182d357fc643d2
title: 什么是 Canvas API，它是如何工作的？
challengeType: 19
dashedName: what-is-the-canvas-api-and-how-does-it-work
---

# --interactive--

`Canvas` API 是一个强大的工具，允许你直接在你的 JavaScript 文件中操作图形。一切都始于 HTML 中的 `canvas` 元素。该元素作为一个绘图表面，你可以使用 `Canvas` API 的实例方法和属性来操作它。

`Canvas` API 提供了创建惊人视觉效果所需的一切，包括形状、文本、动画，甚至复杂的游戏。它具有诸如 `HTMLCanvasElement`、`CanvasRenderingContext2D`、`CanvasGradient`、`CanvasPattern`、`TextMetrics` 等接口，这些接口提供了你可以在 JavaScript 文件中使用的创建图形的方法和属性。

让我们看看 `Canvas` API 是如何工作的，这样你就可以开始用 JavaScript 创建图形。

首先，你需要在你的 HTML 文件中创建一个 `canvas` 元素：

```html
<canvas id="my-canvas"></canvas>
```

`canvas` 元素由 `HTMLCanvasElement` 接口表现，该接口提供了操作它的方法和属性。此外，你可以使用 `Canvas` API 中其他接口的方法和属性。

你可以在超文本标记语言中为你的 `canvas` 设置 `width` 和 `height`：

```html
<canvas id="my-canvas" width="400" height="400"></canvas>
```

或者你可以使用 `HTMLCanvasElement` 接口的 `width` 和 `height` 属性：

```js
const canvas = document.getElementById("my-canvas");
canvas.width = 400;
canvas.height = 400;
```

目前，你还看不到屏幕上的任何内容。在创建你的 `canvas` 元素后，下一步是通过 `HTMLCanvasElement` 接口的 `getContext()` 方法访问画布的绘图上下文。 

最常见的上下文是 `2d`，它允许你在两个维度中绘制：

```js
const canvas = document.getElementById("my-canvas");
const ctx = canvas.getContext('2d');
```

如果你将 `ctx` 变量记录到控制台，你会看到 `CanvasRenderingContext2D` 的方法和属性，这些方法和属性可用于创建形状、颜色、线条等，以及它们的默认值：

```js
console.log(ctx);
```

一旦你拥有了 2D `context`，你就可以开始在画布上绘制。

`Canvas` API 提供了多个用于绘制形状、线条和文本的方法和属性。其中之一是 `fillStyle` 属性，你可以将其与 `fillRect()` 方法结合使用来绘制矩形或正方形：

:::interactive_editor

```html
<html>
  <head>
  </head>
  <body>
    <canvas id="my-canvas" width="400" height="400"></canvas>
    <script src="index.js"></script>
  </body>
</html>
```

```js
const canvas = document.getElementById("my-canvas");

const ctx = canvas.getContext("2d");

// Set the background color
ctx.fillStyle = "crimson";

// Draw a rectangle
ctx.fillRect(1, 1, 150, 100);
```

:::

`fillRect` 接受 4 个数字值，分别表现 x 轴、y 轴、宽度和高度。

屏幕上现在有东西。你也可以绘制文本甚至创建动画。这里有一个画布用来表现文本：

```html
<canvas id="my-text-canvas" width="300" height="70"></canvas>
```

要最终绘制文本，将文本作为第一个参数传递给 `fillText()` 方法，后面跟上 x 轴和 y 轴的值：

:::interactive_editor

```html
<html>
  <head>
  </head>
  <body>
    <canvas id="my-text-canvas" width="300" height="70"></canvas>
    <script src="index.js"></script>
  </body>
</html>
```

```js
const textCanvas = document.getElementById("my-text-canvas");

const textCanvasCtx = textCanvas.getContext("2d");

// Set font family and size
textCanvasCtx.font = "30px Arial";

// Set text color
textCanvasCtx.fillStyle = "crimson";

// Draw the text
textCanvasCtx.fillText("Hello HTML Canvas!", 1, 50);
```

:::

浏览器中的结果将是红色的 `Hello HTML Canvas!` 文本。

你可以用 `Canvas` API 做更多事情。例如，你可以将它与 `requestAnimationFrame` 结合，创建自定义动画、可视化、游戏等。

# --questions--

## --text--

哪个方法和属性允许你在 `Canvas` API 中绘制和填充矩形或正方形？

## --answers--

`strokeRect()` 和 `lineWidth`。

### --feedback--

考虑绘制形状的 `method` 和填充颜色的 `property`。

---

`fillRect()` 和 `fillStyle`。

---

`clearRect()` 和 `strokeStyle`。

### --feedback--

考虑绘制形状的 `method` 和填充颜色的 `property`。

---

`beginPath()` 和 `shadowColor`。

### --feedback--

考虑绘制形状的 `method` 和填充颜色的 `property`。

## --video-solution--

2

## --text--

以下哪项不是 `Canvas` API 中 `CanvasRenderingContext2D` 接口的属性或方法？

## --answers--

`fillStyle`

### --feedback--

考虑画布渲染中常用的属性和方法。

---

`shadowColor`

### --feedback--

考虑画布渲染中常用的属性和方法。

---

`drawImage`

### --feedback--

考虑画布渲染中常用的属性和方法。

---

`backgroundColor`

## --video-solution--

4

## --text--

如何使用 JavaScript 中的 `fillText()` 方法在画布上绘制文本？

## --answers--

传递文本，后跟宽度和高度的值。

### --feedback--

考虑文本应出现的坐标。

---

传递文本，以及 x 轴和 y 轴的值。

---

传递文本和字体大小。

### --feedback--

考虑文本应出现的坐标。

---

传递文本和值颜色。

### --feedback--

考虑文本应出现的坐标。

## --video-solution--

2
