---
id: 695cc8f280fef0cc3bed02c7
title: O que é o módulo Buffer e como ele funciona?
challengeType: 19
dashedName: what-is-the-buffer-module-and-how-does-it-work
---

# --description--

JavaScript foi originalmente criado para rodar em navegadores web, onde seu papel principal era tornar as páginas web interativas. Por causa disso, o JavaScript inicial focava principalmente em manipular texto em formulários e manipular o Document Object Model (DOM).

No entanto, nem todos os dados na web são texto. Arquivos, imagens e vídeos são dados binários, que requerem mecanismos de tratamento diferentes. Nos navegadores, esses tipos de dados são normalmente processados por componentes especializados do navegador em vez do próprio JavaScript.

Navegadores modernos usam motores de renderização e motores JavaScript para gerenciar essas tarefas — por exemplo, Blink (com V8) no Chrome, WebKit (com JavaScriptCore) no Safari e Gecko (com SpiderMonkey) no Firefox.

Node.js não roda no navegador, então ele precisava de sua própria forma de lidar com dados binários, especialmente ao lidar com entrada e saída (I/O) de arquivos e streams TCP, onde os dados chegam em pedaços. É aí que entra o módulo `Buffer`.

O módulo Node.js `Buffer` permite que você trabalhe com dados binários como arquivos, imagens ou fluxos de rede diretamente. Com ele, você pode armazenar e manipular binários diretamente na memória.

Assim como o módulo `fs`, `Buffer` é um dos módulos principais do Node.js, então você não precisa instalá-lo separadamente antes de usá-lo.

Para usá-lo, importe o módulo primeiro por desestruturação:

```js
const { Buffer } = require("buffer");
```

Então chame `Buffer` com os métodos que ele fornece. Por exemplo, `Buffer.from()` permite que você crie um buffer a partir de uma string, array ou outros dados brutos.

Aqui está como criar um `Buffer` a partir de uma string e um array:

```js
// Create a buffer from a string
const myStrBuffer = Buffer.from("freeCodeCamp");
console.log(myStrBuffer); // <Buffer 66 72 65 65 43 6f 64 65 43 61 6d 70>

// Create a buffer from an array of numbers
const myNumBuffer = Buffer.from([
  70, 82, 69, 69, 67, 79, 68, 69, 67, 65, 77, 80,
]);

console.log(myNumBuffer); // <Buffer 46 52 45 45 43 4f 44 45 43 41 4d 50>
```

Embora seja possível usar alguns métodos do módulo `Buffer` sem importá-lo primeiro, outros métodos não estão disponíveis a menos que você importe explicitamente o `Buffer`. Portanto, é recomendado que você sempre importe o `Buffer` sempre que usá-lo em seus projetos.

Você pode acessar elementos individuais do `buffer` assim como um array:

```js
console.log(myNumBuffer[0]); // 70
console.log(myStrBuffer[0]); // 102
```

Você também pode usar o método `toString()` nos buffers para ver como eles realmente são:

```js
console.log(myStrBuffer.toString()); // freeCodeCamp
console.log(myNumBuffer.toString()); // FREECODECAMP
```

`Buffer.alloc()` permite que você crie um novo buffer de um tamanho determinado (número de bytes). Cada byte dentro dele é automaticamente preenchido com `0`:

```js
const someBuffer = Buffer.alloc(10);
console.log(someBuffer); // <Buffer 00 00 00 00 00 00 00 00 00 00>
```

Você pode ver que o buffer é inicializado com zeros, com base no tamanho passado para o método `alloc()`.

Você pode usar o método `Buffer.write()` para escrever neste buffer:

```js
someBuffer.write("Hello fCC");

console.log(someBuffer); // <Buffer 48 65 6c 6c 6f 20 66 43 43 00>
console.log(someBuffer.toString()); // Hello fCC
```

Se você escrever mais dados do que o buffer pode conter, eles serão truncados:

```js
someBuffer.write("Hello freeCodeCamp");

console.log(someBuffer); // <Buffer 48 65 6c 6c 6f 20 66 72 65 65>
console.log(someBuffer.toString()); // Hello free
```

Finalmente, você pode usar `Buffer.byteLength()` para mostrar o número de bytes necessários para armazenar uma string em uma determinada codificação:

```js
console.log(Buffer.byteLength("Hello freeCodeCamp")); // 18
```

Outros métodos de `Buffer` incluem:

- `Buffer.isBuffer()`: verifica se um objeto dado é um buffer
- `Buffer.compare()`: compara dois buffers e retorna a ordem de classificação deles
- `Buffer.concat()`: junta múltiplos buffers em um só

# --questions--

## --text--

Qual destes **NÃO** é um método `Buffer` do Node.js?

## --answers--

`Buffer.from()`

### --feedback--

Pense em como o Node.js lida com dados binários fora dos navegadores.

---

`Buffer.alloc()`

### --feedback--

Pense em como o Node.js lida com dados binários fora dos navegadores.

---

`Buffer.concat()`

### --feedback--

Pense em como o Node.js lida com dados binários fora dos navegadores.

---

`Buffer.insert()`

## --video-solution--

4

## --text--

Por que o Node.js fornece o módulo `Buffer`?

## --answers--

Para melhorar o desempenho do JavaScript nos navegadores.

### --feedback--

Pense em como o Node.js lida com dados que não são apenas texto.

---

Para estilizar páginas web com CSS baseado em binário.

### --feedback--

Pense em como o Node.js lida com dados que não são apenas texto.

---

Para manipular dados binários como arquivos, imagens e streams TCP.

---

Para converter código JavaScript em código de máquina.

### --feedback--

Pense em como o Node.js lida com dados binários fora dos navegadores.

## --video-solution--

3

## --text--

O que acontece se você escrever mais dados do que um buffer pode armazenar?

## --answers--

O buffer redimensiona automaticamente para acomodar todos os dados.

### --feedback--

Pense em como `"Hello freeCodeCamp"` se torna `"Hello free"` em um dos exemplos.

---

Os dados extras são truncados e apenas o que cabe é armazenado.

---

Node.js lança um erro e para a execução.

### --feedback--

Pense em como `"Hello freeCodeCamp"` se torna `"Hello free"` em um dos exemplos.

---

O buffer sobrescreve dados em locais de memória próximos.

### --feedback--

Pense em como `"Hello freeCodeCamp"` se torna `"Hello free"` em um dos exemplos.

## --video-solution--

2

