---
id: 673368b1cf26253212a3cfb2
title: 什麼是 `querySelectorAll()` 方法，及何時應該使用它？
challengeType: 19
dashedName: what-is-the-queryselectorall-method-and-when-should-you-use-it
---

# --description--

讓我們來了解 `querySelectorAll()` 方法。你可以使用這個方法來取得符合特定 CSS 選擇器的所有 DOM 元素的列表。

這是你如何呼叫 `querySelectorAll()` 方法的方法：

```js
document.querySelectorAll(selectors);
```

在 `document` 物件上呼叫它，並將包含 CSS 選擇器的字串作為引數傳遞。該引數必須是有效的 CSS 選擇器字串。否則，將會發出 `SyntaxError` 例外。

`querySelectorAll()` 傳回一個 `NodeList` 物件，該群集包含符合指定 CSS 選擇器的節點。

該列表將包含每個符合 CSS 選擇器的 `Element` 物件。如果沒有找到符合條件，該列表將為空。

元素將按照它們在 HTML 文件中出現的順序排列。 例如，你可以匹配所有特定型別的元素：

```js
document.querySelectorAll("div");
```

所有具有特定類別的元素：

```js
document.querySelectorAll(".rounded");
```

所有具有特定 ID 的元素：

```js
document.querySelectorAll("#logo");
```

或者所有具有特定屬性的元素，例如所有將使用者導向特定 URL 的聯結：

```js
document.querySelectorAll("a[href='https://www.freecodecamp.org/']");
```

你也可以使用更複雜的 CSS 選擇器，例如這個，它會匹配具有類別 `ingredients` 的無序列表元素中的所有列表項目：

```js
document.querySelectorAll("ul.ingredients li");
```

由於該方法會傳回一個節點群集，你可以將此群集指定給一個變數，並在你的程式中使用它來操作各個元素，就像你在這個具有一般語法的範例中看到的那樣：

```js
const matches = document.querySelectorAll(selectors); 
```

例如，如果你有這個包含三個列表項目的無序列表：

```html
<ul class="ingredients">
  <li>Flour</li>
  <li>Cheese</li>
  <li>Water</li>
</ul>
```

你可以呼叫 `querySelectorAll()` 方法來匹配具有 `ingredients` 類別的無序列表中的所有列表項目，並將返回值指定給 `matches` 常數：

```js
const matches = document.querySelectorAll("ul.ingredients li");
```

這將傳回一個包含三個節點的群集。每個節點表述一個列表項目元素：

```js
// NodeList(3)
{
  0: `<li>Flour</li>`,
  1: `<li>Cheese</li>`,
  2: `<li>Water</li>`,
  length: 3,
}
```

你可以像操作任何其他 JavaScript 陣列一樣操作這個群集。

例如，你可以用 `console.log()` 在主控台顯示它：

```js
console.log(matches);
```

你也可以使用 `length` 屬性來檢查群集的長度：

```js
console.log(matches.length);
```

輸出將會是一個整數，表述群集中節點的數量：

```md
3
```

你也可以使用對應的索引來存取群集的個別元素。第一個元素將位於索引 `0`：

```js
console.log(matches[0]);
console.log(matches[1]);
console.log(matches[2]);
```

這是輸出： 

```html
<li>Flour</li>
<li>Cheese</li>
<li>Water</li>
```

這些元素會在主控台上逐一列印。

你也可以使用 `for` 迴圈來迭代元素：

```js
for (let i = 0; i < matches.length; i++) {
  console.log(matches[i]);    
}
```

在這種情況下，輸出將完全相同。但這對於操作群集中的所有元素來說非常強大。

JavaScript 中的 `querySelectorAll()` 方法是根據 CSS 選擇器選取多個元素的強大工具。使用這個方法，你可以選取網頁中特定的元素並根據需要操作它們。

# --questions--

## --text--

`querySelectorAll()` 方法在 JavaScript 中的主要用途是什麼？

## --answers--

在 DOM 中創建新元素。

### --feedback--

思考如何使用 `querySelectorAll()` 來標的元素。

---

修改現有元素的內容。

### --feedback--

思考如何使用 `querySelectorAll()` 來標的元素。

---

根據 CSS 選擇器選取多個元素。

---

從 DOM 中移除元素。

### --feedback--

思考如何使用 `querySelectorAll()` 來標的元素。

## --video-solution--

3

## --text--

`querySelectorAll()` 方法傳回的是什麼型別的物件？

## --answers--

`String`

### --feedback--

思考用來表述一個元素群集的資料結構。

---

`Number`

### --feedback--

思考用來表述一個元素群集的資料結構。

---

`NodeList`

---

`Array`

### --feedback--

思考用來表述一個元素群集的資料結構。

## --video-solution--

3

## --text--

當使用帶有字串選擇器的 `querySelectorAll()` 時，如果選擇器沒有匹配任何元素會發生什麼？

## --answers--

發出錯誤。

### --feedback--

思考 `querySelectorAll()` 查詢的可能結果。

---

傳回 `null` 值。

### --feedback--

思考 `querySelectorAll()` 查詢的可能結果。

---

會傳回一個空的 `NodeList`。

---

傳回第一個符合條件的元素。

### --feedback--

思考 `querySelectorAll()` 查詢的可能結果。

## --video-solution--

3
