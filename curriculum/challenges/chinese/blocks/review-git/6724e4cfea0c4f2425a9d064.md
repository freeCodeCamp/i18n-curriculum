---
id: 6724e4cfea0c4f2425a9d064
title: Git 审查
challengeType: 31
dashedName: review-git
---

# --description--

## 版本控件简介

- **定义**：版本控制系统允许你跟踪和管理你项目中的更改。软件中使用的版本控制系统示例有 Git、SVN 或 Mercurial。

## 基于云的版本控制提供商

- **基于云的版本控制提供商列表**：GitHub 和 GitLab 是流行的基于云的版本控制提供商示例，允许软件团队协作并管理代码库。

## 安装和设置 Git

- **安装 Git**：要查看你的机器上是否已经安装了 Git，你可以在终端中运行以下命令：

```sh
git --version
```

如果你看到版本号，说明已安装 Git。如果没有，则需要安装它。

对于 Linux 系统，Git 通常随大多数发行版预装。如果你没有预装 Git，你应该能够使用你的包管理器命令安装它，例如 `sudo apt-get install git` 或 `sudo pacman -S git`。

对于 Mac 用户，你可以通过 Homebrew 使用 `brew install git` 来安装 Git，或者你可以从 Git 的网站下载可执行安装程序。

对于 Windows，你可以从 Git 的网站下载可执行安装程序。或者，如果你已经设置了 Chocolatey，你可以在 PowerShell 中运行 `choco install git.install`。请注意，在 Windows 上，你可能还想下载 Git Bash，以便拥有类似 Unix 的 shell 环境。

为了确保安装成功，请在终端中再次运行 `git --version` 命令。

- **Git 配置**：`git config` 用于设置负责 Git 在你的机器上如何运行的配置变量。要查看你当前的设置变量以及它们在系统中的存储位置，你可以运行以下命令：

```sh
git config --list --show-origin
```

现在如果你是第一次安装 Git，应该只看到系统级别的配置设置。 

要设置你的用户名，你可以运行以下命令：

```sh
git config --global user.name "Jane Doe"
```

这里使用 `--global` 标记来设置系统中所有使用 Git 的项目的用户名。如果你需要为特定项目覆写用户名，则可以在该特定项目目录中运行命令而不使用 `--global` 标记。

要设置用户电子邮件地址，你可以运行以下命令：

```sh
git config --global user.email janedoe@example.com
```

你还可以设置的另一个配置是你希望 Git 使用的首选编辑器。下面是如何将你的首选编辑器设置为 Emacs 的示例：

```sh
git config --global core.editor emacs
```

如果你选择不设置首选编辑器，那么 Git 将使用你系统的默认编辑器。

## 开源软件与闭源软件

- **定义**：“开源”意味着人们可以查看你发布的代码、提出更改建议、报告问题，甚至运行修改后的版本。“闭源”意味着唯一可以查看和操作该项目的人是你显式授权的人。

## GitHub

- **定义**：GitHub 是一个基于云的方案，提供名为“repositories”的版本控制项目存储，并启用与这些项目一起使用的协作特色。
- **GitHub CLI**：此工具用于在不离开命令行的情况下执行 GitHub 特定的任务。如果你尚未安装，可以从 GitHub 的文档中获取安装说明——但你应该在系统的包管理器中能找到它。
- **GitHub Pages**：GitHub Pages 是部署静态站点或不需要后端服务器来处理逻辑的应用的一个选项。也就是说，完全在客户端或用户浏览器中运行的应用可以完全部署在这个平台上。
- **GitHub Actions**：GitHub Actions 是一个特色，允许你直接在你的 GitHub 仓库中自动化工作流，包括创建、测试和部署你的代码。

## 常用 Git 命令

- **`git init`**：这将初始化一个空的 Git 仓库，以便 Git 可以开始跟踪该项目的更改。当你为一个项目初始化一个空的 Git 仓库时，会添加一个新的 `.git` 隐藏目录。该 `.git` 目录包含 Git 管理你的项目的重要信息。
- **`git status`**：此命令用于显示你工作目录的当前状态——你将在工作流程中频繁使用此命令。
- **`git add`**：此命令用于暂存你的更改。暂存区中的任何内容都将被添加到下一次提交中。如果你想暂存所有未暂存的更改，可以使用 `git add .`。句点（`.`）是你当前所在目录的别名。
- **`git commit`**：此命令用于提交你的更改。提交是你在特定时间点项目状态的屏幕截图。如果你运行 `git commit`，它将打开你在 Git 配置中设置的首选编辑器。编辑器打开后，你可以提供详细的更改消息。你也可以选择使用 `git commit -m` 命令来提供较短的消息，如下所示：

```sh
git commit -m "short message goes here"
```

- **`git log`**：这将列出所有之前的提交，包含作者、提交日期、提交消息和提交哈希等有用信息。提交哈希是一个长字串，用作提交的唯一标识符。
- **`git remote add`**：此命令用于设置到你的远程仓库的远程连接。
- **`git push`**：此命令用于将你的更改推送到远程仓库。
- **`git pull`**：此命令用于将远程仓库中的最新更改拉取到你的局部仓库中。
- **`git clone`**：此命令将克隆一个仓库。这意味着你将拥有该仓库的一个拷贝。此拷贝包括仓库历史记录、所有文件/文件夹和提交，保存在你的局部设备上。
- **`git remote -v`**：此命令将显示与你的局部 `Git` 仓库关联的远程仓库列表。
- **`git branch`**：此命令将列出你所有的局部的分支。
- **`git fetch upstream`**：此命令告诉 Git 获取你上游远程（即原始仓库）上的最新更改。
- **`git merge upstream/main`**：此命令告诉 Git 将上游远程的 `main` 分支中的最新更改合并到你当前的分支。
- **`git reset`**：此命令允许你重置分支的当前状态。传递 `--hard` 标记会告诉 Git 迫使局部的文件匹配分支状态。这确保你有一个干净的起点进行工作。
- **`git rebase`**：Git 中的 rebase 是将一系列提交从一个分支移动或合并到另一个分支的方法。
  
## 使用分支

- **定义**：Git 中的分支是一个独立的工作区，你可以在其中进行更改。`main` 分支通常表现为真实应用中的主分支或生产分支。开发团队会为新特色和错误修复创建多个分支，然后将这些更改合并回 `main` 分支。
- **创建新分支**：要创建新分支，你可以运行以下命令：

```sh
git branch feature
```

要检出该分支，你可以运行以下命令：

```sh
git checkout feature
```

大多数开发者会使用用于创建和切换分支的简写 `Command`，如下所示：

```sh
git checkout -b new-branch-name
```

一个更新且备选的命令是 `git switch` 命令。以下是创建并切换到一个新建分支的示例：

```sh
git switch -c new-branch-name
```

- **分支策略**：你的 `main` 分支是你的默认分支，通常相当稳定。所以最好从那里分支出来，为错误修复、新建特色或其他杂项工作创建新分支。
- **合并冲突**：当 Git 尝试自动合并来自不同分支的更改但无法决定保留哪些更改时，会发生这种情况。通常发生在同一文件部分存在冲突更改时。

## Git 跟踪的文件的五种状态

- **“Untracked”**：这意味着该文件是仓库中新建的，且 Git 之前未“见过”它。
- **"Modified"**：此文件存在于上一个提交中，且有未提交的更改。
- **"Ignored"**：你可能不会在 Git 中看到被忽略的文件，但你的 IDE 可能会有相应的指示。被忽略的文件被排除在 Git 操作之外，通常是因为它们包含在 `.gitignore` 文件中。
- **“Deleted”**：已删除的 `file` 是未跟踪 `file` 的相反——它是之前存在但已被移除的 `file`。
- **“重命名”**：重命名的文件是指内容未更改，但文件的名称或位置被修改的文件。在某些情况下，即使文件有少量更改，也可以视为重命名。

## `.gitignore` 文件

- **定义**：`.gitignore` 文件是一种与 Git 操作相关的特殊类型文件。名称表明该文件用于告诉 Git 忽略某些内容，这也是常见的用例。但它实际上是告诉 Git 停止跟踪某个文件。

## 使用仓库

- **定义**：仓库就像一个项目的容器——如果你正在开发一个应用程序，你会将该应用程序的文件保存在一个仓库中。仓库可以是你计算机上的局部的，也可以是像 GitHub 这样的服务上的远程仓库。
- **公共仓库与私有仓库**：公共仓库可以被任何人查看和下载。私有仓库只能被你和你显式授予访问权限的任何人访问。
- **在 GitHub 上创建仓库**：要在 GitHub 上创建一个新仓库，你可以点击 `"New Repository"` 按钮，然后按照 GitHub 的界面步骤设置新仓库。
- **将局部的仓库推送到 GitHub**：如果你在你的计算机上有一个局部的项目，你可以将该仓库推送到 GitHub。以下是该进程的逐步概述：

1. 在项目目录中初始化一个空的 git 仓库（`git init`）。
2. 对你的项目进行更改。
3. 运行 `git status` 命令以查看所有被 git 跟踪的更改。
4. 暂存你的更改（`git add`）。
5. 提交你的更改（`git commit`）。
6. 设置远程连接（`git remote add`）。
7. 将你的更改推送到 GitHub（`git push`）。

## 拉取请求

- **拉取请求**：拉取请求是将更改从你的分支拉取到目标分支的请求。拉取请求是你想为项目贡献代码更改时使用的流程。这种方法允许项目维护者审查你的更改。他们可以留下评论、提出问题并建议调整。然后，一旦审查过程完成，它可以被批准并合并到主分支。

## 为其他仓库贡献

- **进程**：有成千上万个项目你可以贡献。以下是如何为另一个仓库贡献的基本进程：

1. 读取贡献文档
2. 查找一个可处理的问题
3. 派生该仓库
4. 克隆你分叉的仓库拷贝
5. 创建一个新建分支
6. 根据该问题进行更改
7. 创建一个 PR（Pull Request）
8. 等待对该 PR 的审核

## 使用 SSH 和 GPG 密钥

- **GPG 密钥**：GPG，或称 Gnu Privacy Guard，密钥通常用于对文件或提交进行签名。然后，其他人可以使用你的公用 GPG 密钥来验证文件签名是否来自你的密钥，以及文件内容是否未被修改或篡改。

要生成 GPG 密钥，你需要运行：

```sh
gpg --full-generate-key
```

- **SSH 密钥**：SSH，或称安全外壳，密钥通常用于通过 `ssh` 工具验证到服务器的远程连接。你也可以使用 SSH 密钥来签署提交。

对于 SSH 密钥，你将运行：

```sh
ssh-keygen -t ed25519 -C "your_email@example.com"
```

`ed25519` 是一种现代公钥签名算法。

- **使用 GPG 密钥签署提交**：为了使用你的 GPG 密钥签署提交，你需要将你的公钥上传到你的 GitHub 账户，而不是私钥。要列出你的公钥，你需要运行以下命令：

```sh
gpg --list-secret-keys --keyid-format=long
```

然后，要获取公钥，请使用：

```sh
gpg --armor --export "<key id>"
```
  
然后，使用从列出密钥中获得的短 ID 运行此命令，将其设置为你的 git 签名密钥：

```sh
git config --global user.signingkey <your_gpg_key_id>
```

然后，你可以将 `-S` 标记传递给你的 `git commit` 命令以签署特定的提交——你需要提供你的密码短语。备选地，如果你想自动签署每个提交，你可以将 autosign 配置设置为 `true`：

```sh
git config --global commit.gpgsign true
```

- **使用 SSH 密钥对提交进行签名**：要使用 SSH 密钥进行签名，这是 GitHub 上一个相对新建的特色，你需要先将密钥上传到你的 GitHub 账户。然后你需要为 git 设置使用 SSH 的签名模式：

```sh
git config --global gpg.format ssh
```

然后，要设置签名密钥，你将传递文件路径而不是 ID：

```sh
git config --global user.signingkey <path_to_your_ssh_keys>
```

# --assignment--

复习 Git 主题和概念。
