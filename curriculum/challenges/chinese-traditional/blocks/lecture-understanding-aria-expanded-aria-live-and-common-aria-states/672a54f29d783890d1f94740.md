---
id: 672a54f29d783890d1f94740
title: 訂製控制元件上常用的 ARIA 狀態有哪些？
challengeType: 19
dashedName: what-are-some-common-aria-states-used-on-custom-control-elements
---

# --interactive--

語意化的表單控制元件，例如 `input`、`select`、`textarea`、`button` 和 `fieldset`，具有內建狀態，這些狀態會傳達給輔助技術。

例如，你可以使用 `disabled` 屬性來停用按鈕，或使用 `checked` 屬性來顯示核取方塊已被選取。

但如果你正在建立訂製控制元件，你需要使用 ARIA 屬性來向輔助技術傳達控制元件的狀態。

在本課程中，我們將討論你可以用在訂製控制元件上的幾個常見 ARIA 狀態。

我們將討論的第一個 ARIA 狀態是 `aria-selected`。此狀態用於顯示元素已被選取。你可以在訂製控制元件，如分頁介面、列表框或格線上使用此狀態。

以下是你如何在訂製分頁控制元件上使用 `aria-selected` 的範例：

:::interactive_editor

```html
<link rel="stylesheet" href="styles.css">
<div role="tablist">
  <button role="tab" aria-selected="true">Tab 1</button>
  <button role="tab" aria-selected="false">Tab 2</button>
  <button role="tab" aria-selected="false">Tab 3</button>
</div>
<script src="index.js"></script>
```

```css
[role="tablist"] {
  display: flex;
  border-bottom: 2px solid #ddd;
  gap: 0.25rem;
  font-family: system-ui, sans-serif;
}

[role="tab"] {
  appearance: none;
  border: none;
  background: none;
  padding: 0.5rem 1rem;
  cursor: pointer;
  font-size: 1rem;
  color: #444;
  border-radius: 4px 4px 0 0;
  transition: background-color 0.2s, color 0.2s;
}

[role="tab"]:hover {
  background-color: #f3f3f3;
}

[role="tab"][aria-selected="true"] {
  background-color: #fff;
  color: #0078d4;
  border: 2px solid #0078d4;
  border-bottom: 2px solid #fff; 
  font-weight: 600;
  position: relative;
  z-index: 1;
}

[role="tab"]:focus {
  outline: 2px solid #0078d4;
  outline-offset: 2px;
}

```

```js
document.addEventListener("click", (event) => {
  const clickedTab = event.target.closest('[role="tab"]');
  if (!clickedTab) return;

  const tablist = clickedTab.closest('[role="tablist"]');
  const tabs = tablist.querySelectorAll('[role="tab"]');

  tabs.forEach((tab) => {
    const isSelected = tab === clickedTab;
    tab.setAttribute("aria-selected", isSelected);
    tab.tabIndex = isSelected ? 0 : -1;
  });
});

document.addEventListener("keydown", (event) => {
  const activeTab = document.activeElement;
  if (activeTab.getAttribute("role") !== "tab") return;

  const tablist = activeTab.closest('[role="tablist"]');
  const tabs = Array.from(tablist.querySelectorAll('[role="tab"]'));
  const index = tabs.indexOf(activeTab);

  let newIndex = index;
  if (event.key === "ArrowRight") newIndex = (index + 1) % tabs.length;
  if (event.key === "ArrowLeft") newIndex = (index - 1 + tabs.length) % tabs.length;

  if (newIndex !== index) {
    tabs[newIndex].focus();
    tabs[newIndex].click();
  }
});

```

:::

分頁用於在有限空間中顯示多個內容面板。`aria-selected` 狀態用於顯示目前選取的分頁。

當使用者選擇一個分頁時，所選分頁的 `aria-selected` 狀態會被設為 `true`，而其他分頁的 `aria-selected` 狀態會被設為 `false`。

另一個常見的 ARIA 狀態是 `aria-disabled`。此狀態用於向使用輔助技術（例如螢幕閱讀器）的人指出元素已被停用。重要的是要注意，`aria-disabled` 並不會真正停用該元素。由你這位開發者負責讓它看起來並且行為像一個已停用的元素。此屬性也常用於原生 HTML 元素，取代 `disabled` 屬性。你選擇哪一個將取決於按鈕所使用的背景關係。

以下是你如何在訂製編輯按鈕上使用 `aria-disabled` 的範例：

:::interactive_editor

```html
<link rel="stylesheet" href="styles.css">
<div role="button" tabindex="-1" aria-disabled="true">Edit</div>
```

```css
[role="button"] {
  display: inline-block;
  background-color: #0078d4;
  color: #fff;
  padding: 0.5rem 1rem;
  border-radius: 6px;
  font-family: system-ui, sans-serif;
  font-size: 1rem;
  text-align: center;
  cursor: pointer;
  user-select: none;
  transition: background-color 0.2s, transform 0.1s, opacity 0.2s;
}

[role="button"]:not([aria-disabled="true"]):hover {
  background-color: #005fa3;
}

[role="button"]:not([aria-disabled="true"]):focus {
  outline: 2px solid #005fa3;
  outline-offset: 2px;
}

[role="button"]:not([aria-disabled="true"]):active {
  transform: scale(0.97);
}

[role="button"][aria-disabled="true"] {
  opacity: 0.5;
  pointer-events: none;
  cursor: not-allowed;
  background-color: #b0b0b0;
  color: #f2f2f2;
}
```

:::

`aria-disabled` 屬性用於告知螢幕閱讀器使用者編輯按鈕已被停用且無法互動。但它並不會實際停用按鈕。當使用 `aria-disabled` 時，你需要套用樣式和 JavaScript，使控制元件看起來並且行為像一個停用的按鈕。

在大多數情況下，你可能會使用原生的按鈕元素，但有些情況下你可能需要使用訂製控制元件。因此，了解如何將控制元件的狀態傳達給輔助技術是非常重要的。

下一個我們將討論的 ARIA 狀態是 `aria-haspopup`。此狀態用於顯示互動元素在作用時會觸發彈出元素。只有當彈出元素具有以下其中一個角色時，你才能使用 `aria-haspopup` 屬性：`menu`、`listbox`、`tree`、`grid` 或 `dialog`。`aria-haspopup` 的值必須是這些角色之一或 `true`，而 `true` 的預設角色為 `menu`。 

這是一個使用 `aria-haspopup` 的檔案編輯器選單範例：

:::interactive_editor

```html
<link rel="stylesheet" href="styles.css">
<button id="menubutton" aria-haspopup="menu" aria-controls="filemenu" aria-expanded="false">File</button>
<ul id="filemenu" role="menu" aria-labelledby="menubutton" hidden>
  <li role="menuitem" tabindex="-1">Open</li>
  <li role="menuitem" tabindex="-1">New</li>
  <li role="menuitem" tabindex="-1">Save</li>
  <li role="menuitem" tabindex="-1">Delete</li>
</ul>
```

```css
#menubutton {
  background-color: #0078d4;
  color: #fff;
  border: none;
  padding: 8px 14px;
  border-radius: 4px;
  cursor: pointer;
  font-size: 14px;
  position: relative;
}

#menubutton:hover,
#menubutton:focus {
  background-color: #005ea2;
  outline: none;
}

#filemenu {
  list-style: none;
  padding: 4px 0;
  margin: 4px 0 0;
  border: 1px solid #ccc;
  border-radius: 4px;
  background-color: #fff;
  width: 160px;
  position: absolute;
  z-index: 1000;
  box-shadow: 0 4px 6px rgba(0,0,0,0.1);
}

#filemenu[hidden] {
  display: none;
}

#filemenu [role="menuitem"] {
  display: block;
  padding: 8px 12px;
  font-size: 14px;
  color: #333;
  cursor: pointer;
}

#filemenu [role="menuitem"]:hover,
#filemenu [role="menuitem"]:focus {
  background-color: #e5f1fb;
  outline: none;
}

#filemenu [role="menuitem"]:focus-visible {
  box-shadow: inset 0 0 0 2px #0078d4;
}

```

:::

`aria-haspopup` 狀態用於顯示 `File` 選單按鈕在作用時會開啟快顯選單。當使用者瀏覽到該按鈕時，螢幕閱讀器使用者可能會聽到這個額外的資訊。

你需要使用 JavaScript 來顯示和隱藏快顯選單，並實作適當的鍵盤支援以與選單互動。另外，請注意 ARIA 的 `menu` 角色指涉的是一種非常特定的選單型別。它通常指的是使用者可以呼叫的一系列動作，類似桌面應用程式上的選單。它不包含我們通常所稱的「選單」中較常見的用法，例如導覽選單。實際上，你在網頁上創建的大多數「選單」不會是 ARIA 選單，且你不會對它們使用 `aria-haspopup`。

下一個我們將討論的 ARIA 狀態是 `aria-required`。`aria-required` 屬性用於顯示欄位在提交表單之前必須填寫。

這裡是一個使用 `aria-required` 屬性來操作訂製表單控制元件的範例。

:::interactive_editor

```html
<link rel="stylesheet" href="styles.css">
<div id="name-label">Full Name*</div>
<div role="textbox" contenteditable aria-labelledby="name-label" aria-required="true" id="name"></div>
```

```css
#name-label {
  font-family: system-ui, sans-serif;
  font-size: 0.95rem;
  font-weight: 600;
  margin-bottom: 0.25rem;
  color: #333;
}

[role="textbox"] {
  display: block;
  width: 100%;
  min-height: 2rem;
  padding: 0.5rem 0.75rem;
  border: 1.5px solid #ccc;
  border-radius: 4px;
  font-family: system-ui, sans-serif;
  font-size: 1rem;
  color: #222;
  background-color: #fff;
  line-height: 1.4;
  transition: border-color 0.2s, box-shadow 0.2s;
}

[role="textbox"]:hover {
  border-color: #999;
}

[role="textbox"]:focus {
  outline: none;
  border-color: #0078d4;
  box-shadow: 0 0 0 3px rgba(0, 120, 212, 0.25);
}

[role="textbox"]:empty::before {
  content: attr(data-placeholder);
  color: #aaa;
  pointer-events: none;
}

[role="textbox"][aria-required="true"] {
  border-left: 3px solid #e81123;
  padding-left: calc(0.75rem - 3px);
}
```

:::

我們需要使用 `contenteditable` 屬性，讓使用者可以輸入他們的內容。我們也使用了設定為 `true` 的 `aria-required` 屬性，以顯示這個訂製表單控制元件是必填的。

為了讓表單控制元件看起來像一般的表單控制元件，你需要添加 CSS。你也需要添加 JavaScript 以防止表單在沒有內容的情況下被提交。

如果標籤已經有字 `required`，那麼你應該省略 `aria-required` 屬性。這可確保螢幕閱讀器只會宣告字 required 一次。

在大多數情況下，你可能會使用帶有 `required` 屬性的原生 `label` 和 `form` 元素。但如果你需要創建訂製的表單控制元件，則在必要時為你的控制元件添加 `aria-required` 屬性非常重要。

此外，`aria-required` 屬性也可以用在原生的表單輸入元件上，例如 `input`、`textarea` 和 `select` 元素。這通常比使用原生的 required 屬性更受青睞，因為 required 屬性可能會有潛在的可用性和存取性問題，特別是瀏覽器所提供的預設錯誤處理。最終，你需要進行測試以判斷哪個屬性最適合你的情況。

我們將討論的最後一個 ARIA 狀態是 `aria-checked`。此屬性用於顯示元素是否處於已勾選狀態。它最常用於建立訂製的核取方塊、圓鈕、切換按鈕和列表框。

以下是如何在訂製核取方塊控制元件上使用 `aria-checked` 的範例：

:::interactive_editor

```html
<link rel="stylesheet" href="styles.css">
<div role="checkbox" aria-checked="true" tabindex="0">Checkbox</div>
```

```css
[role="checkbox"] {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  font-family: system-ui, sans-serif;
  font-size: 1rem;
  cursor: pointer;
  user-select: none;
  color: #222;
}

[role="checkbox"]::before {
  content: "";
  display: inline-block;
  width: 1rem;
  height: 1rem;
  border: 2px solid #666;
  border-radius: 4px;
  background-color: #fff;
  transition: all 0.2s ease;
  box-sizing: border-box;
}

[role="checkbox"]:hover::before {
  border-color: #0078d4;
}

[role="checkbox"]:focus::before {
  outline: 2px solid #0078d4;
  outline-offset: 2px;
}

[role="checkbox"][aria-checked="true"]::before {
  background-color: #0078d4;
  border-color: #0078d4;
  background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='14' height='14' viewBox='0 0 14 14'><path fill='white' d='M5.2 10.4L2 7.2l1.1-1.1 2.1 2.1L10.9 2.5 12 3.6z'/></svg>");
  background-repeat: no-repeat;
  background-position: center;
}

[role="checkbox"][aria-disabled="true"] {
  opacity: 0.5;
  pointer-events: none;
  cursor: not-allowed;
}

```

:::

原生的核取方塊元素具有內建的 `checked` 狀態，該狀態會傳達給輔助技術。但如果你正在建立訂製的核取方塊控制元件，你將需要使用 `aria-checked` 屬性來顯示其狀態。

當使用者與訂製的核取方塊控制元件交談時，你需要使用 `aria-checked` 狀態來反映核取方塊的新狀態。當核取方塊被勾選時，`aria-checked` 屬性設為 `true`。當它未被勾選時，設為 `false`。

原生的元素通常具有較佳的支援和內建的無障礙特性。

但是，如果你必須創建訂製控制元件，使用 ARIA 屬性對於有效地向輔助技術傳達這些控制元件的狀態是必要的。

一如既往，測試你的工作以確保 ARIA 屬性已正確套用，且訂製控制元件的運作方式既可存取又符合使用者友善。

# --questions--

## --text--

你會使用哪個 ARIA 狀態來顯示目前已選取的分頁？

## --answers--

`aria-disabled`

### --feedback--

此狀態顯示哪個分頁是作用中的。

---

`aria-selected`

---

`aria-haspopup`

### --feedback--

此狀態顯示哪個分頁是作用中的。

---

`aria-checked`

### --feedback--

此狀態顯示哪個分頁是作用中的。

## --video-solution--

2

## --text--

在訂製控制元件的背景關係中，哪一個 ARIA 狀態用來顯示一個元素目前已被停用？

## --answers--

`aria-checked`

### --feedback--

此狀態表示該元素無法互動。

---

`aria-disabled`

---

`aria-selected`

### --feedback--

此狀態表示該元素無法互動。

---

`aria-haspopup`

### --feedback--

此狀態表示該元素無法互動。

## --video-solution--

2

## --text--

當你想要顯示某個選單項目有子選單時，應該使用哪個 ARIA 狀態？

## --answers--

`aria-checked`

### --feedback--

其中一個狀態強烈暗示有彈出視窗存在。

---

`aria-disabled`

### --feedback--

其中一個狀態強烈暗示有彈出視窗存在。

---

`aria-haspopup`

---

`aria-selected`

### --feedback--

其中一個狀態強烈暗示有彈出視窗存在。

## --video-solution--

3
