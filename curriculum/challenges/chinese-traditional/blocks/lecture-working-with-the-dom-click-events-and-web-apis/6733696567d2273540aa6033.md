---
id: 6733696567d2273540aa6033
title: 什麼是 Web Animations API，以及它與 CSS 動畫屬性有何關係？
challengeType: 19
dashedName: what-is-the-web-animations-api-and-how-does-it-relate-to-css-animation-properties
---

# --interactive--

`Web Animations` API（WAAPI）允許你直接在 JavaScript 中創建並控制動畫。使用 WAAPI，你可以更動態地操作動畫，使其更容易被操控。

讓我們更詳細地看看 WAAPI，這樣你就可以開始在你的 JavaScript 程式碼中直接操作動畫。WAAPI 的核心是 `Animation` 建構式，它提供了多個實體方法和屬性，讓你能夠動態地為元素製作動畫。

`Animation` 建構式中一個重要的 `method` 是 `animate()`。它允許你透過指定關鍵影格和像是持續時間、方向、緩動和迭代次數等選項來創建動畫。

以下是 `animate()` 方法的基本語法：

```js
element.animate(keyframes, options);
```

讓我們來看一個範例。 

:::interactive_editor

```html
<link rel="stylesheet" href="styles.css" />
<div class="square" id="square"></div>
<script src="index.js"></script>
```

```css
body {
  background: #f1f1f1;
  display: flex;
  align-items: center;
  justify-content: center;
  height: 100vh;
}

.square {
  background: #1b1b32;
  width: 10rem;
  aspect-ratio: 1/1;
}
```

```js
const square = document.querySelector("#square");

const animation = square.animate(
  [{ transform: "translateX(0px)" }, { transform: "translateX(100px)" }],
  {
    duration: 2000, // makes animation lasts 2 seconds
    iterations: Infinity, // loops indefinitely
    direction: "alternate", // moves back and forth
    easing: "ease-in-out" // smooth easing
  }
);
```

:::

瀏覽器中的結果將會是一個水平來回移動的藍色方塊。

`Animation` 建構式的實體方法包括：

```js
play()
pause()
reverse()
finish()
cancel()
```

而實體屬性包括：

```md
playbackRate
currentTime
startTime
effect
timeline
playState
finished
onfinish
oncancel
```

讓我們修改範例以使用 `play()`、`pause()` 方法和 `onfinish` 屬性。這是新版本：

:::interactive_editor

```html
<link rel="stylesheet" href="styles.css" />
<div class="square" id="square"></div>

<button id="playBtn">Play</button>
<button id="pauseBtn">Pause</button>
<script src="index.js"></script>
```

```css
body {
  background: #f1f1f1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100vh;
}
.square {
  background: #1b1b32;
  width: 10rem;
  aspect-ratio: 1/1;
  margin-bottom: 20px;
}
button {
  margin: 10px;
  padding: 10px 20px;
  font-size: 16px;
}
```

```js
const square = document.querySelector("#square");
const playBtn = document.querySelector("#playBtn");
const pauseBtn = document.querySelector("#pauseBtn");

const animation = square.animate(
  [{ transform: "translateX(0px)" }, { transform: "translateX(200px)" }],
  {
    duration: 5000, // Animation lasts 5 seconds
    // iterations: Infinity, // Loops indefinitely
    direction: "alternate", // Moves back and forth
    easing: "ease-in-out" // Smooth easing function
  }
);

// Set the onfinish property to log a message when the animation ends
animation.onfinish = () => {
  console.log("Animation finished!");
};

// Play the animation when the "Play" button is clicked
playBtn.addEventListener("click", () => {
  animation.play();
  console.log("You start the animation");
});

// Pause the animation when the "Pause" button is clicked
pauseBtn.addEventListener("click", () => {
  animation.pause();
  console.log("You pause the animation");
});
```

:::

當點擊 `play` 按鈕時，瀏覽器中的結果會顯示藍色方塊從左移動到右。

WAAPI 透過在 JavaScript 中提供更動態的動畫控制，擴展了 CSS 動畫的功能。

使用 CSS 動畫時，你可以使用像是 `animation-name`、`animation-duration` 和 `animation-timing-function` 等屬性以宣告式方式定義動畫。你也可以使用 WAAPI 的 `animate()` 方法達成相同的效果。

差別在於你可以更直接且動態地控制你用 `animate()` 方法創建的動畫，但使用 CSS 動畫時，你需要透過定義訂製樣式並在你的 JavaScript 檔案中觸發它們來完成更多工作。

CSS 動畫非常適合簡單且宣告式的動畫，這些動畫會自動執行。這些包括暫留效果、過渡或不需要太多互動即可觸發的動畫。如果你的動畫需要回應使用者互動，例如點擊和捲動，或者你希望使用者能夠暫停、反轉或動態改變速度，WAAPI 是較好的選擇。 

當你想要使用 CSS 的簡單性來進行基本設定，但又需要在執行期控制動畫時，你可以考慮結合使用 WAAPI 和 CSS 動畫。

# --questions--

## --text--

Web Animations API（WAAPI）中用於建立動畫的主要方法是什麼？

## --answers--

`setInterval()`

### --feedback--

思考允許你定義關鍵影格和持續時間等選項的行為。

---

`setTimeout()`

### --feedback--

思考允許你定義關鍵影格和持續時間等選項的行為。

---

`animate()`

---

`requestAnimationFrame()`

### --feedback--

思考允許你定義關鍵影格和持續時間等選項的行為。

## --video-solution--

3

## --text--
以下哪一項不是 Web Animations API（WAAPI）中 `Animation` 建構式的實體方法？

## --answers--

`play()`

### --feedback--

思考用來控制動畫的行為。

---

`pause()`

### --feedback--

思考用來控制動畫的行為。

---

`reverse()`

### --feedback--

思考用來控制動畫的行為。

---

`stop()`

## --video-solution--

4

## --text--

你應該在什麼時候使用 WAAPI 而非 CSS 動畫？

## --answers--

用於簡單、自動的暫留效果。

### --feedback--

想想你需要對動畫有更多控制的情況。

---

當你需要動畫回應使用者互動，例如點擊、捲動，或允許動態控制如暫停或反轉時。

---

當你只需要沒有互動的過場動畫時。

### --feedback--

想想你需要對動畫有更多控制的情況。

---

對於在被觸發後不需要太多互動的動畫。

### --feedback--

想想你需要對動畫有更多控制的情況。

## --video-solution--

2
