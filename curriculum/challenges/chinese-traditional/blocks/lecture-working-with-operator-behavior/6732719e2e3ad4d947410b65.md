---
id: 6732719e2e3ad4d947410b65
title: 運算子優先如何運作？
challengeType: 19
dashedName: how-does-operator-precedence-work
---

# --interactive--

如果你在 JavaScript 中撰寫包含多個運算子的表達式，JavaScript 如何決定先計算哪一個？這就是運算子優先的用武之地。讓我們透過程式碼範例詳細探討運算子優先，以及當運算子具有相同優先時會發生什麼情況。

運算子優先決定運算式中操作的評估順序。優先較高的運算子會先於優先較低的運算子被評估。將運算子優先想像成數學中的情況，除法和乘法會先於加法和減法進行。

如果不遵守這條規則，基本方程式會給你錯誤的答案。JavaScript 的運作方式也是如此。它有自己的規則決定哪些運算子先執行、哪些運算子後執行，依此類推。<dfn>例如</dfn>，請看下面的表達式：

:::interactive_editor

```js
const result = 2 + 3 * 4;

console.log(result); // 14
```

:::

如果 JavaScript 從左到右評估這個表達式，你會預期 `2 + 3 = 5`，然後 `5 * 4 = 20`。但因為乘法的優先高於加法，JavaScript 會先評估 `3 * 4` 這部分，結果是 `2 + 12 = 14`。 

有時候，你可能希望你的表達式中的某些零件先執行，不管優先規則為何。你可以使用小括弧、`()` 來達成這個目的。小括弧內的任何東西都會先被計算，無論如何。讓我們讓前一個範例中的 `2 + 3` 部分先被計算：

:::interactive_editor

```js
const result = (2 + 3) * 4;

console.log(result); // 20
```

:::

在上述範例中，小括弧強制 JavaScript 先計算 `2 + 3`，然後再將結果乘以 `4`。這會給你 `20` 而不是 `14`。

除法運算子的優先權也高於加法或減法：

:::interactive_editor

```js
const result = 2 + 6 / 3;

console.log(result); // 4
```

:::

如果 JavaScript 從左到右評估這個表達式，你可能會預期 `2 + 6 = 8`，然後 `8 / 3 = 2.67`。但由於除法的優先高於加法，JavaScript 會先評估除法：`6 / 3 = 2`，然後再將 `2 + 2` 相加，得到結果 `4`。

因此，在乘法和除法中，這些操作行為總是會在加法和減法之前進行，除非你使用小括弧來改變順序。那麼，如果運算子具有相同的優先順序會發生什麼？JavaScript 使用結合性來決定評估它們的順序。

結合性告訴 JavaScript 是否要從左到右或從右到左評估運算子。對於大多數運算子，例如加法和乘法，結合性是從左到右。因此，JavaScript 從運算式的最左側開始處理：

:::interactive_editor

```js
const result = 10 - 2 + 3;

console.log(result); // 11
```

:::

首先，`10 - 2 = 8`，然後 `8 + 3 = 11`。在這種情況下，JavaScript 從左到右執行。有些運算子，例如指派運算子（`=`），是從右到左結合。這表示表達式的右側會先被評估：

:::interactive_editor

```js
let a, b;
a = b = 5;

console.log(a); // 5
console.log(b); // 5
console.log(a + b); // 10
```

:::

在上述範例中，JavaScript 先將 `5` 指定給 `b`，然後將 `b`（現在是 `5`）指定給 `a`。

指數運算子也是由右至左結合的：

:::interactive_editor

```js
const result = 2 ** 3 ** 2;

console.log(result); // 512
```

:::

首先，JavaScript 計算 `3 ** 2`，結果為 `9`，接著計算 `2 ** 9`，結果為 `512`。如果指數運算子具有由左至右的結合性，JavaScript 會先計算 `2 ** 3` 得到 `8`，然後計算 `8 ** 2` 得到 `64`。 

# --questions--

## --text--

JavaScript 中的運算子優先與數學相比如何？

## --answers--

加法發生在乘法和除法之前。

### --feedback--

思考你在數學方程式中遵循的運算順序。

---

除法和乘法會在加法和減法之前進行，就像數學中一樣。

---

所有操作行為皆依其出現順序執行。

### --feedback--

思考你在數學方程式中遵循的運算順序。

---

減法的優先高於所有其他操作。

### --feedback--

思考你在數學方程式中遵循的運算順序。

## --video-solution--

2

## --text--

你如何在 JavaScript 中改寫 `operator` 的 `precedence`？

## --answers--

透過使用加法運算子（`+`）來改變操作順序。

### --feedback--

思考你如何改變數學方程式中的操作順序。

---

透過使用小括弧強制先計算表達式的某些零件。

---

透過反轉表達式中的運算子。

### --feedback--

思考你如何改變數學方程式中的操作順序。

---

無論優先，皆由左至右執行所有操作。

### --feedback--

思考你如何改變數學方程式中的操作順序。

## --video-solution--

2

## --text--

JavaScript 如何使用指數運算子（`**`）來評估表達式？

## --answers--

從左到右。

### --feedback--

思考指數運算在該表達式中發生的順序。

---

從右到左，表示它先計算最右邊的冪次方。

---

透過將底數乘以自身指定的次數。

### --feedback--

思考指數運算在該表達式中發生的順序。

---

先將指數相加，然後計算結果。

### --feedback--

思考指數運算在該表達式中發生的順序。

## --video-solution--

2
