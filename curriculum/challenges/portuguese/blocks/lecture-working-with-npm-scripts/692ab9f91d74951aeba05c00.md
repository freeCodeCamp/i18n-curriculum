---
id: 692ab9f91d74951aeba05c00
title: O que são npm Scripts?
challengeType: 19
dashedName: what-are-npm-scripts
---

# --description--

Agora você vai aprender sobre scripts npm.

Antes de começarmos, vamos revisar alguns conceitos importantes:

* **npm** é uma ferramenta de linha de comando que você pode usar para instalar e gerenciar pacotes JavaScript.
    
* Um **package** é um diretório que agrupa código relacionado em uma estrutura lógica.
    
* Um **script** é uma sequência de instruções ou comandos escritos em uma linguagem de programação de script.
    

**npm scripts** são comandos personalizados que você pode definir no arquivo `package.json` da sua aplicação.

Eles são úteis para automatizar tarefas e fluxos de trabalho que você usará repetidamente durante as fases de desenvolvimento, teste e implantação do seu projeto.

Por exemplo, um caso de uso para scripts npm é personalizar o `npm start` para iniciar todo o seu ambiente de desenvolvimento. Em vez de escrever manualmente todos os comandos um a um toda vez que você precisar iniciar seu ambiente de desenvolvimento, você pode simplesmente executar `npm start` e todo o processo será executado.

Você também pode usar scripts npm para automatizar a verificação de lint em todo o seu código e para executar suítes de teste entre outros casos de uso.

Eles são muito poderosos, então vamos conferir seus fundamentos.

## Como Criar um arquivo package.json

Para poder criar e executar scripts npm personalizados, você precisará de um arquivo `package.json`.

O arquivo `package.json` é essencial para projetos Node.js. Este arquivo contém os metadados, dependências e scripts do projeto.

Como lembrete, para criar um arquivo `package.json`, você deve executar o comando `npm init` no diretório raiz do seu projeto. Então você pode inserir manualmente o nome do pacote, versão, descrição e outros detalhes, ou deixar esses campos em branco para usar os valores padrão.

Depois de terminar esse processo, você terá um arquivo `package.json` no diretório raiz do seu projeto.

Se você manteve todos os valores padrão, deverá ver esses pares chave-valor quando abrir `package.json` no seu editor de código:

```json
{
  "name": "<project_name>",
  "version": "1.0.0",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "author": "",
  "license": "ISC",
  "description": ""
}
```

Observe este par chave-valor aqui:

```json
"scripts": {
  "test": "echo \"Error: no test specified\" && exit 1"
}
```

É aqui que você especificará seus scripts npm, sob a chave `scripts`.

Você verá um script lá por padrão, o script de teste:

```json
"test": "echo \"Error: no test specified\" && exit 1"
```

Este é um exemplo de um script npm definido em `package.json`.

Aqui está a sintaxe básica para definir um script npm:

```json
"<script_name>": "<commands>"
```

À esquerda dos dois pontos, encontramos o nome do script. Os mais comuns incluem `run`, `start`, `test`, `build`, `dev` e `lint`. Esses nomes funcionam como "atalhos" para seus comandos subjacentes à direita.

À direita dos dois pontos, encontramos os próprios comandos subjacentes.

Por exemplo:

```json
"scripts": {
  "start": "node app.js"
}
```

Para executar o script, digite isto na linha de comando:

```bash
npm run <script_name>
```

E é assim que você pode executar quaisquer scripts personalizados definidos em `package.json`.

Às vezes você pode usar esta versão abreviada sem a palavra `run` para executar scripts:

```bash
npm <script_name>
```

Mas isso funciona apenas para scripts npm específicos chamados `start`, `test`, `stop` e `restart`.

Voltando ao nosso exemplo, se tivermos isso em `package.json`:

```json
"scripts": {
  "start": "node app.js"
}
```

Para executar o script npm, você precisa digitar `npm run start` na linha de comando. Quando você faz isso, o comando real subjacente que é executado é `node app.js`.

Como este script npm tem uma versão abreviada, você também pode usar `npm start` e o resultado será o mesmo.

Neste caso, você está apenas substituindo um comando simples, `node app.js`, por outro, `npm start`. Mas imagine se você tivesse uma sequência de comandos complexos que precisam ser executados em sequência ou em paralelo e você pudesse usar apenas `npm start` para executar todos eles. Isso economizaria muito tempo, certo? É aí que o poder dos scripts do npm realmente brilha.

Aqui está uma visão geral rápida de alguns dos scripts npm mais usados comumente:

* `npm run`: usado para executar um script npm personalizado.
    
* `npm start`: usado para iniciar a aplicação principal ou o servidor de desenvolvimento.
    
* `npm lint`: usado para executar um verificador de estilo de código para verificar se seu código atende aos padrões de estilo de código e melhores práticas.
    
* `npm test`: usado para executar a suíte de testes do projeto.
    
Existem muitos outros scripts npm para diferentes propósitos, mas estes são alguns dos mais comuns que você verá.

Além disso, uma convenção comum é usar dois pontos para agrupar scripts relacionados sob o mesmo namespace. Por exemplo, `start:server` e `start:ui`.

## Como Executar Comandos Sequencialmente

Se você precisar executar vários comandos em sequência, você tem duas opções. Você pode usar o operador lógico AND (`&&`) ou o ponto e vírgula (`;`). Vamos conferir as diferenças entre eles.

O operador lógico AND executa o próximo comando somente se o primeiro for executado com sucesso.

Por exemplo:

```json
"scripts": {
  "build": "webpack --mode production",
  "start": "npm run build && node server.js"
}
```

Observe que há um operador lógico AND no comando `start`:

```json
"start": "npm run build && node server.js"
```

Aqui, `npm start` tentará executar `npm run build` primeiro e somente se esse script for executado com sucesso, `node server.js` será executado.

Esta é uma abordagem muito comum porque garante confiabilidade e evita o desperdício de tempo e recursos em comandos subsequentes que podem falhar ou gerar erros se o anterior falhar.

Alternativamente, você pode usar o operador ponto e vírgula para executar comandos sequencialmente, independentemente de o comando anterior ter sido bem-sucedido ou não.

No nosso exemplo, essa mudança simples teria um impacto importante em como os comandos serão executados:

```json
"scripts": {
  "build": "webpack --mode production",
  "start": "npm run build; node server.js"
}
```

Concentre-se no comando `start` novamente:

```json
"start": "npm run build; node server.js"
```

Agora, como estamos usando um ponto e vírgula em vez do operador `&&`, o comando `node server.js` sempre será executado após `npm run build`, mesmo que `node server.js` não tenha sido bem-sucedido.

```json
"start": "npm run build; node server.js"
```

## Como Executar Comandos Concorrentemente

Se você precisar executar comandos simultaneamente (em paralelo), pode usar o operador `&`.

```json
"scripts": {
  "start:server": "node server/index.js",
  "start:client": "npm run build:watch",
  "dev": "npm run start:server & npm run start:client"
}
```

No entanto, você deve saber que esta opção executa os processos em segundo plano.

Isso significa que, se você executá-los na mesma sessão do terminal, poderá ver a saída combinada deles, o que pode ser difícil de entender.

Outras opções para executar comandos simultaneamente incluem ferramentas como `concurrently` e `npm-run-all`.

## Como Passar Argumentos para Scripts npm

Se você precisar passar argumentos diretamente para o comando que está sendo executado dentro do script npm, você pode especificá-los no comando escrevendo dois hífens (`--`) seguidos dos argumentos.

O `--` indica ao npm que tudo que vier depois dele serão argumentos para os comandos subjacentes que o script npm irá executar.

Esta é a sintaxe geral:

```bash
npm run <script_name> -- <argument_1> <argument_2> <argument_3>
```

Por exemplo, digamos que você defina este script `npm start`:

```json
{
  "name": "project-example",
  "scripts": {
    "start": "node app.js"
  }
}
```

Como você poderia especificar a porta onde deseja executar seu servidor se usar `npm start`?

Vamos supor que queremos passar a porta diretamente como um argumento de linha de comando. Você escreveria isto:

```bash
npm start -- 8000
```

No seu código, você pode acessar esses argumentos no array `process.argv` usando índices:

```bash
process.argv[0] # The path to the node executable.
process.argv[1] # The script file being executed.
process.argv[2] # The first argument (8000).
```

Portanto, você pode acessar e usar o número da porta onde precisar com `process.argv[2]`. Esse é o poder dos argumentos de linha de comando combinados com scripts npm.

Como você pode ver, os scripts do npm são ferramentas essenciais para simplificar o fluxo de trabalho de desenvolvimento. Eles ajudam você a automatizar e transformar sequências de comandos complexas e reutilizáveis em atalhos simples e consistentes que você pode usar no seu trabalho diário.

# --questions--

## --text--

Onde os scripts npm são definidos em um projeto Node.js?

## --answers--

Em um arquivo `.npmignore`.

### --feedback--

Pense no arquivo que atua como o manifesto central para um projeto Node.js e seus comandos executáveis.

---

Dentro do objeto `"dependencies"` de `package.json`.

### --feedback--

Pense no arquivo que atua como o manifesto central para um projeto Node.js e seus comandos executáveis.

---

Dentro do objeto `"scripts"` de `package.json`.

---

Em um arquivo separado `npm-config.json`.

### --feedback--

Pense no arquivo que atua como o manifesto central para um projeto Node.js e seus comandos executáveis.

## --video-solution--

3

## --text--

Como você executa um script npm chamado `build`?

## --answers--

`build npm`

### --feedback--

Pense no prefixo do comando que informa ao npm que você deseja executar um dos comandos personalizados definidos na seção `"scripts"`.

---

`npm run build`

---

`node build`

### --feedback--

Pense no prefixo do comando que informa ao npm que você deseja executar um dos comandos personalizados definidos na seção `"scripts"`.

---

`run build`

### --feedback--

Pense no prefixo do comando que informa ao npm que você deseja executar um dos comandos personalizados definidos na seção `"scripts"`.

## --video-solution--

2

## --text--

Qual é o propósito do hífen duplo (`--`) ao executar um script npm como `npm run start -- 5`?

## --answers--

Isso indica que o script deve ser executado em modo silencioso.

### --feedback--

Pense em como uma ferramenta de comando complexa (como Jest ou Webpack) recebe suas flags específicas quando executada por meio de um atalho npm.

---

Ele informa ao npm para passar os argumentos restantes para o comando de script subjacente.

---

Isso significa que o script deve ser executado com privilégios administrativos elevados.

### --feedback--

Pense em como uma ferramenta de comando complexa (como Jest ou Webpack) recebe suas flags específicas quando executada por meio de um atalho npm.

---

Indica que o script deve ser executado em paralelo com outros scripts definidos.

### --feedback--

Pense em como uma ferramenta de comando complexa (como Jest ou Webpack) recebe suas flags específicas quando executada por meio de um atalho npm.

## --video-solution--

2
