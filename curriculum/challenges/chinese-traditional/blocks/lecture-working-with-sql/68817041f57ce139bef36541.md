---
id: 68817041f57ce139bef36541
title: 什麼是 SQL 注入，以及有哪些方法可以防止它？
challengeType: 19
dashedName: what-is-sql-injection-and-what-are-some-ways-to-prevent-it
---

# --description--

SQL 注入是一種網路安全漏洞，攻擊者會更改或利用網頁應用程式對資料庫所做的查詢。<dfn>例如</dfn>，攻擊者可以將惡意的 SQL 程式碼插入查詢中，以在後端執行該惡意程式碼。

當你讓使用者透過登入表單、搜尋欄或 URL 參數輸入資料，然後使用該使用者輸入的字串插值或串接來產生最終的 `SQL` 指令時，就可能發生這種情況。

根據攻擊者的目標，惡意的 SQL 程式碼可能會對你的資料庫和網頁應用程式造成重大干擾，例如繞過身份驗證、竊取資料庫中的資料，或修改或刪除資料庫記錄。因此，你應該非常重視這項威脅。

例如，假設你的網頁應用程式使用像這樣的 SQL 查詢來驗證使用者，直接嵌入使用者輸入的使用者名稱和密碼：

```sql
'SELECT * FROM users WHERE username = ' + username_input + ' AND password = ' + password_input + ';'
```

如果攻擊者在 `username` 欄位輸入類似這樣的內容：

```sql
'" " OR "1"="1" --'
```

以及 `password` 欄位中的其他任何內容，因為 `"1"="1"` 永遠是 `true`，且 `--` 將查詢的其餘部分註解掉，`WHERE` 語句變成：

```sql
WHERE username = " " OR TRUE
```

這總是 `true`。

根據資料庫的實作，這可能會傳回第一個使用者或資料庫中任何使用者的資料，並允許攻擊者在沒有有效憑證的情況下登入。

那麼你要如何防止這種情況？有兩種主要方法可以防止 SQL 注入：

- 不要使用字串串接來撰寫動態查詢。
- 並防止惡意的 SQL 輸入被包含在將在後端執行的查詢中。

在實務中，你可以使用參數化述語，也稱為參數化查詢。它們將 SQL 結構與使用者輸入的資料分離，從而防止資料庫將輸入資料解釋為可執行的程式碼。

另一個重要的技術是輸入驗證。這在所有情況下都建議作為次要的安全措施，但對於與資料表名稱、行名稱和排序順序相關的 SQL 查詢部分尤其重要。如果可能，建議直接在你的程式碼中指定資料表名稱和行名稱，而非來自使用者輸入。

即使採取所有預防措施後，你仍遭受 SQL 注入攻擊，也可以透過限制每個資料庫帳號的權限來將其對資料庫的影響降到最低。為每個資料庫使用者只授予其工作所需的權限，且不多給。如果一個帳號只需要從資料庫讀取資料，就只授予讀取存取權。作為預防措施，絕不要為你的應用程式帳號指定管理員權限。這樣做非常危險，因為攻擊者可能會取得完整存取權和對資料庫的完全控制。

SQL 注入是一種非常常見的攻擊，作為開發者的你應該在你的網頁應用程式的實作中注意並防範。透過這些技術，你可以保護你的資料庫並確保你的使用者資料安全。

# --questions--

## --text--

SQL 注入攻擊的主要目標是什麼？

## --answers--

為了提升資料庫的效率。

### --feedback--

思考「injection」在技術背景關係中可能暗示什麼，以及名稱「SQL injection」指的是系統的哪一零件。

---

干擾應用程式執行的資料庫查詢。

---

加密敏感使用者資料。

### --feedback--

思考「injection」在技術背景關係中可能暗示什麼，以及名稱「SQL injection」指的是系統的哪一零件。

---

為了增強網站的視覺外觀。

### --feedback--

思考「injection」在技術背景關係中可能暗示什麼，以及名稱「SQL injection」指的是系統的哪一零件。

## --video-solution--

2

## --text--

以下哪一項是防止 SQL 注入漏洞最有效的方法之一？

## --answers--

定期更改資料庫密碼。

### --feedback--

思考如何將你的 SQL 查詢的結構與使用者提供的輸入分離。

---

限制使用者輸入欄的大小。

### --feedback--

思考如何將你的 SQL 查詢的結構與使用者提供的輸入分離。

---

使用參數化述語或查詢。

---

向開發者顯示詳細的資料庫錯誤訊息。

### --feedback--

思考如何將你的 SQL 查詢的結構與使用者提供的輸入分離。

## --video-solution--

3

## --text--

如果網站的登入表單容易受到 SQL 注入攻擊，攻擊者可能會達成什麼目的？

## --answers--

自動備份整個資料庫。

### --feedback--

思考登入表單的目的，以及操作資料庫查詢如何影響其預期的功能。

---

在沒有有效憑證的情況下繞過登入處理程序。

---

提升網站的搜尋引擎等級。

### --feedback--

思考登入表單的目的，以及操作資料庫查詢如何影響其預期的功能。

---

更改網站的設計和版面配置。

### --feedback--

思考登入表單的目的，以及操作資料庫查詢如何影響其預期的功能。

## --video-solution--

2
