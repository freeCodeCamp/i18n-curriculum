---
id: 67d1a82dad69dc95546e5f0d
title: 你如何使用 `refs` 来引用值？
challengeType: 19
dashedName: how-do-you-reference-values-using-refs
---

# --description--

在 React 中，可能会出现你需要直接访问 DOM 元素的情况。这时，`refs` 就非常有用。`refs` 也可以保存可变的值，但状态是更好的选择。 

在原生 JavaScript 中，你使用了 `getElementById()` 和 `querySelector()` 方法来访问 DOM 元素。但在 React 中，你使用 refs 来访问 DOM 中的元素。

主要区别之一是，使用 refs 时，你不需要像 ID 和类这样的标识符来引用元素。

那么，你如何创建并使用 refs 呢？React 提供了一个 `useRef()` 钩子，让你正好可以做到这一点。 

第一步是从 React 导入该 hook：

```js
import { useRef } from "react";
```

接下来，你需要创建一个变量来保存带有初始值的 `useRef` 钩子中的 ref，比如一个初始化为 `null` 的 `sectionRef`：

```js
const sectionRef = useRef(null);
```

最后一步是通过使用 `ref` 属性将 ref 变量附加到你的 JSX 中的元素上：

```jsx
<section ref={sectionRef}>
  {/* Section content */}
</section>
```

如果你将 ref 记录到控制台，你会看到它是一个带有当前值的对象，在这个分支中为 `null`：

```js
console.log(sectionRef); // { current: null }
```

你也可以使用 `current` 属性将当前值记录到控制台，这样你可以直接看到该值：

```js
console.log(sectionRef.current); // null
```

ref 的后续值取决于组件生命周期。 

例如，`sectionRef` 的初始值始终是 `null`，因为它就是这样被初始化的。组件挂载后，ref 的值将是 ref 所附加的 `section` 元素。

如果组件被卸载，ref 的值将恢复为初始值 `null`。

一个典型的示例是展示一个 ref，用于在 `Render` 时或点击按钮时聚焦一个 `input` 元素。

当你点击按钮时，操作方法如下：

```jsx
import { useRef } from "react";

const Focus = () => {
  const inputRef = useRef(null);

  const handleFocus = () => {
    if (inputRef.current) {
      inputRef.current.focus();
    }
  };

  return (
    <div>
      <input ref={inputRef} type="text" placeholder="Enter text" />
      <button onClick={handleFocus}>Focus Input</button>
    </div>
  );
};

export default Focus;
```

在上面的代码中，`inputRef` 被创建并附加到 `input` 元素。还有一个带有 `onClick` 事件的按钮，该事件调用一个 `handleFocus` 函数。

`handleFocus` 函数所做的就是调用 `input` 元素上的 `focus()` 方法。请注意，因为 `input` 是 React 内置的组件，实际的 `input` DOM 元素被设置到 ref 的 `current` 属性上。所以你通过 `input.current.focus()` 来调用 `focus()` 方法。

以下是你在使用 refs 时应注意的一些最佳实践：

- 主要使用 refs 与 DOM 交互。你也可以将它们用于可变的数据，但状态是更好的选择。

- 不要使用 refs 来进行基本状态管理——这正是 `useState` 的用途。

- 确保你在访问 `ref.current` 的属性之前查看它是否存在。以下是再次说明如何操作：

```js
const handleFocus = () => {
  if (inputRef.current) {
    inputRef.current.focus();
  }
};
```

这可以防止在 `ref` 在附加到 DOM 之前或移除之后被访问时发生误差。

# --questions--

## --text--

你如何在 React 中创建并使用 refs？

## --answers--

通过导入并使用 `useState` 钩子。

### --feedback--

注意提供在 React 组件中管理可变引用的方法的 hook。

---

通过导入并使用 `useEffect` 钩子。

### --feedback--

注意提供在 React 组件中管理可变引用的方法的 hook。

---

通过导入并使用 `useRef` 钩子。

---

通过导入并使用 `useMemo` 钩子。

### --feedback--

注意提供在 React 组件中管理可变引用的方法的 hook。

## --video-solution--

3

## --text--

如果你将一个 ref 记录到控制台，它看起来像什么？

## --answers--

一个具有 `current` 属性的对象。

---

像字串或数字这样的原语值。

### --feedback--

考虑 refs 如何使用密钥保存一个可变的对象以访问 `current` 值。

---

一个跟踪组件状态的函数。

### --feedback--

考虑 refs 如何使用密钥保存一个可变的对象以访问 `current` 值。

---

组件中所有 DOM 节点的列表。

### --feedback--

考虑 refs 如何使用密钥保存一个可变的对象以访问 `current` 值。

## --video-solution--

1

## --text--

组件挂载后，`ref` 的值是多少？

## --answers--

始终为 `null`。

### --feedback--

考虑 ref 连接到 DOM 元素后指向的内容。

---

组件的 props。

### --feedback--

考虑 ref 连接到 DOM 元素后指向的内容。

---

由 React 生成的随机值。

### --feedback--

考虑 ref 连接到 DOM 元素后指向的内容。

---

ref 附加的 DOM 元素。

## --video-solution--

4
