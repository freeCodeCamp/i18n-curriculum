---
id: 672a5507d857a891139abc7f
title: 什麼是 aria-controls 屬性，以及它如何運作？
challengeType: 19
dashedName: what-is-the-aria-controls-attribute
---

# --interactive--

`aria-controls` 屬性用於在控制頁面上另一個元素存在的元素與其所控制的元素之間建立程式化關係。此關係可以幫助螢幕閱讀器使用者更好地理解該控制元件的運作方式。常見用法包括一組控制不同內容區段可見性的分頁，或切換選單可見性的按鈕。

讓我們來看一個範例，了解這是如何運作的。在這個分頁介面的範例中，我們有一個 `div` 元素，裡面有一組三個按鈕：

:::interactive_editor

```html
<link rel="stylesheet" href="styles.css">
<div role="tablist">
  <button role="tab" id="tab1" aria-controls="section1" aria-selected="true">
    Tab 1
  </button>
  <button role="tab" id="tab2" aria-controls="section2" aria-selected="false">
    Tab 2
  </button>
  <button role="tab" id="tab3" aria-controls="section3" aria-selected="false">
    Tab 3
  </button>
</div>
```

```css
[role="tablist"] {
  display: flex;
  border-bottom: 2px solid #ccc;
  margin-bottom: 1em;
  gap: 4px;
}

[role="tab"] {
  background: #f5f5f5;
  border: 1px solid #ccc;
  border-bottom: none;
  border-radius: 4px 4px 0 0;
  padding: 8px 16px;
  cursor: pointer;
  font-size: 14px;
  color: #333;
  transition: background 0.2s, color 0.2s;
}

[role="tab"]:hover,
[role="tab"]:focus {
  background: #e8f0fe;
  outline: none;
}

[role="tab"][aria-selected="true"] {
  background: #fff;
  border-color: #ccc;
  border-bottom: 2px solid #fff;
  color: #000;
  font-weight: 600;
  position: relative;
  top: 1px; 
}

[role="tab"]:focus-visible {
  outline: 2px solid #0078d4;
  outline-offset: 2px;
}

```

:::

`div` 使用 `role="tablist"` 來顯示它作為一組分頁的容器元素。

每個按鈕表述一個分頁，並且具有設定為 `tab` 的 `role` 屬性。在大多數分頁介面中，第一個分頁面板預設為可見，因此第一個分頁按鈕具有設定為 `true` 的 `aria-selected` 屬性，以顯示其相關的內容區段目前是可見的。`aria-controls` 屬性用來將每個按鈕與其控制的內容區段相關聯。

以下是對應於分頁的三個內容區段：

:::interactive_editor

```html
<link rel="stylesheet" href="styles.css">
<div role="tablist">
  <button role="tab" id="tab1" aria-controls="section1" aria-selected="true">
    Tab 1
  </button>
  <button role="tab" id="tab2" aria-controls="section2" aria-selected="false">
    Tab 2
  </button>
  <button role="tab" id="tab3" aria-controls="section3" aria-selected="false">
    Tab 3
  </button>
</div>

<div id="section1" role="tabpanel" aria-labelledby="tab1">
  Section 1 content
</div>

<div id="section2" role="tabpanel" aria-labelledby="tab2" hidden>
  Section 2 content
</div>

<div id="section3" role="tabpanel" aria-labelledby="tab3" hidden>
  Section 3 content
</div>
<script src="index.js"></script>
```

```css
[role="tablist"] {
  display: flex;
  border-bottom: 2px solid #ccc;
  margin-bottom: 1em;
  gap: 4px;
  background: #fafafa;
  padding: 0.25em;
}

[role="tab"] {
  background: #f5f5f5;
  border: 1px solid #ccc;
  border-bottom: none;
  border-radius: 4px 4px 0 0;
  padding: 8px 16px;
  cursor: pointer;
  font-size: 14px;
  color: #333;
  transition: background 0.2s, color 0.2s;
}

[role="tab"]:hover,
[role="tab"]:focus {
  background: #e8f0fe;
  outline: none;
}

[role="tab"][aria-selected="true"] {
  background: #fff;
  border-color: #ccc;
  border-bottom: 2px solid #fff;
  color: #000;
  font-weight: 600;
  position: relative;
  top: 1px;
}

[role="tab"]:focus-visible {
  outline: 2px solid #0078d4;
  outline-offset: 2px;
}

[role="tabpanel"] {
  border: 1px solid #ccc;
  border-radius: 0 4px 4px 4px;
  padding: 16px;
  background-color: #fff;
  color: #333;
  font-size: 15px;
  line-height: 1.4;
}

[role="tabpanel"][hidden] {
  display: none;
}

```

```js
const tabs = document.querySelectorAll('[role="tab"]');
const tabList = document.querySelector('[role="tablist"]');

tabs.forEach(tab => {
  tab.addEventListener('click', () => {
    activateTab(tab);
  });

  tab.addEventListener('keydown', (e) => {
    const key = e.key;
    const currentIndex = Array.from(tabs).indexOf(tab);
    let newIndex = null;

    if (key === 'ArrowRight') {
      newIndex = (currentIndex + 1) % tabs.length;
    } else if (key === 'ArrowLeft') {
      newIndex = (currentIndex - 1 + tabs.length) % tabs.length;
    } else if (key === 'Home') {
      newIndex = 0;
    } else if (key === 'End') {
      newIndex = tabs.length - 1;
    }

    if (newIndex !== null) {
      tabs[newIndex].focus();
      activateTab(tabs[newIndex]);
    }
  });
});

function activateTab(tab) {
  const tabPanels = document.querySelectorAll('[role="tabpanel"]');

  tabs.forEach(t => {
    t.setAttribute('aria-selected', 'false');
    t.setAttribute('tabindex', '-1');
  });

  tabPanels.forEach(panel => panel.hidden = true);

  tab.setAttribute('aria-selected', 'true');
  tab.removeAttribute('tabindex');

  const panelId = tab.getAttribute('aria-controls');
  const panel = document.getElementById(panelId);
  panel.hidden = false;
  tab.focus();
}

```

:::

每個內容區段都有設定 `role` 屬性為 `tabpanel`，並且有一個 `aria-labelledby` 屬性指向對應的標籤，以賦予該面板一個可存取的名稱。`hidden` 屬性用來隱藏目前未被選取的內容區段。每個區段的 ID 與對應按鈕上的 `aria-controls` 屬性值相符。`section1` ID 與第一個按鈕的 `aria-controls` 屬性相符，`section2` 與第二個按鈕的 `aria-controls` 屬性相符，`section3` 與第三個按鈕的 `aria-controls` 屬性相符。這就是標籤與其內容區段之間建立關聯的方式。

要在不同區段之間切換，你需要使用 JavaScript 根據目前可見的區段更新該區段上的 `hidden` 屬性以及按鈕上的 `aria-selected` 屬性。一次只能有一個區段可見，且該區段不應該有 `hidden` 屬性，其按鈕上的 `aria-selected` 應設為 `true`。其餘隱藏的區段都應該有 `hidden` 屬性，且其按鈕上的 `aria-selected` 應設為 `false`。

分頁是 `aria-controls` 屬性的常見使用案例，但它也可以用於其他一個元素控制另一個元素的可見性或行為的情境。其他範例包括手風琴、下拉選單和模態視窗。

下次你設計涉及控制元素可見性的使用者介面時，請考慮使用 `aria-controls` 屬性來建立控制元件與被控制元件之間的關係。

# --questions--

## --text--

在分頁的背景關係中，`aria-controls` 屬性的目的是什麼？

## --answers--

指定目前哪個分頁是作用中的。

### --feedback--

思考 `tabs` 與內容區段之間的關聯。

---

隱藏或顯示內容區段。

### --feedback--

思考 `tabs` 與內容區段之間的關聯。

---

將分頁與它所控制的區段關聯。

---

設定該元素的角色。

### --feedback--

思考 `tabs` 與內容區段之間的關聯。

## --video-solution--

3

## --text--

`aria-controls` 屬性如何影響範例中的內容區段？

## --answers--

它會根據使用者輸入自動更新內容。

### --feedback--

思考該屬性如何用來控制內容區段的可見性。

---

它會根據選取的分頁隱藏或顯示區段。

---

它會更改分頁的樣式以顯示它已被選取。

### --feedback--

思考該屬性如何用來控制內容區段的可見性。

---

它定義了分頁的視覺外觀。

### --feedback--

思考該屬性如何用來控制內容區段的可見性。

## --video-solution--

2

## --text--

在提供的範例中，如何使用 `aria-labelledby` 屬性？

## --answers--

指定哪個分頁控制元件控制哪個內容區段。

### --feedback--

它將分頁標籤與它所控制的內容區段連結。

---

用來識別分頁所控制的內容區段。

---

定義分頁和內容區段的角色。

### --feedback--

它將分頁標籤與它所控制的內容區段連結。

---

當點擊分頁時，自動切換內容區段。

### --feedback--

它將分頁標籤與它所控制的內容區段連結。

## --video-solution--

2
