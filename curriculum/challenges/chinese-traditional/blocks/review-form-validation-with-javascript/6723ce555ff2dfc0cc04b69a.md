---
id: 6723ce555ff2dfc0cc04b69a
title: 使用 JavaScript 的表單驗證回顧
challengeType: 31
dashedName: review-form-validation-with-javascript
---

# --interactive--

## 使用 JavaScript 驗證表單

- **條件驗證 API**：某些 HTML 元素，例如 `textarea` 和 `input` 元素，會暴露條件驗證 API。這個 API 允許你斷言使用者為該元素提供的值通過你所撰寫的任何 HTML 層級驗證，例如最小長度或樣式匹配。
- **`checkValidity()` 方法**：如果元素符合所有 HTML 驗證（基於其屬性），此方法傳回 `true`，如果不符合則傳回 `false`。

:::interactive_editor

```html
<form>
  <label>
    Email:
    <input
      id="email"
      type="email"
      required
      pattern=".+\.com$"
      placeholder="example@site.com"
    />
  </label>
</form>

<script>
  const input = document.getElementById("email");

  input.addEventListener("input", (e) => {
    if (!e.target.checkValidity()) {
      e.target.setCustomValidity("You must use a .com email.");
    } else {
      e.target.setCustomValidity("");
    }
  });
</script>
```

:::

- **`reportValidity()` 方法**：此方法告訴瀏覽器 `input` 是無效的。

:::interactive_editor

```html
<form>
  <label>
    Email:
    <input
      id="email2"
      type="email"
      required
      pattern=".+\.com$"
      placeholder="example@site.com"
    />
  </label>
</form>

<script>
  const input = document.getElementById("email2");

  input.addEventListener("input", (e) => {
    if (!e.target.checkValidity()) {
      e.target.reportValidity();
    }
  });
</script>
```

:::

- **`validity` 屬性**：此屬性用於取得或設定表單控制元件（如 `<input>`、`<select>` 等）的有效性狀態，並提供有關使用者輸入是否符合該元素定義的條件（例如 `required` 欄位、樣式條件、最大長度等）的資訊。

:::interactive_editor

```html
<input
  id="age"
  type="number"
  min="18"
  placeholder="Enter age (18+)"
/>

<script>
  const input = document.getElementById("age");

  input.addEventListener("input", (e) => {
    console.log(e.target.validity);
  });
</script>
```

:::

- **`patternMismatch` 屬性**：如果值不符合指定的正則表達式樣式，這將是 `true`。

## `preventDefault()` 方法

- **定義**：每個在 DOM 中觸發的事件都有某種預設行為。勾選框的 click 事件預設會切換該勾選框的狀態。按下空白鍵在聚焦的按鈕上會作用該按鈕。這些 `Event` 物件上的 `preventDefault()` 方法會阻止該行為發生。

:::interactive_editor

```html
<form id="form">
  <input type="text" placeholder="Try to submit" />
  <button type="submit">Submit</button>
</form>

<p id="status"></p>

<script>
  const form = document.getElementById("form");
  const status = document.getElementById("status");

  form.addEventListener("submit", (event) => {
    event.preventDefault();
    status.textContent = "Form submission prevented.";
  });
</script>
```

:::

## 提交表單

- **定義**：表單可以透過三種方式提交。第一種是使用者點擊表單中 `type` 屬性設定為 `submit` 的按鈕。第二種是使用者在表單中任何可編輯的 `input` 欄位按下 `Enter` 鍵。第三種是透過 JavaScript 呼叫 `form` 元素的 `requestSubmit()` 或 `submit()` 方法。
- **`action` 屬性**：`action` 屬性應包含 URL 或當前網域的相對路徑。此值決定表單嘗試將資料傳送到哪裡－如果你沒有設定 `action` 屬性，表單將會將資料傳送到當前頁面的 URL。

```html
<form action="https://freecodecamp.org" method="GET">
  <input
    type="number"
    name="number"
    placeholder="Enter a number"
  />
  <button type="submit">Submit</button>
</form>
```

- **`method` 屬性**：此屬性接受標準的 `HTTP` 方法，例如 `GET` 或 `POST`，並在向 action URL 發出請求時使用該方法。當未設定方法時，表單將預設為 `GET` 請求。表單中的資料將以 `name=value` 對組的形式進行 URL 編碼，並作為查詢參數附加到 action URL。

```html
<form action="/data" method="POST">
  <input
    type="number"
    id="input"
    placeholder="Enter a number"
    name="number"
  />
  <button type="submit">Submit</button>
</form>
```

- **`enctype` 屬性**：`form` 元素接受一個 `enctype` 屬性，用來表述資料的編碼型別。此屬性只接受三個值：`application/x-www-form-urlencoded`（預設值，將資料以 URL 編碼的表單主體傳送）、`text/plain`（以純文字形式傳送資料，使用以換行符號分隔的 `name=value` 對組），或 `multipart/form-data`，專門用於處理含有檔案上傳的表單。


# --assignment--

檢視使用 JavaScript 的表單驗證主題和概念。
