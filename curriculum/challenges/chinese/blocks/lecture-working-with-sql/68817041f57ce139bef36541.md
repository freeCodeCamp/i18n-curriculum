---
id: 68817041f57ce139bef36541
title: 什么是 SQL 注入，以及有哪些防止它的方法？
challengeType: 19
dashedName: what-is-sql-injection-and-what-are-some-ways-to-prevent-it
---

# --description--

SQL 注入是一种网络安全漏洞，攻击者通过更改或利用应用对数据库的查询来实施攻击。例如，攻击者可以将恶意 SQL 代码插入查询中，以在后端运行该恶意代码。

当你允许用户通过登录表单、查找栏或 URL 参数输入数据，然后将该用户输入用于字串插值或串接以生成最终的 SQL 命令时，可能会发生这种情况。

根据攻击者的目标，恶意的 SQL 代码可能会对你的数据库和网页应用造成重大干扰，例如绕过认证、窃取数据库中的数据，或修改或删除数据库记录。因此，你应当非常重视这一威胁。

例如，假设你的网页应用使用如下 SQL 查询来验证用户身份，直接嵌入用户输入的用户名和密码：

```sql
'SELECT * FROM users WHERE username = ' + username_input + ' AND password = ' + password_input + ';'
```

如果攻击者在 `username` 字段中输入类似内容：

```sql
'" " OR "1"="1" --'
```

以及 `password` 字段中的任何其他内容，因为 `"1"="1"` 总是 `true`，且 `--` 会将查询的其余部分注释掉，`WHERE` 子句变为：

```sql
WHERE username = " " OR TRUE
```

这总是 `true`。

根据数据库实现，这可能返回第一个用户或数据库中任何用户的数据，并允许攻击者在没有有效凭据的情况下登录。

那么你如何防止这种情况？防止 SQL 注入有两种主要方法：

- 不要使用字串串接编写动态查询。
- 并防止恶意 SQL `input` 被包含在将在后端执行的查询中。

在实际操作中，你可以使用参数化语句，也称为参数化查询。它们将 SQL 结构与用户输入的数据分离，从而防止数据库将输入数据解释为可执行代码。

另一个重要的技术是输入验证。这在所有情况下都建议作为次要的安全性措施，但对于与表格名称、列名称和排序顺序相关的 SQL 查询部分尤其重要。如果可能，建议直接在你的代码中赋值表格名称和列名称，而不是来自用户输入。

如果尽管采取了所有预防措施，你仍然遭受了 SQL 注入攻击，可以通过限制每个数据库账户的权限来将其对数据库的影响降到最低。为每个数据库用户仅授予其任务所需的权限，且不多授予。如果某个账户只需要从数据库中读取数据，则只授予其读取权限。作为预防措施，切勿为你的应用账户赋值管理员权限。这样做非常危险，因为攻击者可能获得对数据库的完全访问权限和完全控制权。

SQL 注入是一种非常常见的攻击，作为开发者，你应该了解并在你的网页应用的实现中防止这种攻击。通过这些技术，你可以保护你的数据库并保障你的用户数据安全。

# --questions--

## --text--

SQL 注入攻击的主要目标是什么？

## --answers--

为了提高数据库的性能。

### --feedback--

思考一下“注入”在技术上下文中可能意味着什么，以及名称“SQL 注入”指的是系统的哪个部分。

---

干扰应用执行的数据库查询。

---

加密敏感用户数据。

### --feedback--

思考一下“注入”在技术上下文中可能意味着什么，以及名称“SQL 注入”指的是系统的哪个部分。

---

为了增强网站的视觉效果。

### --feedback--

思考一下“注入”在技术上下文中可能意味着什么，以及名称“SQL 注入”指的是系统的哪个部分。

## --video-solution--

2

## --text--

以下哪项是防止 SQL 注入漏洞的最有效方法之一？

## --answers--

定期更改数据库密码。

### --feedback--

考虑如何将你的 SQL 查询结构与用户提供的输入分离。

---

限制用户输入字段的大小。

### --feedback--

考虑如何将你的 SQL 查询结构与用户提供的输入分离。

---

使用参数化语句或查询。

---

向开发者显示详细的数据库错误信息。

### --feedback--

考虑如何将你的 SQL 查询结构与用户提供的输入分离。

## --video-solution--

3

## --text--

如果网站的登录 `form` 易受 SQL 注入攻击，攻击者可能会实现什么？

## --answers--

自动备份整个数据库。

### --feedback--

考虑登录形式的目的以及操作数据库查询如何影响其预期的函数。

---

绕过登录进程而无需有效凭证。

---

提升网站的 `search` 引擎排名。

### --feedback--

考虑登录形式的目的以及操作数据库查询如何影响其预期的函数。

---

更改网站的设计和版型。

### --feedback--

考虑登录形式的目的以及操作数据库查询如何影响其预期的函数。

## --video-solution--

2
