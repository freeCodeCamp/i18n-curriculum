---
id: 6733dd694f91d61a5272b4ac
title: 什麼是 Map 物件，以及它與 WeakMaps 有何不同？
challengeType: 19
dashedName: what-is-the-map-object-and-how-does-it-differ-from-weakmaps
---

# --description--

在 JavaScript 中，`Map` 是一個內建物件，用來儲存鍵值配對，類似於物件。然而，它與標準 JavaScript 物件不同，允許鍵為任何型別，包括物件和函式（程式）。

`WeakMap` 是一種鍵值配對的群集，類似於 `Map`，但它對鍵使用弱引用。鍵必須是物件，而值可以是任何型別。

將 `WeakMap` 和 `Map` 之間的關係視為類似於你在上一課中學到的 `WeakSet` 和 `Set` 之間的關係。

要創建一個 `Map`，你使用以 `new` 關鍵字開頭的 `Map()` 建構式：

```js
const myFirstMap = new Map();
```

你可以用值初始化 `Map`：

```js
const myTreesMap = new Map([
 [{ type: 'deciduous' }, 'Maple tree'],
 [['forest', 'grove'], 'Pine tree'],
 [42, 'Oak tree'],
 [true, 'Birch tree'],
 [function() { return 'I am a function key'; }, 'Willow tree'],
]);
```

如果你沒有用值初始化 `Map`，你可以使用 `set()` 方法來添加它們：

```js
const myTreesMap = new Map();
myTreesMap.set({ type: 'deciduous' }, 'Maple tree');
myTreesMap.set([1, 2], 'Pine tree');
myTreesMap.set(42, 'Oak tree');
myTreesMap.set(true, 'Birch tree');
myTreesMap.set(function() { return "I'm a function key"; }, 'Willow tree');

console.log(myTreesMap);
```

以下是在主控台中 `Map` 的樣子：

```js
/*
Map(5) {{…} => 'Maple tree', Array(2) => 'Pine tree', 42 => 'Oak tree', true => 'Birch tree', ƒ => 'Willow tree'}
  [[Entries]]
    0:{Object => "Maple tree"}
      key: {type: 'deciduous'}
      value: "Maple tree"
    1:{Array(2) => "Pine tree"}
      key: (2)
      value: "Pine tree"
    2:{42 => "Oak tree"}
      key: 42
      value: "Oak tree"
    3:{true => "Birch tree"}
      key: true
      value: "Birch tree"
    4:{function () { return "I'm a function key"; } => "Willow tree"}
      key: f ()
      value: "Willow tree"
    size: 5
    [[Prototype]]: Map
*/
```

你可以用來操作 `Map` 的其他方法有：

- 使用 `get(key)` 來取得與指定 `key` 相關的值。
- 使用 `has(key)` 來檢查 `Map` 中是否存在 `key`。
- 使用 `delete(key)` 從 `Map` 中移除一個鍵值配對。
- 使用 `clear()` 來移除所有鍵值配對。
- 使用 `entries()` 來檢查 `Map` 的條目（它會傳回 `MapIterator` 中的條目）。
- 使用 `forEach()` 來迴圈遍歷 `Map` 的條目。
- `size` 用來顯示 `Map` 中鍵值對組的數量。
    

有一個 `WeakMap()` 建構式，你可以用來創建 `WeakMap`：

```js
const myFirstWeakMap = new WeakMap();
```

`set()`、`get()`、`has()` 和 `delete()` 行為也都可以用於 `WeakMap`。例如，這裡示範如何使用 `set()` 行為為 `Map` 指定條款：

```js
const myTreeWeakMap = new WeakMap();

myTreeWeakMap.set({ id: 1 }, 'Maple tree');
myTreeWeakMap.set({ id: 2 }, 'Pine tree');
myTreeWeakMap.set({ id: 3 }, 'Oak tree');
myTreeWeakMap.set({ id: 4 }, 'Birch tree');
myTreeWeakMap.set({ id: 5 }, 'Willow tree');

console.log(myTreeWeakMap);
```

以下是在主控台中 `WeakMap` 的樣子：

```js
/*
WeakMap {{…} => 'Willow tree', {…} => 'Maple tree', {…} => 'Pine tree', {…} => 'Oak tree'}
  [[Entries]]
    No properties
  [[Prototype]]: WeakMap
*/
```

以下是 `Map` 和 `WeakMap` 之間的差異：

| **Feature** | **Map** | **WeakMap** |
| --- | --- | --- |
| **Key Type** | Keys can be of any data type, including strings, numbers, objects, or even functions. | Keys must be objects. |
| **Use Case** | Use a `Map` when you need to associate data with any type of key. | Use a `WeakMap` when you only need to associate data with objects. |
| **Iteration** | You can loop through a `Map` using `forEach()`, `keys()`, `values()`, or `entries()`. | A `WeakMap` is not iterable. |
| **Size Property** | `Map` has a `size` property to get the number of key-value pairs. | `WeakMap` does not have a `size` property. |

在上表中，你可以看到包含關鍵型別、使用案例、迭代和大小屬性的差異摘要。請花點時間閱讀此表內容，以進一步了解它們的差異。

# --questions--

## --text--

以下哪一項區別了 JavaScript 中的 `Map` 和 `WeakMap`？

## --answers--

`Map` 只允許物件作為鍵，而 `WeakMap` 允許任何型別的鍵。

### --feedback--

思考允許的鍵型別以及如何處理引用。

---

`Map` 對鍵有弱引用，而 `WeakMap` 則沒有。

### --feedback--

思考允許的鍵型別以及如何處理引用。

---

`Map` 允許任意型別的鍵，而 `WeakMap` 僅允許物件作為鍵。

---

`Map` 和 `WeakMap` 的函式（程式）完全相同。

### --feedback--

思考允許的鍵型別以及如何處理引用。

## --video-solution--

3

## --text--

哪個屬性讓你知道 `Map` 中的項目數量？

## --answers--

`length`

### --feedback--

思考用來測量 `Map` 中條目數量的屬性。

---

`count`

### --feedback--

思考用來測量 `Map` 中條目數量的屬性。

---

`total`

### --feedback--

思考用來測量 `Map` 中條目數量的屬性。

---

`size`

## --video-solution--

4

## --text--

哪一個方法讓你將一個項目添加到 `Map` 和 `WeakMap`？

## --answers--

`add()`

### --feedback--

思考專門用於將鍵值對組添加到 `Map` 的方法。

---

`push()`

### --feedback--

思考專門用於將鍵值對組添加到 `Map` 的方法。

---

`set()`

---

`insert()`

### --feedback--

思考專門用於將鍵值對組添加到 `Map` 的方法。

## --video-solution--

3
