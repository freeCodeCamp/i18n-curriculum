---
id: 673500b41af8500191febedc
title: 你如何在 React 中渲染列表？
challengeType: 19
dashedName: how-do-you-render-lists-in-react
---

# --description--

渲染列表是 React 网络应用中的基本任务，用于向用户显示数据。在 React 中，使用 `map` 方法将数据数组转换为可以在 UI 中渲染的 JSX 元素数组。

这是一个名为 `FruitList` 的组件示例，用于显示水果列表：

```jsx
function FruitList() {
  const fruits = ['Apple', 'Banana', 'Cherry', 'Date'];
  return (
    <ul>
      {fruits.map(fruit => <li>{fruit}</li>)}
    </ul>
  );
}
```

在此示例中，`map` 函数迭代 `fruits` 数组中的每个项。对于每个水果，它创建一个包含水果名称的新的 `li` 元素。新创建的 `li` 元素数组随后显示在 `ul` 父级标签内。

但是，在 React 中渲染列表时，重要的是不要忘记为列表中的每个元素添加 `key` 属性。`key` 必须始终唯一，它帮助 React 识别哪些项已更改、添加或删除，这对于高效渲染和更新列表至关重要。

如果你忘记了密钥，React 会在控制台显示警告，但不会抛出致命错误。应用可能仍然会渲染和运行，但你可能会遇到细微的错误，尤其是在列表发生变化时。这些错误可能难以调试，因为界面最初看起来可能是正确的。

一个常见错误是将数组索引用作密钥，像这样：

```jsx
{fruits.map((fruit, index) => <li key={index}>{fruit}</li>)}
```

虽然这可以消除警告，但通常被认为是一种反模式。使用索引作为 `key` 会在列表重新排序、排序或过滤时引发问题。React 使用 `key` 来跟踪元素。如果列表顺序发生变化，React 可能会错误地重用组件状态，或者因为 `key`（索引）保持不变，即使该索引处的内容已更改，也无法高效地更新 DOM。

最佳实践是为每个项使用稳定且唯一的标识符。这通常是来自你的数据库的 ID，例如 UUID 或数据库 ID。

如果你的数据没有唯一的 ID，你可以在数据创建时生成一个（例如，使用 `crypto.randomUUID()` 或像 `uuid` 这样的库），或者使用保证唯一的字段组合作为密钥。然而，你应避免在渲染期间运行中生成密钥（例如，`key={Math.random()}`），因为这会导致 React 在每次渲染时重新创建 DOM 元素并重置它们的状态。

让我们修改示例以包含密钥：

```jsx
function FruitList() {
  const fruits = ["Apple", "Banana", "Cherry", "Date"];
  return (
    <ul>
      {fruits.map((fruit, index) => (
        <li key={`${fruit}-${index}`}>{fruit}</li>
      ))}
    </ul>
  );
}
```

在这个重构的示例中，我们通过将水果名称与其索引连接来为每个列表项创建唯一的密钥。这确保每个列表项都有一个不同的密钥，这有助于 React 高效地管理和更新列表，当项被添加、移除或重新排序时。

React 还允许你渲染更复杂的结构。例如，你可能有一个表现用户的对象数组，每个对象都有多个你想要显示的属性：

```jsx
function UserList() {
  const users = [
    { id: "user-001-employee", name: "Alice", email: "alice@example.com" },
    { id: "user-002-employee", name: "Bob", email: "bob@example.com" },
    { id: "user-003-employee", name: "John", email: "john@example.com" },
  ];
  return (
    <div>
      {users.map((user) => (
        <div key={user.id}>
          <h3>{user.name}</h3>
          <p>{user.email}</p>
        </div>
      ))}
    </div>
  );
}
```

在此示例中，我们为每个用户创建了更复杂的 JSX 结构，同时显示他们的姓名和电子邮件 `address`。我们使用用户的 `id` 作为 `key`，这是一个良好的做法。

总之，在 React 中渲染列表涉及将数据数组转换为 JSX 元素，通常使用 `map` 函数。

# --questions--

## --text--

在 React 中渲染列表时使用 `key` 属性的主要目的是什么？

## --answers--

为列表项设置样式。

### --feedback--

考虑我们关于 React 渲染优化所说的内容。

---

帮助 React 高效识别列表中的更改。

---

对列表项进行排序。

### --feedback--

考虑我们关于 React 渲染优化所说的内容。

---

过滤列表项。

### --feedback--

考虑我们关于 React 渲染优化所说的内容。

## --video-solution--

2

## --text--

在 React 中，通常使用哪个 JavaScript 方法将数据数组转换为 JSX 元素数组？

## --answers--

`forEach()`

### --feedback--

回忆我们在示例中为从数组项创建 JSX 元素而一致使用的方法。

---

`reduce()`

### --feedback--

回忆我们在示例中为从数组项创建 JSX 元素而一致使用的方法。

---

`map()`

---

`filter()`

### --feedback--

回忆我们在示例中为从数组项创建 JSX 元素而一致使用的方法。

## --video-solution--

3

## --text--

在渲染具有唯一 ID 的项列表时，`key` 属性的最佳实践是什么？

## --answers--

使用该项在数组中的索引。

### --feedback--

记住我们之前说过的，为密钥使用稳定且唯一的标识符。

---

使用随机数。

### --feedback--

记住我们之前说过的，为密钥使用稳定且唯一的标识符。

---

使用该项的唯一 ID。

---

使用该项的名称或标题。

### --feedback--

记住我们之前说过的，为密钥使用稳定且唯一的标识符。

## --video-solution--

3
